!function n(t,r,e){function u(a,o){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var s=r[a]={exports:{}};t[a][0].call(s.exports,function(n){var r=t[a][1][n];return u(r?r:n)},s,s.exports,n,t,r,e)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<e.length;a++)u(e[a]);return u}({1:[function(n,t,r){var e,u,i,a,o,r,l,c,s,f,p;p=n("underscore"),p.str=n("underscore.string"),p.mixin(p.str.exports()),o=n("./utils"),f=o.toArray,u={locale:"en_US",language:"en-US",country:"US",currencyCode:"USD",currencySymbol:"$",timeZone:"UTC",decimalSeparator:".",groupingSeparator:",",groupingSize:3},e=p.extend({},u),r={},r.CONFIGURE=function(n,t){return null==t&&(t=!0),t?p.extend(e,n):e=n,e},r.RESETCONFIG=function(){return e=p.extend({},u)},r.NO_VALUE=null,r.NOT_IMPLEMENTED=function(){throw new Error("Not Implemented")},r.MATH_FUNC=a=function(n){return function(){return n.apply(Math,f(arguments).map(NUM))}},r.NUMS=function(){return f(arguments).map(NUM)},r.NUM=function(n){return isNaN(n)?0/0:parseFloat(n)},r.N=function(n){return p.isNumber(n)?n:n===!0?1:0},r.ISNAN=function(n){return p.isNaN(NUM(n))},r.PRECISION=function(n){var t;return n=NUM(n),ISNAN(n)?0/0:(t=(n+"").split("."),t.length<2?0:t[1].length)},r.ABS=a(Math.abs),r.ACOS=a(Math.acos),r.ACOSH=function(n){return n=NUM(n),Math.log(n+Math.sqrt(n*n-1))},r.AND=function(){return void 0===p.find(f(arguments),function(n){return!n})},r.AVERAGE=function(){var n;return n=f(arguments),0===n.length?0/0:p.inject(n,function(n,t){return n+ +t},0)/n.length},r.ROUND=function(n,t){return null==t&&(t=0),n=NUM(n),t=NUM(t),Math.round(n*Math.pow(10,t))/Math.pow(10,t)},r.CEILING=function(n,t){var r;return null==t&&(t=1),null==t&&(t=1),t=ABS(t),n=NUM(n),isNaN(n)||isNaN(t)?0/0:0===t?0:(r=PRECISION(t),n>=0?ROUND(Math.ceil(n/t)*t,r):-ROUND(Math.floor(Math.abs(n)/t)*t,r))},r.FLOOR=function(n,t){var r;return null==t&&(t=1),t=ABS(t),n=NUM(n),isNaN(n)||isNaN(t)?0/0:0===t?0:(r=PRECISION(t),n>=0?ROUND(Math.floor(n/t)*t,r):-ROUND(Math.ceil(Math.abs(n)/t)*t,r))},r.CHAR=function(n){return n=NUM(n),String.fromCharCode(n)},r.CLEAN_REGEX=/[\x00\x08\x0B\x0C\x0E-\x1F]/g,r.CLEAN=function(n){return null==n&&(n=""),n.replace(CLEAN_REGEX,"")},r.COALESCE=function(){var n;return 1===arguments.length&&p.isArray(arguments[0])?COALESCE.apply(null,arguments[0]):null!=(n=p.find(f(arguments),function(n){return null!=n}))?n:NO_VALUE},r.CODE=function(n){return p.isNumber(n)&&(n=n.toString()),p.isString(n)?(null!=n?n:"").charCodeAt(0):0/0},r.CONCATENATE=function(){var n;return n=p.map(f(arguments),function(n){switch(!0){case p.isString(n):return n;case p.isNumber(n):return""+n;default:return""}}),n.join("")},r.COS=a(Math.cos),r.COSH=function(n){var t;return n=NUM(n),t=Math.exp(n),(t+1/t)/2},r.COMPACT=function(n){return p.isArray(n)?p.filter(n,function(n){return null!=n}):void 0},r.COUNT=function(n){return p.isArray(n)?COMPACT(n).length:0/0},r.COUNTA=function(){return COUNT(f(arguments))},r.COUNTBLANK=function(n){var t;return p.isArray(n)?(t=p.filter(n,function(n){switch(!0){case null==n:return!0;case p.isArray(n):return 0===n.length;case p.isString(n):return p.isBlank(n);default:return!1}}),t.length):0/0},r.DATE=function(n,t,r){return n=INT(n),t=INT(t),r=INT(r),isNaN(n)||isNaN(t)||isNaN(r)?NO_VALUE:new Date(""+n+"/"+t+"/"+r+" 00:00:00")},r.DATEADD=function(n,t,r){var e;return null==r&&(r="day"),n=DATEVALUE(n),t=INT(t),null==n?NO_VALUE:isNaN(t)?NO_VALUE:"day"!==r?NO_VALUE:(e=n.getTime(),e+=864e5*t,new Date(e))},r.DATEVALUE=function(n){var t;return p.isDate(n)?n:(p.isString(n)&&n.length<=10&&(n=n.replace(/-/g,"/")),t=new Date(n),isNaN(t.getTime())?NO_VALUE:t)},r.DAY=function(n){return n=DATEVALUE(n),null==n?NO_VALUE:n.getDate()},r.DEGREES=function(n){return n=NUM(n),p.isNumber(n)?180*n/Math.PI:0/0},r.DOLLAR=function(n,t,r,e){var u;return null==t&&(t=2),null==r&&(r=null),null==e&&(e=null),t=NUM(t),null==t&&(t=2),isNaN(t)&&(t=2),n=NUM(n),p.isNumber(n)?(null==r&&(r=CURRENCYCODE()),null==e&&(e=LANGUAGE()),u={style:"currency",currency:r,minimumFractionDigits:t,maximumFractionDigits:t},FORMATNUMBER(n,e,u)):NO_VALUE},r.EVEN=function(n){return n=NUM(n),p.isNumber(n)?CEILING(n,-2,-1):0/0},r.EXACT=function(n,t){return p.isEqual(n,t)},r.EXP=a(Math.exp),r.MEMOIZED_FACT=[],r.FACT=function(n){var t;return n=NUM(n),isNaN(n)?0/0:0>n?0/0:(t=Math.floor(n),0===t||1===t?1:MEMOIZED_FACT[t]>0?MEMOIZED_FACT[t]:(MEMOIZED_FACT[t]=FACT(t-1)*t,MEMOIZED_FACT[t]))},r.MEMOIZED_FACTDOUBLE=[],r.FACTDOUBLE=function(n){var t;return n=NUM(n),isNaN(n)?0/0:0>n?0/0:(t=Math.floor(n),1>=t?1:MEMOIZED_FACTDOUBLE[t]>0?MEMOIZED_FACTDOUBLE[t]:(MEMOIZED_FACTDOUBLE[t]=FACTDOUBLE(t-2)*t,MEMOIZED_FACTDOUBLE[t]))},r.FALSE=function(){return!1},r.FIND=function(n,t,r){var e;return r=NUM(r),isNaN(r)&&(r=0),t&&t.indexOf?p.isArray(n)?NO_VALUE:(e=t.indexOf(n,r-1),0>e?NO_VALUE:e+1):NO_VALUE},r.FIXED=function(n,t,r){var e,u,i,a,o,l,c,s,f,p,m,h,g,N;if(null==t&&(t=2),null==r&&(r=!1),n=NUM(n),t=NUM(t),isNaN(t)&&(t=2),t=MAX(t,0),t=MIN(t,20),isNaN(n))return NO_VALUE;if(isNaN(t))return NO_VALUE;if(r=!!r,m=Math.pow(10,t),h=parseInt(n*m),s=".",f=n.toFixed(t),o=f.indexOf(s),!(o>-1))return f;if(l=parseInt(f.substring(0,o)),e=f.substring(o+1,f.length),c="",a=GROUPINGSIZE(),u=Math.pow(10,a),r||u>l)c=l.toString();else{for(i=GROUPINGSEPARATOR(),p=[];l>=u;)g=Math.floor(l%u),N=new Array(a+1).join("0"),p.push(RIGHT(N+g.toString(),a)),l=Math.floor(l/u);l>0&&p.push(l.toString()),c=p.reverse().join(i)}return 1>t?c:c+DECIMALSEPARATOR()+e.toString()},r.GCD=function(){var n,t,r,e,u,i,a;if(e=f(arguments).map(NUM),n=e.length,0===e.length)return 0/0;if(e[0]<0)return 0/0;for(u=e[0],t=i=1,a=n-1;a>=1?a>=i:i>=a;t=a>=1?++i:--i){if(e[t]<0)return 0/0;for(r=e[t];u&&r;)u>r?u%=r:r%=u;u+=r}return u},r.IF=function(n,t,r){return n?t:r},r.IFERROR=function(n,t){return ISERR(n)?t:n},r.INT=r.FLOOR,r.ISBLANK=function(n){var t,r,e,u,i;return null==n?!0:p.isNaN(n)?!0:p.isBoolean(n)?!1:p.isNumber(n)?!1:p.isDate(n)?!1:p.isString(n)?p.isBlank(n):p.isArray(n)?0===n.length:n&&(n.choice_values||null===n.choice_values||n.other_values||null===n.other_values)?(t=n.choice_values,i=n.other_values,r=p.isArray(t)&&t.length>0,u=p.isArray(i)&&i.length>0,e=r||u,!e):0===Object.keys(n).length},r.ISERR=function(n){return null==n?!0:isNaN(n)?!0:n instanceof Error?!0:!1},r.ISERROR=function(n){return ISERR(n)},r.ISLOGICAL=function(n){return p.isBoolean(n)},r.ISNONTEXT=function(n){return!p.isString(n)},r.ISNUMBER=function(n){return p.isNumber(n)},r.ISODD=function(n){return n=NUM(n),p.isNumber(n)?isNaN(n)?!1:1===(1&Math.floor(Math.abs(n))):!1},r.ISEVEN=function(n){return n=NUM(n),p.isNumber(n)?isNaN(n)?!1:0===(1&Math.floor(Math.abs(n))):!1},r.ISTEXT=function(n){return p.isString(n)},r.LCM=function(){var n,t,r,e,u,i,a,o;for(i=f(arguments).map(function(n){return INT(n)}),e=i.length,n=Math.abs(i[0]),u=a=1,o=e-1;o>=a;u=a+=1){if(t=Math.abs(i[u]),r=n,isNaN(t))return 0/0;for(;n&&t;)n>t?n%=t:t%=n;n=Math.abs(r*i[u])/(n+t)}return n},r.LEFT=function(n,t){return null==t&&(t=1),null==t&&(t=1),t=FLOOR(t),null==n?NO_VALUE:p.isObject(n)?NO_VALUE:0>t?NO_VALUE:isNaN(t)?NO_VALUE:(n=n.toString(),n.substring(0,t))},r.LEN=function(n){return null==n?NO_VALUE:p.isObject(n)?NO_VALUE:n.toString().length},r.LN=a(Math.log),r.LOG=function(n,t){return n=NUM(n),t=NUM(null!=t?t:10),null==t?0/0:isNaN(t)?0/0:Math.log(n)/Math.log(t)},r.LOG10=function(n){return LOG(n,10)},r.LOWER=function(n){return null==n?NO_VALUE:p.isArray(n)?NO_VALUE:p.isObject(n)?NO_VALUE:n.toString().toLowerCase()},r.MATCH=function(){return NOT_IMPLEMENTED()},r.MAX=function(){var n,t;return t=p.flatten(f(arguments)),t=p.map(t,NUM),0===t.length?NO_VALUE:(n=p.some(t,isNaN),n?NO_VALUE:Math.max.apply(Math,t))},r.MAXA=function(){return arguments.length<1?NO_VALUE:p.isArray(arguments[0])?MAX.apply(null,arguments[0]):NO_VALUE},r.MEDIAN=function(){var n,t,r;return r=p.flatten(f(arguments)),r=p.map(r,NUM),p.isArray(r)?0===r.length?NO_VALUE:(t=p.some(r,isNaN))?NO_VALUE:(r.sort(function(n,t){return n-t}),n=Math.floor(r.length/2),r.length%2?r[n]:(r[n-1]+r[n])/2):NO_VALUE},r.MIN=function(){var n,t;return t=p.flatten(f(arguments)),t=p.map(t,NUM),0===t.length?NO_VALUE:(n=p.some(t,isNaN),n?NO_VALUE:Math.min.apply(Math,t))},r.MINA=function(){return arguments.length<1?NO_VALUE:p.isArray(arguments[0])?MIN.apply(null,arguments[0]):NO_VALUE},r.MID=function(n,t,r){return t=FLOOR(t),r=FLOOR(r),null==n?NO_VALUE:p.isObject(n)?NO_VALUE:1>t?NO_VALUE:isNaN(t)?NO_VALUE:0>r?NO_VALUE:isNaN(r)?NO_VALUE:(n=n.toString(),n.substr(t-1,r))},r.MOD=function(n,t){var r;return n=NUM(n),t=NUM(t),isNaN(n)?0/0:isNaN(t)?0/0:0===t?0/0:(r=Math.abs(n%t),t>0?r:-r)},r.MONTH=function(n){return n=DATEVALUE(n),null==n?NO_VALUE:n.getMonth()+1},r.NOT=function(n){return!(null!=n?n:!1)},r.ODD=function(n){var t;return n=NUM(n),p.isNumber(n)?(t=Math.ceil(Math.abs(n)),t=1&t?t:t+1,n>=0?t:-t):0/0},r.OR=function(){return void 0!==p.find(f(arguments),function(n){return n})},r.PI=function(){return Math.PI},r.POWER=function(n,t){return n=NUM(n),t=NUM(t),isNaN(n)?0/0:isNaN(t)?0/0:Math.pow(n,t)},r.PRODUCT=function(){var n,t;return t=f(arguments).map(NUM),0===t.length?0/0:(n=p.some(t,isNaN),n?0/0:p.inject(t,function(n,t){return n*=t},1))},r.PROPER=function(n){return null==n?NO_VALUE:p.isArray(n)?NO_VALUE:p.isObject(n)?NO_VALUE:p.titleize(n.toString())},r.QUOTIENT=function(n,t){return n=NUM(n),t=NUM(t),isNaN(n)?0/0:isNaN(t)?0/0:0===t?0/0:parseInt(n/t,10)},r.RADIANS=function(n){return n=NUM(n),n/180*Math.PI},r.RAND=function(){return Math.random()},r.RANDBETWEEN=function(n,t){return n=NUM(n),t=NUM(t),isNaN(n)?0/0:isNaN(t)?0/0:n+Math.ceil((t-n+1)*Math.random())-1},r.REPLACE=function(n,t,r,e){var u,i;return t=FLOOR(t),r=FLOOR(r),null==n?NO_VALUE:arguments.length<4?NO_VALUE:p.isObject(n)?NO_VALUE:1>t?NO_VALUE:isNaN(t)?NO_VALUE:0>r?NO_VALUE:isNaN(r)?NO_VALUE:(n=n.toString(),u=n.substr(0,t-1),i=n.substr(t-1+r),u+e+i)},r.RIGHT=function(n,t){return null==t&&(t=1),t=FLOOR(t),null==n?NO_VALUE:p.isObject(n)?NO_VALUE:0>t?NO_VALUE:isNaN(t)?NO_VALUE:(n=n.toString(),n.substring(n.length-t))},r.ROUNDDOWN=function(n,t){var r;return null==t&&(t=0),n=NUM(n),t=NUM(t),r=n>0?1:-1,r*Math.floor(Math.abs(n)*Math.pow(10,t))/Math.pow(10,t)},r.ROUNDUP=function(n,t){var r;return null==t&&(t=0),n=NUM(n),t=NUM(t),r=n>0?1:-1,r*Math.ceil(Math.abs(n)*Math.pow(10,t))/Math.pow(10,t)},r.SEARCH=function(n,t,r){var e;return null==r&&(r=1),r=NUM(r),isNaN(r)&&(r=1),p.isNumber(t)&&(t=t.toString()),p.isNumber(n)&&(n=n.toString()),p.isString(n)&&p.isString(t)?""===n?1:(e=t.toLowerCase().indexOf(n.toLowerCase(),r-1),0>e?NO_VALUE:e+1):NO_VALUE},r.SIGN=function(n){if(n=NUM(n),isNaN(n))return 0/0;switch(!0){case n>0:return 1;case 0>n:return-1;case 0===n:return 0}},r.SIN=a(Math.sin),r.SINH=function(n){var t;return n=NUM(n),t=Math.exp(n),(t-1/t)/2},r.SQRT=a(Math.sqrt),r.SQRTPI=function(n){return SQRT(NUM(n)*Math.PI)},r.SUBSTITUTE=function(n,t,r,e){var u,i,a,o,l;if(e=FLOOR(e),arguments.length<3)return NO_VALUE;if(0>e)return NO_VALUE;if(a=!n||!p.isString(t)||!p.isString(r))return NO_VALUE;if(p.isArray(n))return n;if(n.indexOf(t)<0)return n;if(n=n.toString(),t=t.toString(),r=r.toString(),isNaN(e))return n.replace(new RegExp(t,"g"),r);for(i=n.indexOf(t,i),u=1;i>=0;){if(u===e)return o=n.substring(0,i),l=n.substring(i+t.length),o+r+l;i=n.indexOf(t,i+1),u++}return n},r.SUM=function(){var n,t;return t=f(arguments).map(NUM),0===t.length?0/0:(n=p.some(t,isNaN),n?0/0:p.inject(t,function(n,t){return n+=t},0))},r.SUMSQ=function(){var n,t;return t=f(arguments).map(NUM),0===t.length?0/0:(n=p.some(t,isNaN),n?0/0:p.inject(t,function(n,t){return n+=t*t},0))},r.T=function(n){return null==n?"":n.toString()},r.TRIM=function(n){return p.trim(n)},r.TRUE=function(){return!0},r.UPPER=function(n){return null==n?NO_VALUE:p.isArray(n)?NO_VALUE:p.isObject(n)?NO_VALUE:n.toString().toUpperCase()},r.VALUE=function(){return NOT_IMPLEMENTED()},r.YEAR=function(n){return n=DATEVALUE(n),null==n?NO_VALUE:n.getFullYear()},r.X_ISNEW=function(){return CONFIG().featureIsNew===!0},r.X_ISUPDATE=function(){return!X_ISNEW()},r.CONFIG=function(){return e},r.HASOTHER=function(n){return!!(n&&n.other_values&&p.isArray(n.other_values)&&n.other_values.length>0)},r.OTHER=function(n){return HASOTHER(n)?ISBLANK(n.other_values)?NO_VALUE:n.other_values[0]:NO_VALUE},r.SELECTED=function(n,t){return ISBLANK(n)?!1:null==t?!1:p.isArray(t)?0===t.filter(function(t){return!SELECTED(n,t)}).length:n&&n.choice_values&&p.contains(n.choice_values,t)?!0:n&&n.other_values&&p.contains(n.other_values,t)?!0:!1},r.ONCE=function(n){var t;return null!=(t=$$runtime.$$currentValue)?t:n},r.LOCALE=function(){return e.locale||u.locale},r.LANGUAGE=function(){return e.language||u.language},r.COUNTRY=function(){return e.country||u.country},r.GROUPINGSIZE=function(){return e.groupingSize||u.groupingSize},r.DECIMALSEPARATOR=function(){return e.decimalSeparator||u.decimalSeparator},r.GROUPINGSEPARATOR=function(){return e.groupingSeparator||u.groupingSeparator},r.TIMEZONE=function(){return e.timeZone||u.timeZone},r.CURRENCYCODE=function(){return e.currencyCode||u.currencyCode},r.CURRENCYSYMBOL=function(){return e.currencySymbol||u.currencySymbol},r.DEVICEMODEL=function(){var n;return null!=(n=e.deviceModel)?n:""},r.DEVICEMANUFACTURER=function(){var n;return null!=(n=e.deviceManufacturer)?n:""},r.PLATFORM=function(){var n;return null!=(n=e.platform)?n:""},r.PLATFORMVERSION=function(){var n;return null!=(n=e.platformVersion)?n:""},r.APPLICATION=function(){var n;return null!=(n=e.application)?n:""},r.APPLICATIONVERSION=function(){var n;return null!=(n=e.applicationVersion)?n:""},r.APPLICATIONBUILD=function(){var n;return null!=(n=e.applicationBuild)?n:""},r.DEVICEINFO=function(n){return null==n&&(n=" "),p.compact([DEVICEMANUFACTURER(),DEVICEMODEL()]).join(n)},r.PLATFORMINFO=function(n){return null==n&&(n=" "),p.compact([PLATFORM(),PLATFORMVERSION()]).join(n)},r.APPLICATIONINFO=function(n){return null==n&&(n=" "),p.compact([APPLICATION(),APPLICATIONVERSION(),APPLICATIONBUILD()]).join(n)},r.VERSIONINFO=function(n){return null==n&&(n=" "),p.compact([DEVICEINFO(),PLATFORMINFO(),APPLICATIONINFO()]).join(n)},r.FORMATNUMBER=function(n,t,r){var e,u;return null==n&&(n=NUM(n)),null==t&&(t=LANGUAGE()),null==r&&(r={}),u="decimal","currency"===r.style&&(u="currency"),"percent"===r.style&&(u="percent"),r.style=u,"currency"===r.style&&null==r.currency&&(r.currency=CURRENCYCODE()),e=p.isNumber(r.minimumSignificantDigits)||p.isNumber(r.maximumSignificantDigits),e?(null==r.minimumSignificantDigits&&(r.minimumSignificantDigits=1),r.minimumSignificantDigits=NUM(r.minimumSignificantDigits),r.minimumSignificantDigits=MIN(MAX(r.minimumSignificantDigits,1),21),null==r.maximumSignificantDigits&&(r.maximumSignificantDigits=r.minimumSignificantDigits),r.maximumSignificantDigits=NUM(r.maximumSignificantDigits),r.maximumSignificantDigits=MIN(MAX(r.maximumSignificantDigits,1),21)):(null==r.minimumIntegerDigits&&(r.minimumIntegerDigits=1),r.minimumIntegerDigits=NUM(r.minimumIntegerDigits),r.minimumIntegerDigits=MIN(MAX(r.minimumIntegerDigits,1),21),null==r.minimumFractionDigits&&(r.minimumFractionDigits="currency"===r.style?2:0),r.minimumFractionDigits=NUM(r.minimumFractionDigits),r.minimumFractionDigits=MIN(MAX(r.minimumFractionDigits,0),20),"currency"===r.style?null==r.maximumFractionDigits&&(r.maximumFractionDigits=2):"percent"===r.style?null==r.maximumFractionDigits&&(r.maximumFractionDigits=MAX(r.minimumFractionDigits,0)):null==r.maximumFractionDigits&&(r.maximumFractionDigits=MAX(r.minimumFractionDigits,3)),r.maximumFractionDigits=NUM(r.maximumFractionDigits),r.maximumFractionDigits=MIN(MAX(r.maximumFractionDigits,0),20)),p.isBoolean(r.useGrouping)||(r.useGrouping=!0),i.formatNumber(n,t,r)},r.LATITUDE=function(){var n;return NUM(null!=(n=CONFIG().featureGeometry)?n.coordinates[1]:void 0)},r.LONGITUDE=function(){var n;return NUM(null!=(n=CONFIG().featureGeometry)?n.coordinates[0]:void 0)},r.STATUS=function(){var n;return null!=(n=CONFIG().recordStatus)?n:null},r.STATUSLABEL=function(){var n,t,r;return n=null!=(t=CONFIG().recordStatus)?t:null,n&&null!=(r=$$runtime.statusesByValue[n])?r:null},r.REPEATABLEVALUES=function(n,t,r){var e;return e=$$runtime.elementsByDataName[t],e?o.repeatableValues(e,n,r):NO_VALUE},r.REPEATABLESUM=function(n,t,r){return SUM.apply(null,REPEATABLEVALUES(n,t,r))},s=function(n){return p.isFunction($$runtime["$$"+n])},c=function(n,t){return $$runtime["$$"+n].apply($$runtime,t)},i=l={},l.formatNumber=function(n,t,r){var e;return s("formatNumber")?c("formatNumber",arguments):"undefined"!=typeof Intl?(e=new Intl.NumberFormat(t,r),e.format(n)):""+n},t.exports=r},{"./utils":5,underscore:3,"underscore.string":2}],2:[function(n,t,r){!function(n,e){"use strict";function u(n,t){var r,e,u=n.toLowerCase();for(t=[].concat(t),r=0;r<t.length;r+=1)if(e=t[r]){if(e.test&&e.test(n))return!0;if(e.toLowerCase()===u)return!0}}var i=e.prototype.trim,a=e.prototype.trimRight,o=e.prototype.trimLeft,l=function(n){return 1*n||0},c=function(n,t){if(1>t)return"";for(var r="";t>0;)1&t&&(r+=n),t>>=1,n+=n;return r},s=[].slice,f=function(n){return null==n?"\\s":n.source?n.source:"["+N.escapeRegExp(n)+"]"},p={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},m={};for(var h in p)m[p[h]]=h;m["'"]="#39";var g=function(){function n(n){return Object.prototype.toString.call(n).slice(8,-1).toLowerCase()}var t=c,r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.format=function(r,u){var i,a,o,l,c,s,f,p=1,m=r.length,h="",N=[];for(a=0;m>a;a++)if(h=n(r[a]),"string"===h)N.push(r[a]);else if("array"===h){if(l=r[a],l[2])for(i=u[p],o=0;o<l[2].length;o++){if(!i.hasOwnProperty(l[2][o]))throw new Error(g('[_.sprintf] property "%s" does not exist',l[2][o]));i=i[l[2][o]]}else i=l[1]?u[l[1]]:u[p++];if(/[^s]/.test(l[8])&&"number"!=n(i))throw new Error(g("[_.sprintf] expecting number but found %s",n(i)));switch(l[8]){case"b":i=i.toString(2);break;case"c":i=e.fromCharCode(i);break;case"d":i=parseInt(i,10);break;case"e":i=l[7]?i.toExponential(l[7]):i.toExponential();break;case"f":i=l[7]?parseFloat(i).toFixed(l[7]):parseFloat(i);break;case"o":i=i.toString(8);break;case"s":i=(i=e(i))&&l[7]?i.substring(0,l[7]):i;break;case"u":i=Math.abs(i);break;case"x":i=i.toString(16);break;case"X":i=i.toString(16).toUpperCase()}i=/[def]/.test(l[8])&&l[3]&&i>=0?"+"+i:i,s=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",f=l[6]-e(i).length,c=l[6]?t(s,f):"",N.push(l[5]?i+c:c+i)}return N.join("")},r.cache={},r.parse=function(n){for(var t=n,r=[],e=[],u=0;t;){if(null!==(r=/^[^\x25]+/.exec(t)))e.push(r[0]);else if(null!==(r=/^\x25{2}/.exec(t)))e.push("%");else{if(null===(r=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw new Error("[_.sprintf] huh?");if(r[2]){u|=1;var i=[],a=r[2],o=[];if(null===(o=/^([a-z_][a-z_\d]*)/i.exec(a)))throw new Error("[_.sprintf] huh?");for(i.push(o[1]);""!==(a=a.substring(o[0].length));)if(null!==(o=/^\.([a-z_][a-z_\d]*)/i.exec(a)))i.push(o[1]);else{if(null===(o=/^\[(\d+)\]/.exec(a)))throw new Error("[_.sprintf] huh?");i.push(o[1])}r[2]=i}else u|=2;if(3===u)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");e.push(r)}t=t.substring(r[0].length)}return e},r}(),N={VERSION:"2.4.0",isBlank:function(n){return null==n&&(n=""),/^\s*$/.test(n)},stripTags:function(n){return null==n?"":e(n).replace(/<\/?[^>]+>/g,"")},capitalize:function(n){return n=null==n?"":e(n),n.charAt(0).toUpperCase()+n.slice(1)},chop:function(n,t){return null==n?[]:(n=e(n),t=~~t,t>0?n.match(new RegExp(".{1,"+t+"}","g")):[n])},clean:function(n){return N.strip(n).replace(/\s+/g," ")},count:function(n,t){if(null==n||null==t)return 0;n=e(n),t=e(t);for(var r=0,u=0,i=t.length;;){if(u=n.indexOf(t,u),-1===u)break;r++,u+=i}return r},chars:function(n){return null==n?[]:e(n).split("")},swapCase:function(n){return null==n?"":e(n).replace(/\S/g,function(n){return n===n.toUpperCase()?n.toLowerCase():n.toUpperCase()})},escapeHTML:function(n){return null==n?"":e(n).replace(/[&<>"']/g,function(n){return"&"+m[n]+";"})},unescapeHTML:function(n){return null==n?"":e(n).replace(/\&([^;]+);/g,function(n,t){var r;return t in p?p[t]:(r=t.match(/^#x([\da-fA-F]+)$/))?e.fromCharCode(parseInt(r[1],16)):(r=t.match(/^#(\d+)$/))?e.fromCharCode(~~r[1]):n})},escapeRegExp:function(n){return null==n?"":e(n).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(n,t,r,e){var u=N.chars(n);return u.splice(~~t,~~r,e),u.join("")},insert:function(n,t,r){return N.splice(n,t,0,r)},include:function(n,t){return""===t?!0:null==n?!1:-1!==e(n).indexOf(t)},join:function(){var n=s.call(arguments),t=n.shift();return null==t&&(t=""),n.join(t)},lines:function(n){return null==n?[]:e(n).split("\n")},reverse:function(n){return N.chars(n).reverse().join("")},startsWith:function(n,t){return""===t?!0:null==n||null==t?!1:(n=e(n),t=e(t),n.length>=t.length&&n.slice(0,t.length)===t)},endsWith:function(n,t){return""===t?!0:null==n||null==t?!1:(n=e(n),t=e(t),n.length>=t.length&&n.slice(n.length-t.length)===t)},succ:function(n){return null==n?"":(n=e(n),n.slice(0,-1)+e.fromCharCode(n.charCodeAt(n.length-1)+1))},titleize:function(n){return null==n?"":(n=e(n).toLowerCase(),n.replace(/(?:^|\s|-)\S/g,function(n){return n.toUpperCase()}))},camelize:function(n){return N.trim(n).replace(/[-_\s]+(.)?/g,function(n,t){return t?t.toUpperCase():""})},underscored:function(n){return N.trim(n).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(n){return N.trim(n).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(n){return N.capitalize(N.camelize(e(n).replace(/[\W_]/g," ")).replace(/\s/g,""))},humanize:function(n){return N.capitalize(N.underscored(n).replace(/_id$/,"").replace(/_/g," "))},trim:function(n,t){return null==n?"":!t&&i?i.call(n):(t=f(t),e(n).replace(new RegExp("^"+t+"+|"+t+"+$","g"),""))},ltrim:function(n,t){return null==n?"":!t&&o?o.call(n):(t=f(t),e(n).replace(new RegExp("^"+t+"+"),""))},rtrim:function(n,t){return null==n?"":!t&&a?a.call(n):(t=f(t),e(n).replace(new RegExp(t+"+$"),""))},truncate:function(n,t,r){return null==n?"":(n=e(n),r=r||"...",t=~~t,n.length>t?n.slice(0,t)+r:n)},prune:function(n,t,r){if(null==n)return"";if(n=e(n),t=~~t,r=null!=r?e(r):"...",n.length<=t)return n;var u=function(n){return n.toUpperCase()!==n.toLowerCase()?"A":" "},i=n.slice(0,t+1).replace(/.(?=\W*\w*$)/g,u);return i=i.slice(i.length-2).match(/\w\w/)?i.replace(/\s*\S+$/,""):N.rtrim(i.slice(0,i.length-1)),(i+r).length>n.length?n:n.slice(0,i.length)+r},words:function(n,t){return N.isBlank(n)?[]:N.trim(n,t).split(t||/\s+/)},pad:function(n,t,r,u){n=null==n?"":e(n),t=~~t;var i=0;switch(r?r.length>1&&(r=r.charAt(0)):r=" ",u){case"right":return i=t-n.length,n+c(r,i);case"both":return i=t-n.length,c(r,Math.ceil(i/2))+n+c(r,Math.floor(i/2));default:return i=t-n.length,c(r,i)+n}},lpad:function(n,t,r){return N.pad(n,t,r)},rpad:function(n,t,r){return N.pad(n,t,r,"right")},lrpad:function(n,t,r){return N.pad(n,t,r,"both")},sprintf:g,vsprintf:function(n,t){return t.unshift(n),g.apply(null,t)},toNumber:function(n,t){return n?(n=N.trim(n),n.match(/^-?\d+(?:\.\d+)?$/)?l(l(n).toFixed(~~t)):0/0):0},numberFormat:function(n,t,r,e){if(isNaN(n)||null==n)return"";n=n.toFixed(~~t),e="string"==typeof e?e:",";var u=n.split("."),i=u[0],a=u[1]?(r||".")+u[1]:"";return i.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+e)+a},strRight:function(n,t){if(null==n)return"";n=e(n),t=null!=t?e(t):t;var r=t?n.indexOf(t):-1;return~r?n.slice(r+t.length,n.length):n},strRightBack:function(n,t){if(null==n)return"";n=e(n),t=null!=t?e(t):t;var r=t?n.lastIndexOf(t):-1;return~r?n.slice(r+t.length,n.length):n},strLeft:function(n,t){if(null==n)return"";n=e(n),t=null!=t?e(t):t;var r=t?n.indexOf(t):-1;return~r?n.slice(0,r):n},strLeftBack:function(n,t){if(null==n)return"";n+="",t=null!=t?""+t:t;var r=n.lastIndexOf(t);return~r?n.slice(0,r):n},toSentence:function(n,t,r,e){t=t||", ",r=r||" and ";var u=n.slice(),i=u.pop();return n.length>2&&e&&(r=N.rtrim(t)+r),u.length?u.join(t)+r+i:i},toSentenceSerial:function(){var n=s.call(arguments);return n[3]=!0,N.toSentence.apply(N,n)},slugify:function(n){if(null==n)return"";var t="ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",r="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",u=new RegExp(f(t),"g");return n=e(n).toLowerCase().replace(u,function(n){var e=t.indexOf(n);return r.charAt(e)||"-"}),N.dasherize(n.replace(/[^\w\s-]/g,""))},surround:function(n,t){return[t,n,t].join("")},quote:function(n,t){return N.surround(n,t||'"')},unquote:function(n,t){return t=t||'"',n[0]===t&&n[n.length-1]===t?n.slice(1,n.length-1):n},exports:function(){var n={};for(var t in this)this.hasOwnProperty(t)&&!t.match(/^(?:include|contains|reverse)$/)&&(n[t]=this[t]);return n},repeat:function(n,t,r){if(null==n)return"";if(t=~~t,null==r)return c(e(n),t);for(var u=[];t>0;u[--t]=n);return u.join(r)},naturalCmp:function(n,t){if(n==t)return 0;if(!n)return-1;if(!t)return 1;for(var r=/(\.\d+)|(\d+)|(\D+)/g,u=e(n).toLowerCase().match(r),i=e(t).toLowerCase().match(r),a=Math.min(u.length,i.length),o=0;a>o;o++){var l=u[o],c=i[o];if(l!==c){var s=parseInt(l,10);if(!isNaN(s)){var f=parseInt(c,10);if(!isNaN(f)&&s-f)return s-f}return c>l?-1:1}}return u.length===i.length?u.length-i.length:t>n?-1:1},levenshtein:function(n,t){if(null==n&&null==t)return 0;if(null==n)return e(t).length;if(null==t)return e(n).length;n=e(n),t=e(t);for(var r,u,i=[],a=0;a<=t.length;a++)for(var o=0;o<=n.length;o++)u=a&&o?n.charAt(o-1)===t.charAt(a-1)?r:Math.min(i[o],i[o-1],r)+1:a+o,r=i[o],i[o]=u;return i.pop()},toBoolean:function(n,t,r){return"number"==typeof n&&(n=""+n),"string"!=typeof n?!!n:(n=N.trim(n),u(n,t||["true","1"])?!0:u(n,r||["false","0"])?!1:void 0)}};N.strip=N.trim,N.lstrip=N.ltrim,N.rstrip=N.rtrim,N.center=N.lrpad,N.rjust=N.lpad,N.ljust=N.rpad,N.contains=N.include,N.q=N.quote,N.toBool=N.toBoolean,"undefined"!=typeof r&&("undefined"!=typeof t&&t.exports&&(t.exports=N),r._s=N),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return N}),n._=n._||{},n._.string=n._.str=N}(this,String)},{}],3:[function(n,t,r){(function(){var n=this,e=n._,u=Array.prototype,i=Object.prototype,a=Function.prototype,o=u.push,l=u.slice,c=u.concat,s=i.toString,f=i.hasOwnProperty,p=Array.isArray,m=Object.keys,h=a.bind,g=function(n){return n instanceof g?n:this instanceof g?void(this._wrapped=n):new g(n)};"undefined"!=typeof r?("undefined"!=typeof t&&t.exports&&(r=t.exports=g),r._=g):n._=g,g.VERSION="1.7.0";var N=function(n,t,r){if(void 0===t)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}};g.iteratee=function(n,t,r){return null==n?g.identity:g.isFunction(n)?N(n,t,r):g.isObject(n)?g.matches(n):g.property(n)},g.each=g.forEach=function(n,t,r){if(null==n)return n;t=N(t,r);var e,u=n.length;if(u===+u)for(e=0;u>e;e++)t(n[e],e,n);else{var i=g.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},g.map=g.collect=function(n,t,r){if(null==n)return[];t=g.iteratee(t,r);for(var e,u=n.length!==+n.length&&g.keys(n),i=(u||n).length,a=Array(i),o=0;i>o;o++)e=u?u[o]:o,a[o]=t(n[e],e,n);return a};var v="Reduce of empty array with no initial value";g.reduce=g.foldl=g.inject=function(n,t,r,e){null==n&&(n=[]),t=N(t,e,4);var u,i=n.length!==+n.length&&g.keys(n),a=(i||n).length,o=0;if(arguments.length<3){if(!a)throw new TypeError(v);r=n[i?i[o++]:o++]}for(;a>o;o++)u=i?i[o]:o,r=t(r,n[u],u,n);return r},g.reduceRight=g.foldr=function(n,t,r,e){null==n&&(n=[]),t=N(t,e,4);var u,i=n.length!==+n.length&&g.keys(n),a=(i||n).length;if(arguments.length<3){if(!a)throw new TypeError(v);r=n[i?i[--a]:--a]}for(;a--;)u=i?i[a]:a,r=t(r,n[u],u,n);return r},g.find=g.detect=function(n,t,r){var e;return t=g.iteratee(t,r),g.some(n,function(n,r,u){return t(n,r,u)?(e=n,!0):void 0}),e},g.filter=g.select=function(n,t,r){var e=[];return null==n?e:(t=g.iteratee(t,r),g.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e)},g.reject=function(n,t,r){return g.filter(n,g.negate(g.iteratee(t)),r)},g.every=g.all=function(n,t,r){if(null==n)return!0;t=g.iteratee(t,r);var e,u,i=n.length!==+n.length&&g.keys(n),a=(i||n).length;for(e=0;a>e;e++)if(u=i?i[e]:e,!t(n[u],u,n))return!1;return!0},g.some=g.any=function(n,t,r){if(null==n)return!1;t=g.iteratee(t,r);var e,u,i=n.length!==+n.length&&g.keys(n),a=(i||n).length;for(e=0;a>e;e++)if(u=i?i[e]:e,t(n[u],u,n))return!0;return!1},g.contains=g.include=function(n,t){return null==n?!1:(n.length!==+n.length&&(n=g.values(n)),g.indexOf(n,t)>=0)},g.invoke=function(n,t){var r=l.call(arguments,2),e=g.isFunction(t);return g.map(n,function(n){return(e?t:n[t]).apply(n,r)})},g.pluck=function(n,t){return g.map(n,g.property(t))},g.where=function(n,t){return g.filter(n,g.matches(t))},g.findWhere=function(n,t){return g.find(n,g.matches(t))},g.max=function(n,t,r){var e,u,i=-1/0,a=-1/0;if(null==t&&null!=n){n=n.length===+n.length?n:g.values(n);for(var o=0,l=n.length;l>o;o++)e=n[o],e>i&&(i=e)}else t=g.iteratee(t,r),g.each(n,function(n,r,e){u=t(n,r,e),(u>a||u===-1/0&&i===-1/0)&&(i=n,a=u)});return i},g.min=function(n,t,r){var e,u,i=1/0,a=1/0;if(null==t&&null!=n){n=n.length===+n.length?n:g.values(n);for(var o=0,l=n.length;l>o;o++)e=n[o],i>e&&(i=e)}else t=g.iteratee(t,r),g.each(n,function(n,r,e){u=t(n,r,e),(a>u||1/0===u&&1/0===i)&&(i=n,a=u)});return i},g.shuffle=function(n){for(var t,r=n&&n.length===+n.length?n:g.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=g.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},g.sample=function(n,t,r){return null==t||r?(n.length!==+n.length&&(n=g.values(n)),n[g.random(n.length-1)]):g.shuffle(n).slice(0,Math.max(0,t))},g.sortBy=function(n,t,r){return t=g.iteratee(t,r),g.pluck(g.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),"value")};var E=function(n){return function(t,r,e){var u={};return r=g.iteratee(r,e),g.each(t,function(e,i){var a=r(e,i,t);n(u,e,a)}),u}};g.groupBy=E(function(n,t,r){g.has(n,r)?n[r].push(t):n[r]=[t]}),g.indexBy=E(function(n,t,r){n[r]=t}),g.countBy=E(function(n,t,r){g.has(n,r)?n[r]++:n[r]=1}),g.sortedIndex=function(n,t,r,e){r=g.iteratee(r,e,1);for(var u=r(t),i=0,a=n.length;a>i;){var o=i+a>>>1;r(n[o])<u?i=o+1:a=o}return i},g.toArray=function(n){return n?g.isArray(n)?l.call(n):n.length===+n.length?g.map(n,g.identity):g.values(n):[]},g.size=function(n){return null==n?0:n.length===+n.length?n.length:g.keys(n).length},g.partition=function(n,t,r){t=g.iteratee(t,r);var e=[],u=[];return g.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},g.first=g.head=g.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:0>t?[]:l.call(n,0,t)},g.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},g.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:l.call(n,Math.max(n.length-t,0))},g.rest=g.tail=g.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},g.compact=function(n){return g.filter(n,g.identity)};var d=function(n,t,r,e){if(t&&g.every(n,g.isArray))return c.apply(e,n);for(var u=0,i=n.length;i>u;u++){var a=n[u];g.isArray(a)||g.isArguments(a)?t?o.apply(e,a):d(a,t,r,e):r||e.push(a)}return e};g.flatten=function(n,t){return d(n,t,!1,[])},g.without=function(n){return g.difference(n,l.call(arguments,1))},g.uniq=g.unique=function(n,t,r,e){if(null==n)return[];g.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=g.iteratee(r,e));for(var u=[],i=[],a=0,o=n.length;o>a;a++){var l=n[a];if(t)a&&i===l||u.push(l),i=l;else if(r){var c=r(l,a,n);g.indexOf(i,c)<0&&(i.push(c),u.push(l))}else g.indexOf(u,l)<0&&u.push(l)}return u},g.union=function(){return g.uniq(d(arguments,!0,!0,[]))
},g.intersection=function(n){if(null==n)return[];for(var t=[],r=arguments.length,e=0,u=n.length;u>e;e++){var i=n[e];if(!g.contains(t,i)){for(var a=1;r>a&&g.contains(arguments[a],i);a++);a===r&&t.push(i)}}return t},g.difference=function(n){var t=d(l.call(arguments,1),!0,!0,[]);return g.filter(n,function(n){return!g.contains(t,n)})},g.zip=function(n){if(null==n)return[];for(var t=g.max(arguments,"length").length,r=Array(t),e=0;t>e;e++)r[e]=g.pluck(arguments,e);return r},g.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},g.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=g.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}for(;u>e;e++)if(n[e]===t)return e;return-1},g.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=n.length;for("number"==typeof r&&(e=0>r?e+r+1:Math.min(e,r+1));--e>=0;)if(n[e]===t)return e;return-1},g.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var A=function(){};g.bind=function(n,t){var r,e;if(h&&n.bind===h)return h.apply(n,l.call(arguments,1));if(!g.isFunction(n))throw new TypeError("Bind must be called on a function");return r=l.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(l.call(arguments)));A.prototype=n.prototype;var u=new A;A.prototype=null;var i=n.apply(u,r.concat(l.call(arguments)));return g.isObject(i)?i:u}},g.partial=function(n){var t=l.call(arguments,1);return function(){for(var r=0,e=t.slice(),u=0,i=e.length;i>u;u++)e[u]===g&&(e[u]=arguments[r++]);for(;r<arguments.length;)e.push(arguments[r++]);return n.apply(this,e)}},g.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=g.bind(n[r],n);return n},g.memoize=function(n,t){var r=function(e){var u=r.cache,i=t?t.apply(this,arguments):e;return g.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},g.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},g.defer=function(n){return g.delay.apply(g,[n,1].concat(l.call(arguments,1)))},g.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var l=function(){o=r.leading===!1?0:g.now(),a=null,i=n.apply(e,u),a||(e=u=null)};return function(){var c=g.now();o||r.leading!==!1||(o=c);var s=t-(c-o);return e=this,u=arguments,0>=s||s>t?(clearTimeout(a),a=null,o=c,i=n.apply(e,u),a||(e=u=null)):a||r.trailing===!1||(a=setTimeout(l,s)),i}},g.debounce=function(n,t,r){var e,u,i,a,o,l=function(){var c=g.now()-a;t>c&&c>0?e=setTimeout(l,t-c):(e=null,r||(o=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,a=g.now();var c=r&&!e;return e||(e=setTimeout(l,t)),c&&(o=n.apply(i,u),i=u=null),o}},g.wrap=function(n,t){return g.partial(t,n)},g.negate=function(n){return function(){return!n.apply(this,arguments)}},g.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},g.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},g.before=function(n,t){var r;return function(){return--n>0?r=t.apply(this,arguments):t=null,r}},g.once=g.partial(g.before,2),g.keys=function(n){if(!g.isObject(n))return[];if(m)return m(n);var t=[];for(var r in n)g.has(n,r)&&t.push(r);return t},g.values=function(n){for(var t=g.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},g.pairs=function(n){for(var t=g.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},g.invert=function(n){for(var t={},r=g.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},g.functions=g.methods=function(n){var t=[];for(var r in n)g.isFunction(n[r])&&t.push(r);return t.sort()},g.extend=function(n){if(!g.isObject(n))return n;for(var t,r,e=1,u=arguments.length;u>e;e++){t=arguments[e];for(r in t)f.call(t,r)&&(n[r]=t[r])}return n},g.pick=function(n,t,r){var e,u={};if(null==n)return u;if(g.isFunction(t)){t=N(t,r);for(e in n){var i=n[e];t(i,e,n)&&(u[e]=i)}}else{var a=c.apply([],l.call(arguments,1));n=new Object(n);for(var o=0,s=a.length;s>o;o++)e=a[o],e in n&&(u[e]=n[e])}return u},g.omit=function(n,t,r){if(g.isFunction(t))t=g.negate(t);else{var e=g.map(c.apply([],l.call(arguments,1)),String);t=function(n,t){return!g.contains(e,t)}}return g.pick(n,t,r)},g.defaults=function(n){if(!g.isObject(n))return n;for(var t=1,r=arguments.length;r>t;t++){var e=arguments[t];for(var u in e)void 0===n[u]&&(n[u]=e[u])}return n},g.clone=function(n){return g.isObject(n)?g.isArray(n)?n.slice():g.extend({},n):n},g.tap=function(n,t){return t(n),n};var y=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof g&&(n=n._wrapped),t instanceof g&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]===n)return e[i]===t;var a=n.constructor,o=t.constructor;if(a!==o&&"constructor"in n&&"constructor"in t&&!(g.isFunction(a)&&a instanceof a&&g.isFunction(o)&&o instanceof o))return!1;r.push(n),e.push(t);var l,c;if("[object Array]"===u){if(l=n.length,c=l===t.length)for(;l--&&(c=y(n[l],t[l],r,e)););}else{var f,p=g.keys(n);if(l=p.length,c=g.keys(t).length===l)for(;l--&&(f=p[l],c=g.has(t,f)&&y(n[f],t[f],r,e)););}return r.pop(),e.pop(),c};g.isEqual=function(n,t){return y(n,t,[],[])},g.isEmpty=function(n){if(null==n)return!0;if(g.isArray(n)||g.isString(n)||g.isArguments(n))return 0===n.length;for(var t in n)if(g.has(n,t))return!1;return!0},g.isElement=function(n){return!(!n||1!==n.nodeType)},g.isArray=p||function(n){return"[object Array]"===s.call(n)},g.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},g.each(["Arguments","Function","String","Number","Date","RegExp"],function(n){g["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),g.isArguments(arguments)||(g.isArguments=function(n){return g.has(n,"callee")}),"function"!=typeof/./&&(g.isFunction=function(n){return"function"==typeof n||!1}),g.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},g.isNaN=function(n){return g.isNumber(n)&&n!==+n},g.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},g.isNull=function(n){return null===n},g.isUndefined=function(n){return void 0===n},g.has=function(n,t){return null!=n&&f.call(n,t)},g.noConflict=function(){return n._=e,this},g.identity=function(n){return n},g.constant=function(n){return function(){return n}},g.noop=function(){},g.property=function(n){return function(t){return t[n]}},g.matches=function(n){var t=g.pairs(n),r=t.length;return function(n){if(null==n)return!r;n=new Object(n);for(var e=0;r>e;e++){var u=t[e],i=u[0];if(u[1]!==n[i]||!(i in n))return!1}return!0}},g.times=function(n,t,r){var e=Array(Math.max(0,n));t=N(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},g.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},g.now=Date.now||function(){return(new Date).getTime()};var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},M=g.invert(O),U=function(n){var t=function(t){return n[t]},r="(?:"+g.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};g.escape=U(O),g.unescape=U(M),g.result=function(n,t){if(null==n)return void 0;var r=n[t];return g.isFunction(r)?n[t]():r};var _=0;g.uniqueId=function(n){var t=++_+"";return n?n+t:t},g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,b={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\u2028|\u2029/g,S=function(n){return"\\"+b[n]};g.template=function(n,t,r){!t&&r&&(t=r),t=g.defaults({},t,g.templateSettings);var e=RegExp([(t.escape||R).source,(t.interpolate||R).source,(t.evaluate||R).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,a,o){return i+=n.slice(u,o).replace(L,S),u=o+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":a&&(i+="';\n"+a+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var a=new Function(t.variable||"obj","_",i)}catch(o){throw o.source=i,o}var l=function(n){return a.call(this,n,g)},c=t.variable||"obj";return l.source="function("+c+"){\n"+i+"}",l},g.chain=function(n){var t=g(n);return t._chain=!0,t};var I=function(n){return this._chain?g(n).chain():n};g.mixin=function(n){g.each(g.functions(n),function(t){var r=g[t]=n[t];g.prototype[t]=function(){var n=[this._wrapped];return o.apply(n,arguments),I.call(this,r.apply(g,n))}})},g.mixin(g),g.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=u[n];g.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],I.call(this,r)}}),g.each(["concat","join","slice"],function(n){var t=u[n];g.prototype[n]=function(){return I.call(this,t.apply(this._wrapped,arguments))}}),g.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return g})}).call(this)},{}],4:[function(require,module,exports){var Runtime,Utils,functions,_;_=require("underscore"),functions=require("./functions"),Utils=require("./utils"),Runtime=function(){function Runtime(){this.setupGlobal(),this.setupFunctions()}return Runtime.defaultLocale="en_US",Runtime.defaultCurrencyCode="USD",Runtime.defaultCurrencySymbol="$",Runtime.defaultTimeZone="UTC",Runtime.prototype.global=null,Runtime.prototype.expressions=[],Runtime.prototype.form={},Runtime.prototype.values={},Runtime.prototype.customVariables={},Runtime.prototype.locale=Runtime.defaultLocale,Runtime.prototype.currencyCode=Runtime.defaultCurrencyCode,Runtime.prototype.currencySymbol=Runtime.defaultCurrencySymbol,Runtime.prototype.variables={},Runtime.prototype.results=[],Runtime.prototype.dataNames={},Runtime.prototype.elements=[],Runtime.prototype.elementsByKey={},Runtime.prototype.elementsByDataName={},Runtime.prototype.statusesByValue={},Runtime.prototype.featureIsNew=!0,Runtime.prototype.extraVariableNames=["locale","language","timeZone","decimalSeparator","groupingSeparator","currencySymbol","currencyCode","country","deviceIdentifier","deviceModel","deviceManufacturer","platform","platformVersion","application","applicationVersion","applicationBuild","recordStatus","recordSystemCreatedAt","recordSystemUpdatedAt","recordClientCreatedAt","recordClientUpdatedAt","recordProject","recordProjectName","recordGeometry","recordAltitude","recordVerticalAccuracy","recordHorizontalAccuracy","featureCreatedAt","featureUpdatedAt","featureGeometry"],Runtime.prototype.setupValues=function(){var n,t,r,e,u,i,a,o,l;u=this.variables={},e=this.dataNames;for(t in e)u["$"+e[t]]=null;for(t in this.values)i=this.values[t],n=this.elementsByKey[t],u["$"+this.dataNames[t]]=Utils.valueForElement(n,i);for(l=this.extraVariableNames,a=0,o=l.length;o>a;a++)r=l[a],u["$$"+r]=this[r];for(r in this.customVariables)u[""+r]=this.customVariables[r];return functions.CONFIGURE(this,!1)},Runtime.prototype.prepare=function(){return this.elements=Utils.flattenElements(this.form.elements),this.form.status_field&&this.form.status_field.choices&&_.each(this.form.status_field.choices,function(n){return function(t){return n.statusesByValue[t.value]=t.label}}(this)),_.each(this.elements,function(n){return function(t){return n.elementsByKey[t.key]=t,n.elementsByDataName[t.data_name]=t,n.dataNames[t.key]=t.data_name}}(this))},Runtime.prototype.evaluate=function(){return this.setupValues(),this.results=_.map(this.expressions,function(n){return function(t){return n.evaluateExpression(t)}}(this))},Runtime.prototype.evaluateExpression=function(context){var evalResult,ex,rawValue,stringValue,thisVariableName,variables;variables=this.variables,thisVariableName="$"+context.dataName;try{if(variables.$$current=$$runtime.$$currentValue=variables[thisVariableName],stringValue=rawValue=variables.$$result=void 0,context.expression&&context.expression.length>0){with(evalResult=void 0,variables)evalResult=eval(context.expression);rawValue=this.coalesce(variables.$$result,evalResult),stringValue=this.formatValue(rawValue),variables[thisVariableName]=_.isNumber(rawValue)||_.isDate(rawValue)?rawValue:stringValue}return this.createResult(context.key,rawValue,stringValue,null)}catch(_error){return ex=_error,console.log("JS ERROR : "+context.dataName+" : "+ex.toString()),variables[thisVariableName]=void 0,this.createResult(context.key,null,null,ex.toString())}},Runtime.prototype.coalesce=function(){return _.find(Utils.toArray(arguments),function(n){return!_.isUndefined(n)})},Runtime.prototype.createResult=function(n,t,r,e){return e?e=e.toString():_.isUndefined(t)?e="[Undefined]":_.isNaN(t)?e="[Not a Number]":_.isFunction(t)?e="[Function]":_.isArray(t)?e="[Array]":_.isDate(t)?e=null:_.isObject(t)&&(e="[Object]"),{key:n,value:r,error:e}},Runtime.prototype.formatValue=function(n){return _.isUndefined(n)?n=null:_.isNull(n)?n=null:_.isNumber(n)?n=n:_.isDate(n)?n=Utils.formatMachineDate(n):_.isArray(n)?n=n.map(this.formatValue).join(", "):_.isRegExp(n)?n=n.toString():_.isFunction(n)?n=null:_.isNaN(n)&&(n=null),n},Runtime.prototype.setupGlobal=function(){var n;this.global=void 0;try{this.global=Function("return this")()}catch(t){n=t,this.global=window}return this.global.$$runtime=this,this.global.$$prepare=this.prepare.bind(this),this.global.$$evaluate=this.evaluate.bind(this)},Runtime.prototype.setupFunctions=function(){var n,t;this.functions||(this.functions={}),t=[];for(n in functions)t.push(this.global[n]=this.functions[n]=functions[n]);return t},Runtime}(),module.exports=new Runtime},{"./functions":1,"./utils":5,underscore:3}],5:[function(n,t){var r,e,u,i,a;a=n("underscore"),i={},u={},e={},r=function(){function n(){}return n.DATE_REGEX=/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/,n.toArray=function(n){return Array.prototype.slice.call(n,0)},n.flattenElements=function(t,r){return null==r&&(r=!0),a.tap([],function(e){return a.each(t,function(t){var u,i;return e.push(t),i=!0,r||"Repeatable"!==t.type||(i=!1),i&&t.elements?(u=n.flattenElements(t.elements),Array.prototype.push.apply(e,u)):void 0})})},n.valueForElement=function(n,t){var r,e;return n.numeric||"number"===(null!=(e=n.display)?e.style:void 0)?Number(t):("DateTimeField"===n.type||"DateField"===n.type)&&t&&t.length<=10?(r=""+t.replace(/-/g,"/")+" 00:00:00",new Date(r)):t},n.repeatableValueElements=function(t){var r,a,o,l,c,s,f,p,m;if(f=t.key,i[f])return l={all:i[f],byKey:u[f],byDataName:e[f]};for(s=n.flattenElements(t.elements,!1),i[f]=r=s,u[f]=o={},e[f]=a={},p=0,m=s.length;m>p;p++)c=s[p],o[c.key]=c,a[c.data_name]=c;return{all:r,byKey:o,byDataName:a}},n.repeatableValues=function(t,r,e){var u,i,o;return a.isArray(r)?(u=n.repeatableValueElements(t).byDataName,(i=u[e])?o=a.map(r,function(t){return n.valueForElement(i,t.form_values[i.key])}):null):null},n.formatMachineDate=function(n){return null==n||isNaN(n.getTime())?null:""+RIGHT("000"+n.getFullYear(),4)+"-"+RIGHT("0"+(n.getMonth()+1),2)+"-"+RIGHT("0"+n.getDate(),2)},n}(),t.exports=r},{underscore:3}]},{},[4]);