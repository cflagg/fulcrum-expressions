(function e(t,n,r){function i(a,l){if(!n[a]){if(!t[a]){var o=typeof require=="function"&&require;if(!l&&o)return o(a,!0);if(u)return u(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[a]={exports:{}};t[a][0].call(f.exports,function(e){var n=t[a][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[a].exports}var u=typeof require=="function"&&require;for(var a=0;a<r.length;a++)i(r[a]);return i})({1:[function(e,t,n){var r,i,u,a,l,o,s,f,n,c,m,p,g,h,N,v,E,d,y,A=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++){if(t in this&&this[t]===e)return t}return-1};y=e("underscore");y.str=e("underscore.string");y.mixin(y.str.exports());v=e("object-inspect");E=e("query-string");f=e("./utils");d=f.toArray;a={locale:"en_US",language:"en-US",country:"US",currencyCode:"USD",currencySymbol:"$",timeZone:"UTC",decimalSeparator:".",groupingSeparator:",",groupingSize:3};u=y.extend({},a);n={};n.NO_VALUE=void 0;n.ERROR=function(e){throw new Error(e)};n.MATH_FUNC=s=function(e){return function(){return e.apply(Math,d(arguments).map(NUM))}};n.ABS=s(Math.abs);n.ACOS=s(Math.acos);n.ACOSH=function(e){e=NUM(e);return Math.log(e+Math.sqrt(e*e-1))};n.ALERT=function(){var e,t,n;n=null;e=arguments[0];if(arguments.length>1){n=arguments[0];e=arguments[1]}t={type:"message",title:n!=null?n.toString():null,message:e!=null?e.toString():null};return $$runtime.results.push(t)};n.AND=function(){return y.find(d(arguments),function(e){return!e})===void 0};n.APPLICATION=function(){var e;return(e=u.application)!=null?e:""};n.APPLICATIONBUILD=function(){var e;return(e=u.applicationBuild)!=null?e:""};n.APPLICATIONINFO=function(e){if(e==null){e=", "}return y.compact([APPLICATION(),APPLICATIONVERSION(),APPLICATIONBUILD()]).join(e)};n.APPLICATIONVERSION=function(){var e;return(e=u.applicationVersion)!=null?e:""};n.AVERAGE=function(){var e;e=d(arguments);if(e.length===0){return NaN}return y.inject(e,function(e,t){return e+ +t},0)/e.length};n.CEILING=function(e,t){var n;if(t==null){t=1}if(t==null){t=1}t=ABS(t);e=NUM(e);if(isNaN(e)||isNaN(t)){return NaN}if(t===0){return 0}n=PRECISION(t);if(e>=0){return ROUND(Math.ceil(e/t)*t,n)}else{return-ROUND(Math.floor(Math.abs(e)/t)*t,n)}};n.CHAR=function(e){e=NUM(e);return String.fromCharCode(e)};n.CHOICEVALUE=function(e){var t;t=CHOICEVALUES(e);if(!y.isArray(t)){return NO_VALUE}if(t.length===0){return NO_VALUE}return t[0]};n.CHOICEVALUES=function(e){var t;if(!((e!=null?e.choice_values:void 0)!=null||(e!=null?e.other_values:void 0)!=null)){return NO_VALUE}if(ISBLANK(e)){return[]}t=[].concat(e.choice_values).concat(e.other_values);return y.compact(t)};r=/[\x00\x08\x0B\x0C\x0E-\x1F]/g;n.CLEAN=function(e){if(e==null){e=""}return e.replace(r,"")};n.COALESCE=function(){var e;if(arguments.length===1&&y.isArray(arguments[0])){return COALESCE.apply(null,arguments[0])}else{return(e=y.find(d(arguments),function(e){return e!=null}))!=null?e:NO_VALUE}};n.CODE=function(e){if(y.isNumber(e)){e=e.toString()}if(!y.isString(e)){return NaN}return(e!=null?e:"").charCodeAt(0)};n.COMPACT=function(e){if(!y.isArray(e)){return void 0}return y.filter(e,function(e){return e!=null})};n.CONCATENATE=function(){var e;e=y.map(d(arguments),function(e){switch(true){case y.isString(e):return e;case y.isNumber(e):return""+e;default:return""}});return e.join("")};n.CONFIG=function(){return u};n.CONFIGURE=function(e,t){if(t==null){t=true}if(t){y.extend(u,e)}else{u=e}return u};n.COS=s(Math.cos);n.COSH=function(e){var t;e=NUM(e);t=Math.exp(e);return(t+1/t)/2};n.COUNT=function(e){var t;if(!y.isArray(e)){return NO_VALUE}t=y.select(COMPACT(e).map(NUM),function(e){return!isNaN(e)});return t.length};n.COUNTA=function(e){if(!y.isArray(e)){return NO_VALUE}return e.length};n.COUNTBLANK=function(e){var t;if(!y.isArray(e)){return NaN}t=y.filter(e,function(e){switch(true){case e==null:return true;case y.isArray(e):return e.length===0;case y.isString(e):return y.isBlank(e);default:return false}});return t.length};n.COUNTRY=function(){return u.country||a.country};n.CURRENCYCODE=function(){return u.currencyCode||a.currencyCode};n.CURRENCYSYMBOL=function(){return u.currencySymbol||a.currencySymbol};n.DATE=function(e,t,n){e=INT(e);t=INT(t);n=INT(n);if(isNaN(e)||isNaN(t)||isNaN(n)){return NO_VALUE}return new Date(""+e+"/"+t+"/"+n+" 00:00:00")};n.DATEADD=function(e,t,n){var r;if(n==null){n="day"}e=DATEVALUE(e);t=INT(t);if(e==null){return NO_VALUE}if(isNaN(t)){return NO_VALUE}if(n!=="day"){return NO_VALUE}r=e.getTime();r+=t*(1e3*60*60*24);return new Date(r)};n.DATEVALUE=function(e){var t;if(y.isDate(e)){return e}if(y.isString(e)&&e.length<=10){e=e.replace(/-/g,"/")}t=new Date(e);if(isNaN(t.getTime())){return NO_VALUE}return t};n.DAY=function(e){e=DATEVALUE(e);if(e==null){return NO_VALUE}return e.getDate()};n.DECIMALSEPARATOR=function(){return u.decimalSeparator||a.decimalSeparator};n.DEGREES=function(e){e=NUM(e);if(!y.isNumber(e)){return NaN}return 180*e/Math.PI};n.DEVICEINFO=function(e){if(e==null){e=", "}return y.compact([DEVICEMANUFACTURER(),DEVICEMODEL()]).join(e)};n.DEVICEMODEL=function(){var e;return(e=u.deviceModel)!=null?e:""};n.DEVICEMANUFACTURER=function(){var e;return(e=u.deviceManufacturer)!=null?e:""};n.DOLLAR=function(e,t,n,r){var i;if(t==null){t=2}if(n==null){n=null}if(r==null){r=null}t=NUM(t);if(t==null){t=2}if(isNaN(t)){t=2}e=NUM(e);if(!y.isNumber(e)){return NO_VALUE}if(n==null){n=CURRENCYCODE()}if(r==null){r=LANGUAGE()}i={style:"currency",currency:n,minimumFractionDigits:t,maximumFractionDigits:t};return FORMATNUMBER(e,r,i)};n.EMAIL=function(){var e;return(e=CONFIG().userEmail)!=null?e:NO_VALUE};n.EVEN=function(e){e=NUM(e);if(!y.isNumber(e)){return NaN}return CEILING(e,-2,-1)};n.EXACT=function(e,t){return y.isEqual(e,t)};n.EXP=s(Math.exp);n.FIELD=function(e){var t;t=$$runtime.elementsByDataName[e];if(!t){return NO_VALUE}return t};n.MEMOIZED_FACT=[];n.FACT=function(e){var t;e=NUM(e);if(isNaN(e)){return NaN}if(e<0){return NaN}t=Math.floor(e);if(t===0||t===1){return 1}else if(MEMOIZED_FACT[t]>0){return MEMOIZED_FACT[t]}else{MEMOIZED_FACT[t]=FACT(t-1)*t;return MEMOIZED_FACT[t]}};n.MEMOIZED_FACTDOUBLE=[];n.FACTDOUBLE=function(e){var t;e=NUM(e);if(isNaN(e)){return NaN}if(e<0){return NaN}t=Math.floor(e);if(t<=1){return 1}else if(MEMOIZED_FACTDOUBLE[t]>0){return MEMOIZED_FACTDOUBLE[t]}else{MEMOIZED_FACTDOUBLE[t]=FACTDOUBLE(t-2)*t;return MEMOIZED_FACTDOUBLE[t]}};n.FALSE=function(){return false};n.FIND=function(e,t,n){var r;n=NUM(n);if(isNaN(n)){n=0}if(!(t&&t.indexOf)){return NO_VALUE}if(y.isArray(e)){return NO_VALUE}r=t.indexOf(e,n-1);if(r<0){return NO_VALUE}return r+1};n.FIXED=function(e,t,n){var r,i,u,a,l,o,s,f,c,m,p,g,h,N;if(t==null){t=2}if(n==null){n=false}e=NUM(e);t=NUM(t);if(isNaN(t)){t=2}t=MAX(t,0);t=MIN(t,20);if(isNaN(e)){return NO_VALUE}if(isNaN(t)){return NO_VALUE}n=!!n;p=Math.pow(10,t);g=parseInt(e*p);f=".";c=e.toFixed(t);l=c.indexOf(f);if(!(l>-1)){return c}o=parseInt(c.substring(0,l));r=c.substring(l+1,c.length);s="";a=GROUPINGSIZE();i=Math.pow(10,a);if(n||o<i){s=o.toString()}else{u=GROUPINGSEPARATOR();m=[];while(o>=i){h=Math.floor(o%i);N=new Array(a+1).join("0");m.push(RIGHT(N+h.toString(),a));o=Math.floor(o/i)}if(o>0){m.push(o.toString())}s=m.reverse().join(u)}if(t<1){return s}else{return s+DECIMALSEPARATOR()+r.toString()}};n.FLOOR=function(e,t){var n;if(t==null){t=1}t=ABS(t);e=NUM(e);if(isNaN(e)||isNaN(t)){return NaN}if(t===0){return 0}n=PRECISION(t);if(e>=0){return ROUND(Math.floor(e/t)*t,n)}else{return-ROUND(Math.ceil(Math.abs(e)/t)*t,n)}};n.FORMATNUMBER=function(e,t,n){var r,i;if(e==null){e=NUM(e)}if(t==null){t=LANGUAGE()}if(n==null){n={}}i="decimal";if(n.style==="currency"){i="currency"}if(n.style==="percent"){i="percent"}n.style=i;if(n.style==="currency"){if(n.currency==null){n.currency=CURRENCYCODE()}}r=y.isNumber(n.minimumSignificantDigits)||y.isNumber(n.maximumSignificantDigits);if(r){if(n.minimumSignificantDigits==null){n.minimumSignificantDigits=1}n.minimumSignificantDigits=NUM(n.minimumSignificantDigits);n.minimumSignificantDigits=MIN(MAX(n.minimumSignificantDigits,1),21);if(n.maximumSignificantDigits==null){n.maximumSignificantDigits=n.minimumSignificantDigits}n.maximumSignificantDigits=NUM(n.maximumSignificantDigits);n.maximumSignificantDigits=MIN(MAX(n.maximumSignificantDigits,1),21)}else{if(n.minimumIntegerDigits==null){n.minimumIntegerDigits=1}n.minimumIntegerDigits=NUM(n.minimumIntegerDigits);n.minimumIntegerDigits=MIN(MAX(n.minimumIntegerDigits,1),21);if(n.minimumFractionDigits==null){n.minimumFractionDigits=n.style==="currency"?2:0}n.minimumFractionDigits=NUM(n.minimumFractionDigits);n.minimumFractionDigits=MIN(MAX(n.minimumFractionDigits,0),20);if(n.style==="currency"){if(n.maximumFractionDigits==null){n.maximumFractionDigits=2}}else if(n.style==="percent"){if(n.maximumFractionDigits==null){n.maximumFractionDigits=MAX(n.minimumFractionDigits,0)}}else{if(n.maximumFractionDigits==null){n.maximumFractionDigits=MAX(n.minimumFractionDigits,3)}}n.maximumFractionDigits=NUM(n.maximumFractionDigits);n.maximumFractionDigits=MIN(MAX(n.maximumFractionDigits,0),20)}if(!y.isBoolean(n.useGrouping)){n.useGrouping=true}return o.formatNumber(e,t,n)};n.GCD=function(){var e,t,n,r,i,u,a;r=d(arguments).map(NUM);e=r.length;if(r.length===0){return NaN}if(r[0]<0){return NaN}i=r[0];for(t=u=1,a=e-1;1<=a?u<=a:u>=a;t=1<=a?++u:--u){if(r[t]<0){return NaN}n=r[t];while(i&&n){if(i>n){i%=n}else{n%=i}}i+=n}return i};n.GETRESULT=function(){return $$runtime.$$result};n.GETURL=function(e,t){return REQUEST(e,t)};n.REQUEST=function(e,t){var n;if(!y.isFunction(t)){return t(new Error("callback must be provided"))}if(y.isString(e)){e={url:e}}if(e.method==null){e.method="GET"}if(e.headers==null){e.headers={}}if(e.followRedirect==null){e.followRedirect=true}if(!y.isString(e.url)){return NO_VALUE}if(y.isObject(e.qs)){n=E.stringify(e.qs);if(e.url.indexOf("?")<0){n="?"+n}e.url+=n}if(e.json!=null){e.headers["Content-Type"]="application/json";if(!y.isString(e.json)){e.body=JSON.stringify(e.json)}}if(!y.isString(e.method)){e.method="GET"}if(!y.isObject(e.headers)){e.headers={}}if(!y.isString(e.body)){e.body=null}e.followRedirect=!!e.followRedirect;return o.httpRequest(JSON.stringify(e),t)};n.GROUPINGSEPARATOR=function(){return u.groupingSeparator||a.groupingSeparator};n.GROUPINGSIZE=function(){return u.groupingSize||a.groupingSize};n.HASOTHER=function(e){return!!(e&&e.other_values&&y.isArray(e.other_values)&&e.other_values.length>0)};n.IF=function(e,t,n){if(e){return t}else{return n}};n.IFERROR=function(e,t){if(ISERR(e)){return t}else{return e}};n.INSPECT=function(e){return v(e)};n.INT=n.FLOOR;n.INVALID=function(){var e,t,n,r;t=null;n=null;if(arguments.length>1){e=FIELD(arguments[0]);t=(e!=null?e.key:void 0)||arguments[0].toString();n=arguments[1].toString()}else if(arguments.length===1){n=arguments[0].toString()}r={type:"validation",key:t,message:n};return $$runtime.results.push(r)};n.ISBLANK=function(e){var t,n,r,i,u;if(e==null){return true}if(y.isNaN(e)){return true}if(y.isBoolean(e)){return false}if(y.isNumber(e)){return false}if(y.isDate(e)){return false}if(y.isString(e)){return y.isBlank(e)}if(y.isArray(e)){return e.length===0}if(e&&(e.choice_values||e.choice_values===null||e.other_values||e.other_values===null)){t=e.choice_values;u=e.other_values;n=y.isArray(t)&&t.length>0;i=y.isArray(u)&&u.length>0;r=n||i;return!r}return Object.keys(e).length===0};n.ISERR=function(e){if(e==null){return true}if(isNaN(e)){return true}if(e instanceof Error){return true}return false};n.ISERROR=function(e){return ISERR(e)};n.ISLOGICAL=function(e){return y.isBoolean(e)};n.ISNAN=function(e){return y.isNaN(NUM(e))};n.ISEVEN=function(e){e=NUM(e);if(!y.isNumber(e)){return false}if(isNaN(e)){return false}return(Math.floor(Math.abs(e))&1)===0};n.ISNONTEXT=function(e){return!y.isString(e)};n.ISNUMBER=function(e){return y.isNumber(e)};n.ISODD=function(e){e=NUM(e);if(!y.isNumber(e)){return false}if(isNaN(e)){return false}return(Math.floor(Math.abs(e))&1)===1};n.ISSELECTED=function(e,t){if(ISBLANK(e)){return false}if(t==null){return false}if(y.isArray(t)){return t.filter(function(t){return!ISSELECTED(e,t)}).length===0}if(e&&e.choice_values){if(y.contains(e.choice_values,t)){return true}}if(e&&e.other_values){if(y.contains(e.other_values,t)){return true}}return false};n.ISTEXT=function(e){return y.isString(e)};n.LANGUAGE=function(){return u.language||a.language};n.LATITUDE=function(){var e;return NUM((e=CONFIG().featureGeometry)!=null?e.coordinates[1]:void 0)};n.LCM=function(){var e,t,n,r,i,u,a,l;u=d(arguments).map(function(e){return INT(e)});r=u.length;e=Math.abs(u[0]);for(i=a=1,l=r-1;a<=l;i=a+=1){t=Math.abs(u[i]);n=e;if(isNaN(t)){return NaN}while(e&&t){if(e>t){e%=t}else{t%=e}}e=Math.abs(n*u[i])/(e+t)}return e};n.LEFT=function(e,t){if(t==null){t=1}if(t==null){t=1}t=FLOOR(t);if(e==null){return NO_VALUE}if(y.isObject(e)){return NO_VALUE}if(t<0){return NO_VALUE}if(isNaN(t)){return NO_VALUE}e=e.toString();return e.substring(0,t)};n.LEN=function(e){if(e==null){return NO_VALUE}if(y.isObject(e)){return NO_VALUE}return e.toString().length};n.LN=s(Math.log);n.LOCALE=function(){return u.locale||a.locale};n.LOG=function(e,t){e=NUM(e);t=NUM(t!=null?t:10);if(t==null){return NaN}if(isNaN(t)){return NaN}return Math.log(e)/Math.log(t)};n.LOG10=function(e){return LOG(e,10)};n.LONGITUDE=function(){var e;return NUM((e=CONFIG().featureGeometry)!=null?e.coordinates[0]:void 0)};n.LOWER=function(e){if(e==null){return NO_VALUE}if(y.isArray(e)){return NO_VALUE}if(y.isObject(e)){return NO_VALUE}return e.toString().toLowerCase()};n.MAX=function(){var e,t;t=y.flatten(d(arguments));t=y.map(t,NUM);if(t.length===0){return NO_VALUE}e=y.some(t,isNaN);if(e){return NO_VALUE}return Math.max.apply(Math,t)};n.MAXA=function(){if(arguments.length<1){return NO_VALUE}if(!y.isArray(arguments[0])){return NO_VALUE}return MAX.apply(null,arguments[0])};n.MEDIAN=function(){var e,t,n;n=y.flatten(d(arguments));n=y.map(n,NUM);if(!y.isArray(n)){return NO_VALUE}if(n.length===0){return NO_VALUE}t=y.some(n,isNaN);if(t){return NO_VALUE}n.sort(function(e,t){return e-t});e=Math.floor(n.length/2);if(n.length%2){return n[e]}else{return(n[e-1]+n[e])/2}};n.MID=function(e,t,n){t=FLOOR(t);n=FLOOR(n);if(e==null){return NO_VALUE}if(y.isObject(e)){return NO_VALUE}if(t<1){return NO_VALUE}if(isNaN(t)){return NO_VALUE}if(n<0){return NO_VALUE}if(isNaN(n)){return NO_VALUE}e=e.toString();return e.substr(t-1,n)};n.MIN=function(){var e,t;t=y.flatten(d(arguments));t=y.map(t,NUM);if(t.length===0){return NO_VALUE}e=y.some(t,isNaN);if(e){return NO_VALUE}return Math.min.apply(Math,t)};n.MINA=function(){if(arguments.length<1){return NO_VALUE}if(!y.isArray(arguments[0])){return NO_VALUE}return MIN.apply(null,arguments[0])};n.MOD=function(e,t){var n;e=NUM(e);t=NUM(t);if(isNaN(e)){return NaN}if(isNaN(t)){return NaN}if(t===0){return NaN}n=Math.abs(e%t);if(t>0){return n}else{return-n}};n.MONTH=function(e){e=DATEVALUE(e);if(e==null){return NO_VALUE}return e.getMonth()+1};n.N=function(e){if(y.isNumber(e)){return e}if(e===true){return 1}if(e===false){return 0}return 0};n.NOT=function(e){return!(e!=null?e:false)};n.NUM=function(e){if(isNaN(e)){return NaN}return parseFloat(e)};n.NUMS=function(){return d(arguments).map(NUM)};n.ODD=function(e){var t;e=NUM(e);if(!y.isNumber(e)){return NaN}t=Math.ceil(Math.abs(e));t=t&1?t:t+1;if(e>=0){return t}else{return-t}};n.OFF=function(){var e,t,n,r;e=arguments;if(arguments.length===3){n=arguments[0],r=arguments[1],t=arguments[2]}if(arguments.length===2){r=arguments[0],t=arguments[1]}if(n==null){n="on"}if(!y.isString(n)){ERROR("name must be a string")}if(!y.isString(r)){ERROR("param must be a string")}if(t!=null&&!y.isFunction(t)){ERROR("callback must be a function")}return $$runtime.removeHook(n,r,t)};n.ON=function(){var e,t,n,r;e=arguments;if(arguments.length===3){n=arguments[0],r=arguments[1],t=arguments[2]}if(arguments.length===2){r=arguments[0],t=arguments[1]}if(n==null){n="on"}if(!y.isString(n)){ERROR("name must be a string")}if(!y.isString(r)){ERROR("param must be a string")}if(!y.isFunction(t)){ERROR("callback must be a function")}return $$runtime.addHook(n,r,t)};n.ONCE=function(e){var t;return(t=$$runtime.$$currentValue)!=null?t:e};n.OPENURL=function(e){if(!y.isString(e)){return NO_VALUE}return $$runtime.results.push({type:"open",value:JSON.stringify(e)})};n.OR=function(){return y.find(d(arguments),function(e){return e})!==void 0};n.OTHER=function(e){if(!HASOTHER(e)){return NO_VALUE}if(ISBLANK(e.other_values)){return NO_VALUE}return e.other_values[0]};n.PI=function(){return Math.PI};n.PLATFORM=function(){var e;return(e=u.platform)!=null?e:""};n.PLATFORMINFO=function(e){if(e==null){e=", "}return y.compact([PLATFORM(),PLATFORMVERSION()]).join(e)};n.PLATFORMVERSION=function(){var e;return(e=u.platformVersion)!=null?e:""};n.POWER=function(e,t){e=NUM(e);t=NUM(t);if(isNaN(e)){return NaN}if(isNaN(t)){return NaN}return Math.pow(e,t)};n.PRECISION=function(e){var t;e=NUM(e);if(ISNAN(e)){return NaN}t=(e+"").split(".");if(t.length<2){return 0}return t[1].length};n.PRODUCT=function(){var e,t;t=d(arguments).map(NUM);if(t.length===0){return NaN}e=y.some(t,isNaN);if(e){return NaN}return y.inject(t,function(e,t){return e*=t},1)};n.PROPER=function(e){if(e==null){return NO_VALUE}if(y.isArray(e)){return NO_VALUE}if(y.isObject(e)){return NO_VALUE}return y.titleize(e.toString())};n.QUOTIENT=function(e,t){e=NUM(e);t=NUM(t);if(isNaN(e)){return NaN}if(isNaN(t)){return NaN}if(t===0){return NaN}return parseInt(e/t,10)};n.RADIANS=function(e){e=NUM(e);return e/180*Math.PI};n.RAND=function(){return Math.random()};n.RANDBETWEEN=function(e,t){e=NUM(e);t=NUM(t);if(isNaN(e)){return NaN}if(isNaN(t)){return NaN}return e+Math.ceil((t-e+1)*Math.random())-1};n.RECORDID=function(){var e;return(e=CONFIG().recordID)!=null?e:NO_VALUE};n.REPEATABLEID=function(){var e;return(e=CONFIG().featureID)!=null?e:NO_VALUE};n.REPEATABLENUMBER=function(){if(CONFIG().featureIndex==null){return NO_VALUE}return CONFIG().featureIndex+1};n.REPEATABLEVALUES=function(e,t){var n,r;n=$$runtime.elementsByDataName[t];if(!n){return NO_VALUE}r=f.nearestRepeatable(n);if(!r){return NO_VALUE}return f.repeatableValues(r,e,t)};n.REPEATABLESUM=function(e,t){return SUM.apply(null,y.reject(REPEATABLEVALUES(e,t),isNaN))};n.REPLACE=function(e,t,n,r){var i,u;t=FLOOR(t);n=FLOOR(n);if(e==null){return NO_VALUE}if(arguments.length<4){return NO_VALUE}if(y.isObject(e)){return NO_VALUE}if(t<1){return NO_VALUE}if(isNaN(t)){return NO_VALUE}if(n<0){return NO_VALUE}if(isNaN(n)){return NO_VALUE}e=e.toString();i=e.substr(0,t-1);u=e.substr(t-1+n);return i+r+u};n.RESETCONFIG=function(){return u=y.extend({},a)};n.RIGHT=function(e,t){if(t==null){t=1}t=FLOOR(t);if(e==null){return NO_VALUE}if(y.isObject(e)){return NO_VALUE}if(t<0){return NO_VALUE}if(isNaN(t)){return NO_VALUE}e=e.toString();return e.substring(e.length-t)};n.ROLE=function(){var e;return(e=CONFIG().userRoleName)!=null?e:NO_VALUE};n.ROUND=function(e,t){if(t==null){t=0}e=NUM(e);t=NUM(t);return Math.round(e*Math.pow(10,t))/Math.pow(10,t)};n.ROUNDDOWN=function(e,t){var n;if(t==null){t=0}e=NUM(e);t=NUM(t);n=e>0?1:-1;return n*Math.floor(Math.abs(e)*Math.pow(10,t))/Math.pow(10,t)};n.ROUNDUP=function(e,t){var n;if(t==null){t=0}e=NUM(e);t=NUM(t);n=e>0?1:-1;return n*Math.ceil(Math.abs(e)*Math.pow(10,t))/Math.pow(10,t)};n.SEARCH=function(e,t,n){var r;if(n==null){n=1}n=NUM(n);if(isNaN(n)){n=1}if(y.isNumber(t)){t=t.toString()}if(y.isNumber(e)){e=e.toString()}if(!y.isString(e)){return NO_VALUE}if(!y.isString(t)){return NO_VALUE}if(e===""){return 1}r=t.toLowerCase().indexOf(e.toLowerCase(),n-1);if(r<0){return NO_VALUE}return r+1};n.SETCHOICEFILTER=function(e,t){return SETFORMATTRIBUTES(e,{choice_filter:t!=null?t:null})};n.SETCHOICES=function(e,t){var n,r,i,u;if(!(t===null||y.isArray(t))){return NO_VALUE}r=null;if(t){r=[];for(i=0,u=t.length;i<u;i++){n=t[i];switch(true){case y.isString(n):r.push({label:n,value:n});break;case y.isNumber(n):r.push({label:n.toString(),value:n.toString()});break;case y.isArray(n):if(n.length>1){r.push({label:n[0],value:n[1]})}else if(n.length===1){r.push({label:n[0],value:n[0]})}break;case y.isObject(n):r.push({label:n.label,value:n.value||n.label})}}}return SETFORMATTRIBUTES(e,{choices:r})};i=["auto_populate_location","auto_populate_minimum_accuracy","photo_quality","video_quality","allow_photo_gallery","allow_video_gallery","allow_draft_records","allow_manual_location","warn_on_location_accuracy","title"];n.SETCONFIGURATION=function(e){var t,n,r,u;u=[];for(t in e){r=e[t];if(!y.contains(i,t)){continue}r=r!=null?JSON.stringify(r):null;n={type:"configure",attribute:t.toString(),value:r};u.push($$runtime.results.push(n))}return u};n.SETDESCRIPTION=function(e,t){return SETFORMATTRIBUTES(e,{description:t!=null?t.toString():null})};n.SETDISABLED=function(e,t){return SETFORMATTRIBUTES(e,{disabled:t!=null?!!t:null})};n.SETHIDDEN=function(e,t){return SETFORMATTRIBUTES(e,{hidden:t!=null?!!t:null})};n.SETLABEL=function(e,t){return SETFORMATTRIBUTES(e,{label:t!=null?t.toString():null})};n.SETMAXLENGTH=function(e,t){return SETFORMATTRIBUTES(e,{max_length:t!=null?+t:null})};n.SETMINLENGTH=function(e,t){return SETFORMATTRIBUTES(e,{min_length:t!=null?+t:null})};n.SETREQUIRED=function(e,t){return SETFORMATTRIBUTES(e,{required:t!=null?!!t:null})};n.SETRESULT=function(e){return $$runtime.$$result=e};n.SETTIMEOUT=function(e,t){return o.setTimeout(e,t)};n.CLEARTIMEOUT=function(e){return o.clearTimeout(e)};n.SETINTERVAL=function(e,t){return o.setInterval(e,t)};n.CLEARINTERVAL=function(e){return o.clearInterval(e)};n.SETVALUE=function(e,t){var n,r;n=FIELD(e);r={type:"set-value",key:(n!=null?n.key:void 0)||e,value:JSON.stringify(t)};return $$runtime.results.push(r)};l=["label","description","required","hidden","disabled","min_length","max_length","choices","choice_filter"];n.SETFORMATTRIBUTES=function(e,t){var n,r,i,u,a;r=FIELD(e);if(!r){return NO_VALUE}a=[];for(n in t){u=t[n];if(!y.contains(l,n)){continue}u=u!=null?JSON.stringify(u):null;i={type:"update-element",key:r.key,attribute:n.toString(),value:u};a.push($$runtime.results.push(i))}return a};n.SHOWERRORS=function(e){if(e==null){e=true}return $$runtime.showErrors=e};n.SIGN=function(e){e=NUM(e);if(isNaN(e)){return NaN}switch(true){case e>0:return 1;case e<0:return-1;case e===0:return 0}};n.SIN=s(Math.sin);n.SINH=function(e){var t;e=NUM(e);t=Math.exp(e);return(t-1/t)/2};n.SQRT=s(Math.sqrt);n.SQRTPI=function(e){return SQRT(NUM(e)*Math.PI)};n.STATUS=function(){var e;return(e=CONFIG().recordStatus)!=null?e:NO_VALUE};n.STATUSLABEL=function(){var e,t,n;e=(t=CONFIG().recordStatus)!=null?t:NO_VALUE;if(e){return(n=$$runtime.statusesByValue[e])!=null?n:NO_VALUE}else{return NO_VALUE}};h={};N="default";Object.defineProperty(h,"length",{get:function(){return c.storageLength(N)},configurable:false,enumerable:false});h.key=function(e){if(!y.isNumber(+e)){return null}return c.storageKey(N,+e)};h.getItem=function(e){if(e==null){return null}return c.storageGetItem(N,e.toString())};h.setItem=function(e,t){if(e==null){return null}return c.storageSetItem(N,e.toString(),t!=null?t.toString():null)};h.removeItem=function(e){if(e==null){return null}return c.storageRemoveItem(N,e.toString())};h.clear=function(){return c.storageClear(N)};n.STORAGE=function(e){return typeof localStorage!=="undefined"&&localStorage!==null?localStorage:h};n.SUBSTITUTE=function(e,t,n,r){var i,u,a,l,o;r=FLOOR(r);if(arguments.length<3){return NO_VALUE}if(r<0){return NO_VALUE}a=!e||!y.isString(t)||!y.isString(n);if(a){return NO_VALUE}if(y.isArray(e)){return e}if(e.indexOf(t)<0){return e}e=e.toString();t=t.toString();n=n.toString();if(isNaN(r)){return e.replace(new RegExp(t,"g"),n)}else{u=e.indexOf(t,u);i=1;while(u>=0){if(i===r){l=e.substring(0,u);o=e.substring(u+t.length);return l+n+o}u=e.indexOf(t,u+1);i++}return e}};n.SUM=function(){var e,t;t=d(arguments).map(NUM);if(t.length===0){return NaN}e=y.some(t,isNaN);if(e){return NaN}return y.inject(t,function(e,t){return e+=t},0)};n.SUMSQ=function(){var e,t;t=d(arguments).map(NUM);if(t.length===0){return NaN}e=y.some(t,isNaN);if(e){return NaN}return y.inject(t,function(e,t){return e+=t*t},0)};n.T=function(e){if(e==null){return""}return e.toString()};n.TIMEDIFF=function(e,t,n){var r,i,u,a,l,o,s,f,c;if(n==null){n="hours"}if(!(y.isString(e)&&y.isString(t))){return NO_VALUE}if(!y.contains(["hours","minutes"],n)){return NO_VALUE}if(e.length!==5){return NO_VALUE}if(e[2]!==":"){return NO_VALUE}if(t.length!==5){return NO_VALUE}if(t[2]!==":"){return NO_VALUE}s=e.split(":");f=t.split(":");r=NUM(s[0]);i=NUM(s[1]);a=NUM(f[0]);l=NUM(f[1]);if(r>23||r<0){return NO_VALUE}if(a>23||a<0){return NO_VALUE}if(i>59||i<0){return NO_VALUE}if(l>59||l<0){return NO_VALUE}u=r*60+i;o=a*60+l;c=o-u;c=c===0?1440:c>0?c:1440+c;if(n==="hours"){return c/60}else{return c}};n.TIMEZONE=function(){return u.timeZone||a.timeZone};n.TRIM=function(e){return y.trim(e)};n.TRUE=function(e){return true};n.TYPEOF=function(e){switch(true){case y.isUndefined(e):return"undefined";case y.isNull(e):return"null";case y.isNaN(e):return"nan";case y.isNumber(e):return"number";case y.isString(e):return"string";case y.isBoolean(e):return"boolean";case y.isDate(e):return"date";case y.isArray(e):return"array";case y.isRegExp(e):return"regexp";case y.isFunction(e):return"function";case y.isObject(e):return"object";default:return"unknown"}};n.UPPER=function(e){if(e==null){return NO_VALUE}if(y.isArray(e)){return NO_VALUE}if(y.isObject(e)){return NO_VALUE}return e.toString().toUpperCase()};n.USERFULLNAME=function(){var e;return(e=CONFIG().userFullName)!=null?e:NO_VALUE};n.VERSIONINFO=function(e){if(e==null){e=", "}return y.compact([DEVICEINFO(" "),PLATFORMINFO(" "),APPLICATIONINFO(" ")]).join(e)};n.YEAR=function(e){e=DATEVALUE(e);if(e==null){return NO_VALUE}return e.getFullYear()};n.X_ISNEW=function(){return CONFIG().featureIsNew===true};n.X_ISUPDATE=function(){return!X_ISNEW()};g=function(e){return y.isFunction($$runtime["$$"+e])};p=function(e,t){return $$runtime["$$"+e].apply($$runtime,t)};m=function(e,t,n){return $$runtime.invokeAsync($$runtime["$$"+e],t,n)};o=c={};c.formatNumber=function(e,t,n){var r;if(g("formatNumber")){return p("formatNumber",arguments)}else if(typeof Intl!=="undefined"){r=new Intl.NumberFormat(t,n);return r.format(e)}else{return""+e}};c.httpRequest=function(e,t){var n;n=[e];if(g("httpRequest")){return m("httpRequest",n,t)}else{return t(new Error("Not Supported"),null,null)}};c.timeouts={};c.intervals={};c.nextTimeoutID=0;c.nextIntervalID=0;c.clearTimeout=function(e){return delete c.timeouts[e]};c.setTimeout=function(e,t){var n,r,i;n=[t];if(typeof setTimeout!=="undefined"&&setTimeout!==null){return setTimeout(e,t)}else if(g("setTimeout")){r=++c.nextTimeoutID;i=c.timeouts[r]=function(){if(c.timeouts[r]!=null){delete c.timeouts[r];return e()}};m("setTimeout",n,c.timeouts[r]);return r}};c.clearInterval=function(e){if(c.intervals[e]!=null){c.clearTimeout(c.intervals[e]);return delete c.intervals[e]}};c.setInterval=function(e,t){var n,r;if(typeof setInterval!=="undefined"&&setInterval!==null){return setInterval(e,t)}else if(g("setTimeout")){n=++c.nextIntervalID;r=function(){if(c.intervals[n]!=null){c.intervals[n]=c.setTimeout(r,t);return e()}};c.intervals[n]=c.setTimeout(r,t);return n}};c.storageLength=function(e){if(A.call(e,"length")>=0){return e.length}if(g("storageLength")){return p("storageLength",arguments)}};c.storageKey=function(e,t){if(A.call(e,"key")>=0){return e.key(t)}if(g("storageKey")){return p("storageKey",arguments)}};c.storageGetItem=function(e,t){if(A.call(e,"getItem")>=0){return e.getItem(t)}if(g("storageGetItem")){return p("storageGetItem",arguments)}};c.storageSetItem=function(e,t,n){if(A.call(e,"setItem")>=0){return e.setItem(t,n)}if(g("storageSetItem")){return p("storageSetItem",arguments)}};c.storageRemoveItem=function(e,t){if(A.call(e,"removeItem")>=0){return e.removeItem(t)}if(g("storageRemoveItem")){return p("storageRemoveItem",arguments)}};c.storageClear=function(e){if(A.call(e,"clear")>=0){return e.clear()}if(g("storageClear")){return p("storageClear",arguments)}};t.exports=n},{"./utils":8,"object-inspect":2,"query-string":3,underscore:6,"underscore.string":5}],2:[function(e,t,n){t.exports=function g(e,t,n,s){if(!t)t={};var h=t.depth===undefined?5:t.depth;if(n===undefined)n=0;if(n>=h&&h>0&&e&&typeof e==="object"){return"[Object]"}if(s===undefined)s=[];else if(c(s,e)>=0){return"[Circular]"}function N(e,r){if(r){s=s.slice();s.push(r)}return g(e,t,n+1,s)}if(typeof e==="string"){return p(e)}else if(typeof e==="function"){var v=f(e);return"[Function"+(v?": "+v:"")+"]"}else if(e===null){return"null"}else if(m(e)){var E="<"+String(e.nodeName).toLowerCase();var d=e.attributes||[];for(var y=0;y<d.length;y++){E+=" "+d[y].name+'="'+r(d[y].value)+'"'}E+=">";if(e.childNodes&&e.childNodes.length)E+="...";E+="</"+String(e.nodeName).toLowerCase()+">";return E}else if(i(e)){if(e.length===0)return"[]";var A=Array(e.length);for(var y=0;y<e.length;y++){A[y]=o(e,y)?N(e[y],e):""}return"[ "+A.join(", ")+" ]"}else if(l(e)){var O=[];for(var U in e){if(!o(e,U))continue;if(/[^\w$]/.test(U)){O.push(N(U)+": "+N(e[U]))}else{O.push(U+": "+N(e[U]))}}if(O.length===0)return"["+e+"]";return"{ ["+e+"] "+O.join(", ")+" }"}else if(typeof e==="object"&&typeof e.inspect==="function"){return e.inspect()}else if(typeof e==="object"&&!u(e)&&!a(e)){var A=[],R=[];for(var U in e){if(o(e,U))R.push(U)}R.sort();for(var y=0;y<R.length;y++){var U=R[y];if(/[^\w$]/.test(U)){A.push(N(U)+": "+N(e[U],e))}else A.push(U+": "+N(e[U],e))}if(A.length===0)return"{}";return"{ "+A.join(", ")+" }"}else return String(e)};function r(e){return String(e).replace(/"/g,"&quot;")}function i(e){return s(e)==="[object Array]"}function u(e){return s(e)==="[object Date]"}function a(e){return s(e)==="[object RegExp]"}function l(e){return s(e)==="[object Error]"}function o(e,t){if(!{}.hasOwnProperty)return t in e;return{}.hasOwnProperty.call(e,t)}function s(e){return Object.prototype.toString.call(e)}function f(e){if(e.name)return e.name;var t=e.toString().match(/^function\s*([\w$]+)/);if(t)return t[1]}function c(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++){if(e[n]===t)return n}return-1}function m(e){if(!e||typeof e!=="object")return false;if(typeof HTMLElement!=="undefined"&&e instanceof HTMLElement){return true}return typeof e.nodeName==="string"&&typeof e.getAttribute==="function"}function p(e){var t=e.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,n);return"'"+t+"'";function n(e){var t=e.charCodeAt(0);var n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];if(n)return"\\"+n;return"\\x"+(t<16?"0":"")+t.toString(16)}}},{}],3:[function(e,t,n){"use strict";var r=e("strict-uri-encode");n.extract=function(e){return e.split("?")[1]||""};n.parse=function(e){if(typeof e!=="string"){return{}}e=e.trim().replace(/^(\?|#|&)/,"");if(!e){return{}}return e.split("&").reduce(function(e,t){var n=t.replace(/\+/g," ").split("=");var r=n.shift();var i=n.length>0?n.join("="):undefined;r=decodeURIComponent(r);i=i===undefined?null:decodeURIComponent(i);if(!e.hasOwnProperty(r)){e[r]=i}else if(Array.isArray(e[r])){e[r].push(i)}else{e[r]=[e[r],i]}return e},{})};n.stringify=function(e){return e?Object.keys(e).sort().map(function(t){var n=e[t];if(n===undefined){return""}if(n===null){return t}if(Array.isArray(n)){return n.sort().map(function(e){return r(t)+"="+r(e)}).join("&")}return r(t)+"="+r(n)}).filter(function(e){return e.length>0}).join("&"):""}},{"strict-uri-encode":4}],4:[function(e,t,n){"use strict";t.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}},{}],5:[function(e,t,n){!function(e,r){"use strict";var i=r.prototype.trim;var u=r.prototype.trimRight;var a=r.prototype.trimLeft;var l=function(e){return e*1||0};var o=function(e,t){if(t<1)return"";var n="";while(t>0){if(t&1)n+=e;t>>=1,e+=e}return n};var s=[].slice;var f=function(e){if(e==null)return"\\s";else if(e.source)return e.source;else return"["+N.escapeRegExp(e)+"]"};function c(e,t){var n,r,i=e.toLowerCase();t=[].concat(t);for(n=0;n<t.length;n+=1){r=t[n];
if(!r)continue;if(r.test&&r.test(e))return true;if(r.toLowerCase()===i)return true}}var m={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"};var p={};for(var g in m)p[m[g]]=g;p["'"]="#39";var h=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var t=o;var n=function(){if(!n.cache.hasOwnProperty(arguments[0])){n.cache[arguments[0]]=n.parse(arguments[0])}return n.format.call(null,n.cache[arguments[0]],arguments)};n.format=function(n,i){var u=1,a=n.length,l="",o,s=[],f,c,m,p,g,N;for(f=0;f<a;f++){l=e(n[f]);if(l==="string"){s.push(n[f])}else if(l==="array"){m=n[f];if(m[2]){o=i[u];for(c=0;c<m[2].length;c++){if(!o.hasOwnProperty(m[2][c])){throw new Error(h('[_.sprintf] property "%s" does not exist',m[2][c]))}o=o[m[2][c]]}}else if(m[1]){o=i[m[1]]}else{o=i[u++]}if(/[^s]/.test(m[8])&&e(o)!="number"){throw new Error(h("[_.sprintf] expecting number but found %s",e(o)))}switch(m[8]){case"b":o=o.toString(2);break;case"c":o=r.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=m[7]?o.toExponential(m[7]):o.toExponential();break;case"f":o=m[7]?parseFloat(o).toFixed(m[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=r(o))&&m[7]?o.substring(0,m[7]):o;break;case"u":o=Math.abs(o);break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase();break}o=/[def]/.test(m[8])&&m[3]&&o>=0?"+"+o:o;g=m[4]?m[4]=="0"?"0":m[4].charAt(1):" ";N=m[6]-r(o).length;p=m[6]?t(g,N):"";s.push(m[5]?o+p:p+o)}}return s.join("")};n.cache={};n.parse=function(e){var t=e,n=[],r=[],i=0;while(t){if((n=/^[^\x25]+/.exec(t))!==null){r.push(n[0])}else if((n=/^\x25{2}/.exec(t))!==null){r.push("%")}else if((n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))!==null){if(n[2]){i|=1;var u=[],a=n[2],l=[];if((l=/^([a-z_][a-z_\d]*)/i.exec(a))!==null){u.push(l[1]);while((a=a.substring(l[0].length))!==""){if((l=/^\.([a-z_][a-z_\d]*)/i.exec(a))!==null){u.push(l[1])}else if((l=/^\[(\d+)\]/.exec(a))!==null){u.push(l[1])}else{throw new Error("[_.sprintf] huh?")}}}else{throw new Error("[_.sprintf] huh?")}n[2]=u}else{i|=2}if(i===3){throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported")}r.push(n)}else{throw new Error("[_.sprintf] huh?")}t=t.substring(n[0].length)}return r};return n}();var N={VERSION:"2.4.0",isBlank:function(e){if(e==null)e="";return/^\s*$/.test(e)},stripTags:function(e){if(e==null)return"";return r(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){e=e==null?"":r(e);return e.charAt(0).toUpperCase()+e.slice(1)},chop:function(e,t){if(e==null)return[];e=r(e);t=~~t;return t>0?e.match(new RegExp(".{1,"+t+"}","g")):[e]},clean:function(e){return N.strip(e).replace(/\s+/g," ")},count:function(e,t){if(e==null||t==null)return 0;e=r(e);t=r(t);var n=0,i=0,u=t.length;while(true){i=e.indexOf(t,i);if(i===-1)break;n++;i+=u}return n},chars:function(e){if(e==null)return[];return r(e).split("")},swapCase:function(e){if(e==null)return"";return r(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){if(e==null)return"";return r(e).replace(/[&<>"']/g,function(e){return"&"+p[e]+";"})},unescapeHTML:function(e){if(e==null)return"";return r(e).replace(/\&([^;]+);/g,function(e,t){var n;if(t in m){return m[t]}else if(n=t.match(/^#x([\da-fA-F]+)$/)){return r.fromCharCode(parseInt(n[1],16))}else if(n=t.match(/^#(\d+)$/)){return r.fromCharCode(~~n[1])}else{return e}})},escapeRegExp:function(e){if(e==null)return"";return r(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,t,n,r){var i=N.chars(e);i.splice(~~t,~~n,r);return i.join("")},insert:function(e,t,n){return N.splice(e,t,0,n)},include:function(e,t){if(t==="")return true;if(e==null)return false;return r(e).indexOf(t)!==-1},join:function(){var e=s.call(arguments),t=e.shift();if(t==null)t="";return e.join(t)},lines:function(e){if(e==null)return[];return r(e).split("\n")},reverse:function(e){return N.chars(e).reverse().join("")},startsWith:function(e,t){if(t==="")return true;if(e==null||t==null)return false;e=r(e);t=r(t);return e.length>=t.length&&e.slice(0,t.length)===t},endsWith:function(e,t){if(t==="")return true;if(e==null||t==null)return false;e=r(e);t=r(t);return e.length>=t.length&&e.slice(e.length-t.length)===t},succ:function(e){if(e==null)return"";e=r(e);return e.slice(0,-1)+r.fromCharCode(e.charCodeAt(e.length-1)+1)},titleize:function(e){if(e==null)return"";e=r(e).toLowerCase();return e.replace(/(?:^|\s|-)\S/g,function(e){return e.toUpperCase()})},camelize:function(e){return N.trim(e).replace(/[-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""})},underscored:function(e){return N.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return N.trim(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return N.capitalize(N.camelize(r(e).replace(/[\W_]/g," ")).replace(/\s/g,""))},humanize:function(e){return N.capitalize(N.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,t){if(e==null)return"";if(!t&&i)return i.call(e);t=f(t);return r(e).replace(new RegExp("^"+t+"+|"+t+"+$","g"),"")},ltrim:function(e,t){if(e==null)return"";if(!t&&a)return a.call(e);t=f(t);return r(e).replace(new RegExp("^"+t+"+"),"")},rtrim:function(e,t){if(e==null)return"";if(!t&&u)return u.call(e);t=f(t);return r(e).replace(new RegExp(t+"+$"),"")},truncate:function(e,t,n){if(e==null)return"";e=r(e);n=n||"...";t=~~t;return e.length>t?e.slice(0,t)+n:e},prune:function(e,t,n){if(e==null)return"";e=r(e);t=~~t;n=n!=null?r(n):"...";if(e.length<=t)return e;var i=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},u=e.slice(0,t+1).replace(/.(?=\W*\w*$)/g,i);if(u.slice(u.length-2).match(/\w\w/))u=u.replace(/\s*\S+$/,"");else u=N.rtrim(u.slice(0,u.length-1));return(u+n).length>e.length?e:e.slice(0,u.length)+n},words:function(e,t){if(N.isBlank(e))return[];return N.trim(e,t).split(t||/\s+/)},pad:function(e,t,n,i){e=e==null?"":r(e);t=~~t;var u=0;if(!n)n=" ";else if(n.length>1)n=n.charAt(0);switch(i){case"right":u=t-e.length;return e+o(n,u);case"both":u=t-e.length;return o(n,Math.ceil(u/2))+e+o(n,Math.floor(u/2));default:u=t-e.length;return o(n,u)+e}},lpad:function(e,t,n){return N.pad(e,t,n)},rpad:function(e,t,n){return N.pad(e,t,n,"right")},lrpad:function(e,t,n){return N.pad(e,t,n,"both")},sprintf:h,vsprintf:function(e,t){t.unshift(e);return h.apply(null,t)},toNumber:function(e,t){if(!e)return 0;e=N.trim(e);if(!e.match(/^-?\d+(?:\.\d+)?$/))return NaN;return l(l(e).toFixed(~~t))},numberFormat:function(e,t,n,r){if(isNaN(e)||e==null)return"";e=e.toFixed(~~t);r=typeof r=="string"?r:",";var i=e.split("."),u=i[0],a=i[1]?(n||".")+i[1]:"";return u.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+a},strRight:function(e,t){if(e==null)return"";e=r(e);t=t!=null?r(t):t;var n=!t?-1:e.indexOf(t);return~n?e.slice(n+t.length,e.length):e},strRightBack:function(e,t){if(e==null)return"";e=r(e);t=t!=null?r(t):t;var n=!t?-1:e.lastIndexOf(t);return~n?e.slice(n+t.length,e.length):e},strLeft:function(e,t){if(e==null)return"";e=r(e);t=t!=null?r(t):t;var n=!t?-1:e.indexOf(t);return~n?e.slice(0,n):e},strLeftBack:function(e,t){if(e==null)return"";e+="";t=t!=null?""+t:t;var n=e.lastIndexOf(t);return~n?e.slice(0,n):e},toSentence:function(e,t,n,r){t=t||", ";n=n||" and ";var i=e.slice(),u=i.pop();if(e.length>2&&r)n=N.rtrim(t)+n;return i.length?i.join(t)+n+u:u},toSentenceSerial:function(){var e=s.call(arguments);e[3]=true;return N.toSentence.apply(N,e)},slugify:function(e){if(e==null)return"";var t="ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",n="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",i=new RegExp(f(t),"g");e=r(e).toLowerCase().replace(i,function(e){var r=t.indexOf(e);return n.charAt(r)||"-"});return N.dasherize(e.replace(/[^\w\s-]/g,""))},surround:function(e,t){return[t,e,t].join("")},quote:function(e,t){return N.surround(e,t||'"')},unquote:function(e,t){t=t||'"';if(e[0]===t&&e[e.length-1]===t)return e.slice(1,e.length-1);else return e},exports:function(){var e={};for(var t in this){if(!this.hasOwnProperty(t)||t.match(/^(?:include|contains|reverse)$/))continue;e[t]=this[t]}return e},repeat:function(e,t,n){if(e==null)return"";t=~~t;if(n==null)return o(r(e),t);for(var i=[];t>0;i[--t]=e){}return i.join(n)},naturalCmp:function(e,t){if(e==t)return 0;if(!e)return-1;if(!t)return 1;var n=/(\.\d+)|(\d+)|(\D+)/g,i=r(e).toLowerCase().match(n),u=r(t).toLowerCase().match(n),a=Math.min(i.length,u.length);for(var l=0;l<a;l++){var o=i[l],s=u[l];if(o!==s){var f=parseInt(o,10);if(!isNaN(f)){var c=parseInt(s,10);if(!isNaN(c)&&f-c)return f-c}return o<s?-1:1}}if(i.length===u.length)return i.length-u.length;return e<t?-1:1},levenshtein:function(e,t){if(e==null&&t==null)return 0;if(e==null)return r(t).length;if(t==null)return r(e).length;e=r(e);t=r(t);var n=[],i,u;for(var a=0;a<=t.length;a++)for(var l=0;l<=e.length;l++){if(a&&l)if(e.charAt(l-1)===t.charAt(a-1))u=i;else u=Math.min(n[l],n[l-1],i)+1;else u=a+l;i=n[l];n[l]=u}return n.pop()},toBoolean:function(e,t,n){if(typeof e==="number")e=""+e;if(typeof e!=="string")return!!e;e=N.trim(e);if(c(e,t||["true","1"]))return true;if(c(e,n||["false","0"]))return false}};N.strip=N.trim;N.lstrip=N.ltrim;N.rstrip=N.rtrim;N.center=N.lrpad;N.rjust=N.lpad;N.ljust=N.rpad;N.contains=N.include;N.q=N.quote;N.toBool=N.toBoolean;if(typeof n!=="undefined"){if(typeof t!=="undefined"&&t.exports)t.exports=N;n._s=N}if(typeof define==="function"&&define.amd)define("underscore.string",[],function(){return N});e._=e._||{};e._.string=e._.str=N}(this,String)},{}],6:[function(e,t,n){(function(){var e=this;var r=e._;var i=Array.prototype,u=Object.prototype,a=Function.prototype;var l=i.push,o=i.slice,s=i.concat,f=u.toString,c=u.hasOwnProperty;var m=Array.isArray,p=Object.keys,g=a.bind;var h=function(e){if(e instanceof h)return e;if(!(this instanceof h))return new h(e);this._wrapped=e};if(typeof n!=="undefined"){if(typeof t!=="undefined"&&t.exports){n=t.exports=h}n._=h}else{e._=h}h.VERSION="1.7.0";var N=function(e,t,n){if(t===void 0)return e;switch(n==null?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,u){return e.call(t,n,r,i,u)}}return function(){return e.apply(t,arguments)}};h.iteratee=function(e,t,n){if(e==null)return h.identity;if(h.isFunction(e))return N(e,t,n);if(h.isObject(e))return h.matches(e);return h.property(e)};h.each=h.forEach=function(e,t,n){if(e==null)return e;t=N(t,n);var r,i=e.length;if(i===+i){for(r=0;r<i;r++){t(e[r],r,e)}}else{var u=h.keys(e);for(r=0,i=u.length;r<i;r++){t(e[u[r]],u[r],e)}}return e};h.map=h.collect=function(e,t,n){if(e==null)return[];t=h.iteratee(t,n);var r=e.length!==+e.length&&h.keys(e),i=(r||e).length,u=Array(i),a;for(var l=0;l<i;l++){a=r?r[l]:l;u[l]=t(e[a],a,e)}return u};var v="Reduce of empty array with no initial value";h.reduce=h.foldl=h.inject=function(e,t,n,r){if(e==null)e=[];t=N(t,r,4);var i=e.length!==+e.length&&h.keys(e),u=(i||e).length,a=0,l;if(arguments.length<3){if(!u)throw new TypeError(v);n=e[i?i[a++]:a++]}for(;a<u;a++){l=i?i[a]:a;n=t(n,e[l],l,e)}return n};h.reduceRight=h.foldr=function(e,t,n,r){if(e==null)e=[];t=N(t,r,4);var i=e.length!==+e.length&&h.keys(e),u=(i||e).length,a;if(arguments.length<3){if(!u)throw new TypeError(v);n=e[i?i[--u]:--u]}while(u--){a=i?i[u]:u;n=t(n,e[a],a,e)}return n};h.find=h.detect=function(e,t,n){var r;t=h.iteratee(t,n);h.some(e,function(e,n,i){if(t(e,n,i)){r=e;return true}});return r};h.filter=h.select=function(e,t,n){var r=[];if(e==null)return r;t=h.iteratee(t,n);h.each(e,function(e,n,i){if(t(e,n,i))r.push(e)});return r};h.reject=function(e,t,n){return h.filter(e,h.negate(h.iteratee(t)),n)};h.every=h.all=function(e,t,n){if(e==null)return true;t=h.iteratee(t,n);var r=e.length!==+e.length&&h.keys(e),i=(r||e).length,u,a;for(u=0;u<i;u++){a=r?r[u]:u;if(!t(e[a],a,e))return false}return true};h.some=h.any=function(e,t,n){if(e==null)return false;t=h.iteratee(t,n);var r=e.length!==+e.length&&h.keys(e),i=(r||e).length,u,a;for(u=0;u<i;u++){a=r?r[u]:u;if(t(e[a],a,e))return true}return false};h.contains=h.include=function(e,t){if(e==null)return false;if(e.length!==+e.length)e=h.values(e);return h.indexOf(e,t)>=0};h.invoke=function(e,t){var n=o.call(arguments,2);var r=h.isFunction(t);return h.map(e,function(e){return(r?t:e[t]).apply(e,n)})};h.pluck=function(e,t){return h.map(e,h.property(t))};h.where=function(e,t){return h.filter(e,h.matches(t))};h.findWhere=function(e,t){return h.find(e,h.matches(t))};h.max=function(e,t,n){var r=-Infinity,i=-Infinity,u,a;if(t==null&&e!=null){e=e.length===+e.length?e:h.values(e);for(var l=0,o=e.length;l<o;l++){u=e[l];if(u>r){r=u}}}else{t=h.iteratee(t,n);h.each(e,function(e,n,u){a=t(e,n,u);if(a>i||a===-Infinity&&r===-Infinity){r=e;i=a}})}return r};h.min=function(e,t,n){var r=Infinity,i=Infinity,u,a;if(t==null&&e!=null){e=e.length===+e.length?e:h.values(e);for(var l=0,o=e.length;l<o;l++){u=e[l];if(u<r){r=u}}}else{t=h.iteratee(t,n);h.each(e,function(e,n,u){a=t(e,n,u);if(a<i||a===Infinity&&r===Infinity){r=e;i=a}})}return r};h.shuffle=function(e){var t=e&&e.length===+e.length?e:h.values(e);var n=t.length;var r=Array(n);for(var i=0,u;i<n;i++){u=h.random(0,i);if(u!==i)r[i]=r[u];r[u]=t[i]}return r};h.sample=function(e,t,n){if(t==null||n){if(e.length!==+e.length)e=h.values(e);return e[h.random(e.length-1)]}return h.shuffle(e).slice(0,Math.max(0,t))};h.sortBy=function(e,t,n){t=h.iteratee(t,n);return h.pluck(h.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria;var r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var E=function(e){return function(t,n,r){var i={};n=h.iteratee(n,r);h.each(t,function(r,u){var a=n(r,u,t);e(i,r,a)});return i}};h.groupBy=E(function(e,t,n){if(h.has(e,n))e[n].push(t);else e[n]=[t]});h.indexBy=E(function(e,t,n){e[n]=t});h.countBy=E(function(e,t,n){if(h.has(e,n))e[n]++;else e[n]=1});h.sortedIndex=function(e,t,n,r){n=h.iteratee(n,r,1);var i=n(t);var u=0,a=e.length;while(u<a){var l=u+a>>>1;if(n(e[l])<i)u=l+1;else a=l}return u};h.toArray=function(e){if(!e)return[];if(h.isArray(e))return o.call(e);if(e.length===+e.length)return h.map(e,h.identity);return h.values(e)};h.size=function(e){if(e==null)return 0;return e.length===+e.length?e.length:h.keys(e).length};h.partition=function(e,t,n){t=h.iteratee(t,n);var r=[],i=[];h.each(e,function(e,n,u){(t(e,n,u)?r:i).push(e)});return[r,i]};h.first=h.head=h.take=function(e,t,n){if(e==null)return void 0;if(t==null||n)return e[0];if(t<0)return[];return o.call(e,0,t)};h.initial=function(e,t,n){return o.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))};h.last=function(e,t,n){if(e==null)return void 0;if(t==null||n)return e[e.length-1];return o.call(e,Math.max(e.length-t,0))};h.rest=h.tail=h.drop=function(e,t,n){return o.call(e,t==null||n?1:t)};h.compact=function(e){return h.filter(e,h.identity)};var d=function(e,t,n,r){if(t&&h.every(e,h.isArray)){return s.apply(r,e)}for(var i=0,u=e.length;i<u;i++){var a=e[i];if(!h.isArray(a)&&!h.isArguments(a)){if(!n)r.push(a)}else if(t){l.apply(r,a)}else{d(a,t,n,r)}}return r};h.flatten=function(e,t){return d(e,t,false,[])};h.without=function(e){return h.difference(e,o.call(arguments,1))};h.uniq=h.unique=function(e,t,n,r){if(e==null)return[];if(!h.isBoolean(t)){r=n;n=t;t=false}if(n!=null)n=h.iteratee(n,r);var i=[];var u=[];for(var a=0,l=e.length;a<l;a++){var o=e[a];if(t){if(!a||u!==o)i.push(o);u=o}else if(n){var s=n(o,a,e);if(h.indexOf(u,s)<0){u.push(s);i.push(o)}}else if(h.indexOf(i,o)<0){i.push(o)}}return i};h.union=function(){return h.uniq(d(arguments,true,true,[]))};h.intersection=function(e){if(e==null)return[];var t=[];var n=arguments.length;for(var r=0,i=e.length;r<i;r++){var u=e[r];if(h.contains(t,u))continue;for(var a=1;a<n;a++){if(!h.contains(arguments[a],u))break}if(a===n)t.push(u)}return t};h.difference=function(e){var t=d(o.call(arguments,1),true,true,[]);return h.filter(e,function(e){return!h.contains(t,e)})};h.zip=function(e){if(e==null)return[];var t=h.max(arguments,"length").length;var n=Array(t);for(var r=0;r<t;r++){n[r]=h.pluck(arguments,r)}return n};h.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++){if(t){n[e[r]]=t[r]}else{n[e[r][0]]=e[r][1]}}return n};h.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n=="number"){r=n<0?Math.max(0,i+n):n}else{r=h.sortedIndex(e,t);return e[r]===t?r:-1}}for(;r<i;r++)if(e[r]===t)return r;return-1};h.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=e.length;if(typeof n=="number"){r=n<0?r+n+1:Math.min(r,n+1)}while(--r>=0)if(e[r]===t)return r;return-1};h.range=function(e,t,n){if(arguments.length<=1){t=e||0;e=0}n=n||1;var r=Math.max(Math.ceil((t-e)/n),0);var i=Array(r);for(var u=0;u<r;u++,e+=n){i[u]=e}return i};var y=function(){};h.bind=function(e,t){var n,r;if(g&&e.bind===g)return g.apply(e,o.call(arguments,1));if(!h.isFunction(e))throw new TypeError("Bind must be called on a function");n=o.call(arguments,2);r=function(){if(!(this instanceof r))return e.apply(t,n.concat(o.call(arguments)));y.prototype=e.prototype;var i=new y;y.prototype=null;var u=e.apply(i,n.concat(o.call(arguments)));if(h.isObject(u))return u;return i};return r};h.partial=function(e){var t=o.call(arguments,1);return function(){var n=0;var r=t.slice();for(var i=0,u=r.length;i<u;i++){if(r[i]===h)r[i]=arguments[n++]}while(n<arguments.length)r.push(arguments[n++]);return e.apply(this,r)}};h.bindAll=function(e){var t,n=arguments.length,r;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++){r=arguments[t];e[r]=h.bind(e[r],e)}return e};h.memoize=function(e,t){var n=function(r){var i=n.cache;var u=t?t.apply(this,arguments):r;if(!h.has(i,u))i[u]=e.apply(this,arguments);return i[u]};n.cache={};return n};h.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)};h.defer=function(e){return h.delay.apply(h,[e,1].concat(o.call(arguments,1)))};h.throttle=function(e,t,n){var r,i,u;var a=null;var l=0;if(!n)n={};var o=function(){l=n.leading===false?0:h.now();a=null;u=e.apply(r,i);if(!a)r=i=null};return function(){var s=h.now();if(!l&&n.leading===false)l=s;var f=t-(s-l);r=this;i=arguments;if(f<=0||f>t){clearTimeout(a);a=null;l=s;u=e.apply(r,i);if(!a)r=i=null}else if(!a&&n.trailing!==false){a=setTimeout(o,f)}return u}};h.debounce=function(e,t,n){var r,i,u,a,l;var o=function(){var s=h.now()-a;if(s<t&&s>0){r=setTimeout(o,t-s)}else{r=null;if(!n){l=e.apply(u,i);if(!r)u=i=null}}};return function(){u=this;i=arguments;a=h.now();var s=n&&!r;if(!r)r=setTimeout(o,t);if(s){l=e.apply(u,i);u=i=null}return l}};h.wrap=function(e,t){return h.partial(t,e)};h.negate=function(e){return function(){return!e.apply(this,arguments)}};h.compose=function(){var e=arguments;var t=e.length-1;return function(){var n=t;var r=e[t].apply(this,arguments);while(n--)r=e[n].call(this,r);return r}};h.after=function(e,t){return function(){if(--e<1){return t.apply(this,arguments)}}};h.before=function(e,t){var n;return function(){if(--e>0){n=t.apply(this,arguments)}else{t=null}return n}};h.once=h.partial(h.before,2);h.keys=function(e){if(!h.isObject(e))return[];if(p)return p(e);var t=[];for(var n in e)if(h.has(e,n))t.push(n);return t};h.values=function(e){var t=h.keys(e);var n=t.length;var r=Array(n);for(var i=0;i<n;i++){r[i]=e[t[i]]}return r};h.pairs=function(e){var t=h.keys(e);var n=t.length;var r=Array(n);for(var i=0;i<n;i++){r[i]=[t[i],e[t[i]]]}return r};h.invert=function(e){var t={};var n=h.keys(e);for(var r=0,i=n.length;r<i;r++){t[e[n[r]]]=n[r]}return t};h.functions=h.methods=function(e){var t=[];for(var n in e){if(h.isFunction(e[n]))t.push(n)}return t.sort()};h.extend=function(e){if(!h.isObject(e))return e;var t,n;for(var r=1,i=arguments.length;r<i;r++){t=arguments[r];for(n in t){if(c.call(t,n)){e[n]=t[n]}}}return e};h.pick=function(e,t,n){var r={},i;if(e==null)return r;if(h.isFunction(t)){t=N(t,n);for(i in e){var u=e[i];if(t(u,i,e))r[i]=u}}else{var a=s.apply([],o.call(arguments,1));e=new Object(e);for(var l=0,f=a.length;l<f;l++){i=a[l];if(i in e)r[i]=e[i]}}return r};h.omit=function(e,t,n){if(h.isFunction(t)){t=h.negate(t)}else{var r=h.map(s.apply([],o.call(arguments,1)),String);t=function(e,t){return!h.contains(r,t)}}return h.pick(e,t,n)};h.defaults=function(e){if(!h.isObject(e))return e;for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];for(var i in r){if(e[i]===void 0)e[i]=r[i]}}return e};h.clone=function(e){if(!h.isObject(e))return e;return h.isArray(e)?e.slice():h.extend({},e)};h.tap=function(e,t){t(e);return e};var A=function(e,t,n,r){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return e===t;if(e instanceof h)e=e._wrapped;if(t instanceof h)t=t._wrapped;var i=f.call(e);if(i!==f.call(t))return false;switch(i){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":if(+e!==+e)return+t!==+t;return+e===0?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}if(typeof e!="object"||typeof t!="object")return false;var u=n.length;while(u--){if(n[u]===e)return r[u]===t}var a=e.constructor,l=t.constructor;if(a!==l&&"constructor"in e&&"constructor"in t&&!(h.isFunction(a)&&a instanceof a&&h.isFunction(l)&&l instanceof l)){return false}n.push(e);r.push(t);var o,s;if(i==="[object Array]"){o=e.length;s=o===t.length;if(s){while(o--){if(!(s=A(e[o],t[o],n,r)))break}}}else{var c=h.keys(e),m;o=c.length;s=h.keys(t).length===o;if(s){while(o--){m=c[o];if(!(s=h.has(t,m)&&A(e[m],t[m],n,r)))break}}}n.pop();r.pop();return s};h.isEqual=function(e,t){return A(e,t,[],[])};h.isEmpty=function(e){if(e==null)return true;if(h.isArray(e)||h.isString(e)||h.isArguments(e))return e.length===0;for(var t in e)if(h.has(e,t))return false;return true};h.isElement=function(e){return!!(e&&e.nodeType===1)};h.isArray=m||function(e){return f.call(e)==="[object Array]"};h.isObject=function(e){var t=typeof e;return t==="function"||t==="object"&&!!e};h.each(["Arguments","Function","String","Number","Date","RegExp"],function(e){h["is"+e]=function(t){return f.call(t)==="[object "+e+"]"}});if(!h.isArguments(arguments)){h.isArguments=function(e){return h.has(e,"callee")}}if(typeof/./!=="function"){h.isFunction=function(e){return typeof e=="function"||false}}h.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))};h.isNaN=function(e){return h.isNumber(e)&&e!==+e};h.isBoolean=function(e){return e===true||e===false||f.call(e)==="[object Boolean]"};h.isNull=function(e){return e===null};h.isUndefined=function(e){return e===void 0};h.has=function(e,t){return e!=null&&c.call(e,t)};h.noConflict=function(){e._=r;return this};h.identity=function(e){return e};h.constant=function(e){return function(){return e}};h.noop=function(){};h.property=function(e){return function(t){return t[e]}};h.matches=function(e){var t=h.pairs(e),n=t.length;return function(e){if(e==null)return!n;e=new Object(e);for(var r=0;r<n;r++){var i=t[r],u=i[0];if(i[1]!==e[u]||!(u in e))return false}return true}};h.times=function(e,t,n){var r=Array(Math.max(0,e));t=N(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r};h.random=function(e,t){if(t==null){t=e;e=0}return e+Math.floor(Math.random()*(t-e+1))};h.now=Date.now||function(){return(new Date).getTime()};var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var U=h.invert(O);var R=function(e){var t=function(t){return e[t]};var n="(?:"+h.keys(e).join("|")+")";var r=RegExp(n);var i=RegExp(n,"g");return function(e){e=e==null?"":""+e;return r.test(e)?e.replace(i,t):e}};h.escape=R(O);h.unescape=R(U);h.result=function(e,t){if(e==null)return void 0;var n=e[t];return h.isFunction(n)?e[t]():n};var S=0;h.uniqueId=function(e){var t=++S+"";return e?e+t:t};h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/;var b={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var _=/\\|'|\r|\n|\u2028|\u2029/g;var M=function(e){return"\\"+b[e]};h.template=function(e,t,n){if(!t&&n)t=n;t=h.defaults({},t,h.templateSettings);var r=RegExp([(t.escape||I).source,(t.interpolate||I).source,(t.evaluate||I).source].join("|")+"|$","g");var i=0;var u="__p+='";e.replace(r,function(t,n,r,a,l){u+=e.slice(i,l).replace(_,M);i=l+t.length;if(n){u+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"}else if(r){u+="'+\n((__t=("+r+"))==null?'':__t)+\n'"}else if(a){u+="';\n"+a+"\n__p+='"}return t});u+="';\n";if(!t.variable)u="with(obj||{}){\n"+u+"}\n";u="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{var a=new Function(t.variable||"obj","_",u)}catch(l){l.source=u;throw l}var o=function(e){return a.call(this,e,h)};var s=t.variable||"obj";o.source="function("+s+"){\n"+u+"}";return o};h.chain=function(e){var t=h(e);t._chain=true;return t};var L=function(e){return this._chain?h(e).chain():e};h.mixin=function(e){h.each(h.functions(e),function(t){var n=h[t]=e[t];h.prototype[t]=function(){var e=[this._wrapped];l.apply(e,arguments);return L.call(this,n.apply(h,e))}})};h.mixin(h);h.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];h.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);if((e==="shift"||e==="splice")&&n.length===0)delete n[0];return L.call(this,n)}});h.each(["concat","join","slice"],function(e){var t=i[e];h.prototype[e]=function(){return L.call(this,t.apply(this._wrapped,arguments))}});h.prototype.value=function(){return this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return h})}}).call(this)},{}],7:[function(require,module,exports){var Runtime,Utils,functions,_;_=require("underscore");functions=require("./functions");Utils=require("./utils");Runtime=function(){function Runtime(){this.setupGlobal();this.setupFunctions()}Runtime.defaultLocale="en_US";Runtime.defaultCurrencyCode="USD";Runtime.defaultCurrencySymbol="$";Runtime.defaultTimeZone="UTC";Runtime.prototype.global=null;Runtime.prototype.expressions=[];Runtime.prototype.form={};Runtime.prototype.values={};Runtime.prototype.hooks={};Runtime.prototype.event={};Runtime.prototype.events={on:{},change:{},click:{}};Runtime.prototype.script=null;Runtime.prototype.customVariables={};Runtime.prototype.locale=Runtime.defaultLocale;Runtime.prototype.currencyCode=Runtime.defaultCurrencyCode;Runtime.prototype.currencySymbol=Runtime.defaultCurrencySymbol;Runtime.prototype.variables={};Runtime.prototype.results=[];Runtime.prototype.dataNames={};Runtime.prototype.elements=[];Runtime.prototype.elementsByKey={};Runtime.prototype.elementsByDataName={};Runtime.prototype.statusesByValue={};Runtime.prototype.featureIsNew=true;Runtime.prototype.showErrors=false;Runtime.prototype.asyncCallbacks={};Runtime.prototype.asyncCount=0;Runtime.prototype.extraVariableNames=["locale","language","timeZone","decimalSeparator","groupingSeparator","currencySymbol","currencyCode","country","deviceIdentifier","deviceModel","deviceManufacturer","platform","platformVersion","application","applicationVersion","applicationBuild","userEmail","userRoleName","recordStatus","recordSystemCreatedAt","recordSystemUpdatedAt","recordClientCreatedAt","recordClientUpdatedAt","recordProject","recordProjectName","recordGeometry","recordAltitude","recordVerticalAccuracy","recordHorizontalAccuracy","featureCreatedAt","featureUpdatedAt","featureGeometry"];Runtime.prototype.clearValues=function(){var e,t;t=[];for(e in this.variables){t.push(delete this.variables[e])}return t};Runtime.prototype.setupValues=function(){var e,t,n,r,i,u,a,l,o;this.clearValues();i=this.variables;r=this.dataNames;for(t in r){i["$"+r[t]]=void 0}for(t in this.values){u=this.values[t];e=this.elementsByKey[t];if(e&&this.dataNames[t]){i["$"+this.dataNames[t]]=Utils.valueForElement(e,u)}}o=this.extraVariableNames;for(a=0,l=o.length;a<l;a++){n=o[a];i["$$"+n]=this[n]}for(n in this.customVariables){i[""+n]=this.customVariables[n]}return functions.CONFIGURE(this,false)};Runtime.prototype.prepare=function(){this.elements=Utils.flattenElements(this.form.elements,true,true);if(this.form.status_field&&this.form.status_field.choices){_.each(this.form.status_field.choices,function(e){return function(t){return e.statusesByValue[t.value]=t.label}}(this))}_.each(this.elements,function(e){return function(t){e.elementsByKey[t.key]=t;e.elementsByDataName[t.data_name]=t;return e.dataNames[t.key]=t.data_name}}(this));return this.initializeScript()};Runtime.prototype.invokeAsync=function(e,t,n){var r;r=++this.asyncCount;this.asyncCallbacks[r]=n;return e.apply(this,t.concat([r]))};Runtime.prototype.finishAsync=function(){var e,t;t=+this.callbackID;e=this.asyncCallbacks[t];delete this.asyncCallbacks[t];$$runtime.results=[];e.apply(this,this.callbackArguments);return $$runtime.results};Runtime.prototype.initializeScript=function(){if(!_.isString(this.script)){return}this.setupValues();with(this.variables){eval(this.script)}};Runtime.prototype.hooksByName=function(e){var t;return(t=this.events)[e]!=null?t[e]:t[e]=[]};Runtime.prototype.hooksByParams=function(e,t){var n;return(n=this.hooksByName(e))[t]!=null?n[t]:n[t]=[]};Runtime.prototype.removeHook=function(e,t,n){if(t!=null&&n!=null){return this.hooksByName(e)[t]=_.without(this.hooksByName(e)[t],n)}else if(t!=null){return delete this.hooksByName(e)[t]}else{return this.events[e]=[]}};Runtime.prototype.addHook=function(e,t,n){return this.hooksByParams(e,t).push(n)};Runtime.prototype.trigger=function(){var e,t,n,r,i,u,a,l;if(this.event.field!=null){a=[this.event.event,this.event.field],n=a[0],r=a[1]}else{l=["on",this.event.event],n=l[0],r=l[1]}t=this.hooksByParams(n,r);if(!(t!=null?t.length:void 0)){return[]}this.setupValues();$$runtime.results=[];for(i=0,u=t.length;i<u;i++){e=t[i];e.call(this,this.event)}return $$runtime.results};Runtime.prototype.evaluate=function(){var e,t,n,r;this.setupValues();$$runtime.results=[];r=this.expressions;for(t=0,n=r.length;t<n;t++){e=r[t];$$runtime.results.push(this.evaluateExpression(e))}return $$runtime.results};Runtime.prototype.evaluateExpression=function(context){var evalResult,ex,rawValue,stringValue,thisVariableName,variables;variables=this.variables;thisVariableName="$"+context.dataName;try{$$runtime.showErrors=false;variables.$$current=$$runtime.$$currentValue=variables[thisVariableName];stringValue=rawValue=$$runtime.$$result=void 0;if(context.expression&&context.expression.length>0){evalResult=void 0;with(variables){evalResult=eval(context.expression)}rawValue=this.coalesce($$runtime.$$result,evalResult);stringValue=this.formatValue(rawValue);variables[thisVariableName]=_.isNumber(rawValue)||_.isDate(rawValue)?rawValue:stringValue}return this.createResult(context.key,rawValue,stringValue,null,$$runtime.showErrors)}catch(_error){ex=_error;console.log("JS ERROR : "+context.dataName+" : "+ex.toString());variables[thisVariableName]=void 0;return this.createResult(context.key,null,null,ex.toString(),$$runtime.showErrors)}};Runtime.prototype.coalesce=function(){return _.find(Utils.toArray(arguments),function(e){return!_.isUndefined(e)})};Runtime.prototype.createResult=function(e,t,n,r,i){if(i){if(r){r=r.toString()}else if(_.isUndefined(t)){r="[Undefined]"}else if(_.isNaN(t)){r="[Not a Number]"}else if(_.isFunction(t)){r="[Function]"}else if(_.isArray(t)){r="[Array]"}else if(_.isDate(t)){r=null}else if(_.isObject(t)){r="[Object]"}}else{r=null}return{type:"calculation",key:e,value:n,error:r}};Runtime.prototype.formatValue=function(e){if(_.isUndefined(e)){e=null}else if(_.isNull(e)){e=null}else if(_.isNaN(e)){e=null}else if(_.isNumber(e)){e=e}else if(_.isDate(e)){e=Utils.formatMachineDate(e)}else if(_.isArray(e)){e=e.map(this.formatValue).join(", ")}else if(_.isRegExp(e)){e=e.toString()}else if(_.isFunction(e)){e=null}return e};Runtime.prototype.setupGlobal=function(){var e;this.global=void 0;try{this.global=Function("return this")()}catch(t){e=t;this.global=window
}this.global.$$runtime=this;this.global.$$prepare=this.prepare.bind(this);this.global.$$evaluate=this.evaluate.bind(this);this.global.$$trigger=this.trigger.bind(this);return this.global.$$finishAsync=this.finishAsync.bind(this)};Runtime.prototype.setupFunctions=function(){var e,t;this.functions||(this.functions={});t=[];for(e in functions){t.push(this.global[e]=this.functions[e]=functions[e])}return t};return Runtime}();module.exports=new Runtime},{"./functions":1,"./utils":8,underscore:6}],8:[function(e,t,n){var r,i,u,a,l;l=e("underscore");a={};u={};i={};r=function(){function e(){}e.DATE_REGEX=/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/;e.toArray=function(e){return Array.prototype.slice.call(e,0)};e.flattenElements=function(t,n,r,i){if(n==null){n=true}if(r==null){r=false}if(i==null){i=void 0}return l.tap([],function(u){return l.each(t,function(t){var a,l;if(r){t.parent=i}u.push(t);l=true;if(!n&&t.type==="Repeatable"){l=false}if(l&&t.elements){a=e.flattenElements(t.elements,n,r,t);return Array.prototype.push.apply(u,a)}})})};e.nearestRepeatable=function(e){var t;t=e;while(t){if(t.type==="Repeatable"){return t}t=t.parent}return null};e.valueForElement=function(t,n){if(e.isNumericElement(t)){return e.numberValue(n)}else if(e.isDateElement(t)){return e.dateValue(n)}else{return n}};e.isNumericElement=function(e){var t,n;return e.numeric||((t=e.display)!=null?t.style:void 0)==="number"||((n=e.display)!=null?n.style:void 0)==="currency"};e.isDateElement=function(e){return e.type==="DateTimeField"||e.type==="DateField"};e.dateValue=function(e){if(e&&e.length<=10){return new Date(""+e.replace(/-/g,"/")+" 00:00:00")}else{return e}};e.numberValue=function(e){e||(e=void 0);if(e!=null){return Number(e)}else{return void 0}};e.repeatableValueElements=function(t){var n,r,l,o,s,f,c,m,p;c=t.key;if(a[c]){o={all:a[c],byKey:u[c],byDataName:i[c]};return o}f=e.flattenElements(t.elements,false);a[c]=n=f;u[c]=l={};i[c]=r={};for(m=0,p=f.length;m<p;m++){s=f[m];l[s.key]=s;r[s.data_name]=s}return{all:n,byKey:l,byDataName:r}};e.repeatableValues=function(t,n,r){var i,u,a;if(!l.isArray(n)){return null}i=e.repeatableValueElements(t).byDataName;u=i[r];if(!u){return null}a=l.map(n,function(t){return e.valueForElement(u,t.form_values[u.key])});return a};e.formatMachineDate=function(e){if(!(e!=null&&!isNaN(e.getTime()))){return null}return""+RIGHT("000"+e.getFullYear(),4)+"-"+RIGHT("0"+(e.getMonth()+1),2)+"-"+RIGHT("0"+e.getDate(),2)};return e}();t.exports=r},{underscore:6}]},{},[7]);