!function n(t,r,e){function u(a,o){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(n){var r=t[a][1][n];return u(r?r:n)},c,c.exports,n,t,r,e)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<e.length;a++)u(e[a]);return u}({1:[function(n,t,r){var e,u,i,r,a,o;o=n("underscore"),o.str=n("underscore.string"),o.mixin(o.str.exports()),i=n("./utils"),a=i.toArray,u={},r={},r.CONFIGURE=function(n){return u=n},r.NO_VALUE=null,r.NOT_IMPLEMENTED=function(){throw new Error("Not Implemented")},r.MATH_FUNC=e=function(n){return function(){return n.apply(Math,a(arguments).map(NUM))}},r.NUMS=function(){return a(arguments).map(NUM)},r.NUM=function(n){return isNaN(n)?0/0:parseFloat(n)},r.N=function(n){return o.isNumber(n)?n:n===!0?1:0},r.HASERROR=function(){var n;for(n=arguments.length;n--;)if(arguments[n]instanceof Error)return!0;return!1},r.ISNAN=function(n){return o.isNaN(NUM(n))},r.PRECISION=function(n){var t;return n=NUM(n),ISNAN(n)?0/0:(t=(n+"").split("."),t.length<2?0:t[1].length)},r.ABS=e(Math.abs),r.ACOS=e(Math.acos),r.ACOSH=e(Math.acosh),r.AND=function(){return void 0===o.find(a(arguments),function(n){return!n})},r.AVERAGE=function(){var n;return n=a(arguments),0===n.length?0/0:o.inject(n,function(n,t){return n+ +t},0)/n.length},r.ROUND=function(n,t){return null==t&&(t=0),n=NUM(n),t=NUM(t),Math.round(n*Math.pow(10,t))/Math.pow(10,t)},r.CEILING=function(n,t){var r;return null==t&&(t=1),t||(t=1),t=ABS(t),n=NUM(n),t=NUM(t),isNaN(n)||isNaN(t)?0/0:0===t?0:(r=PRECISION(t),n>=0?ROUND(Math.ceil(n/t)*t,r):-ROUND(Math.floor(Math.abs(n)/t)*t,r))},r.FLOOR=function(n,t){var r;return t||(t=1),t=ABS(t),n=NUM(n),t=NUM(t),isNaN(n)||isNaN(t)?0/0:0===t?0:(r=PRECISION(t),n>=0?ROUND(Math.floor(n/t)*t,r):-ROUND(Math.ceil(Math.abs(n)/t)*t,r))},r.CHAR=function(n){return n=NUM(n),n instanceof Error?n:String.fromCharCode(n)},r.CLEAN_REGEX=/[\x00\x08\x0B\x0C\x0E-\x1F]/g,r.CLEAN=function(n){return n=n||"",n.replace(CLEAN_REGEX,"")},r.CODE=function(n){return"number"==typeof n&&(n=n.toString()),"string"!=typeof n?0/0:(n||"").charCodeAt(0)},r.CONCATENATE=function(){var n;return n=o.map(a(arguments),function(n){switch(typeof n){case"string":return n;case"number":return n+"";default:return""}}),n.join("")},r.COS=e(Math.cos),r.COSH=e(Math.cosh),r.COMPACT=function(n){return o.isArray(n)?o.filter(n,function(n){return void 0!==n&&null!==n}):void 0},r.COUNT=function(n){return o.isArray(n)?COMPACT(n).length:0/0},r.COUNTA=function(){return COUNT(a(arguments))},r.COUNTBLANK=function(n){var t;return o.isArray(n)?(t=o.filter(n,function(n){switch(!0){case void 0===n||null===n:return!0;case o.isArray(n):return 0===n.length;case"string"==typeof n:return o.isBlank(n);default:return!1}}),t.length):0/0},r.DATE=function(){return NOT_IMPLEMENTED()},r.DATEVALUE=function(){return NOT_IMPLEMENTED()},r.DAY=function(){return NOT_IMPLEMENTED()},r.DAYS360=function(){return NOT_IMPLEMENTED()},r.DEGREES=function(n){return n=NUM(n),o.isNumber(n)?180*n/Math.PI:0/0},r.DOLLAR=function(n,t){return null==t&&(t=2),NOT_IMPLEMENTED()},r.EVEN=function(n){return n=NUM(n),o.isNumber(n)?CEILING(n,-2,-1):0/0},r.EXACT=function(n,t){return o.isEqual(n,t)},r.EXP=e(Math.exp),r.MEMOIZED_FACT=[],r.FACT=function(n){var t;return n=NUM(n),isNaN(n)?0/0:0>n?0/0:(t=Math.floor(n),0===t||1===t?1:MEMOIZED_FACT[t]>0?MEMOIZED_FACT[t]:(MEMOIZED_FACT[t]=FACT(t-1)*t,MEMOIZED_FACT[t]))},r.MEMOIZED_FACTDOUBLE=[],r.FACTDOUBLE=function(n){var t;return n=NUM(n),isNaN(n)?0/0:0>n?0/0:(t=Math.floor(n),1>=t?1:MEMOIZED_FACTDOUBLE[t]>0?MEMOIZED_FACTDOUBLE[t]:(MEMOIZED_FACTDOUBLE[t]=FACTDOUBLE(t-2)*t,MEMOIZED_FACTDOUBLE[t]))},r.FALSE=function(){return!1},r.FIND=function(n,t,r){var e;return r=NUM(r),isNaN(r)&&(r=0),t&&t.indexOf?o.isArray(n)?NO_VALUE:(e=t.indexOf(n,r-1),0>e?NO_VALUE:e+1):NO_VALUE},r.FIXED=function(n,t,r){var e,u,i,a,o,l,s,c,f,p,h,g,N,m;if(null==t&&(t=2),null==r&&(r=!1),n=NUM(n),t=NUM(t),isNaN(t)&&(t=2),t=MAX(t,0),t=MIN(t,20),isNaN(n))return NO_VALUE;if(isNaN(t))return NO_VALUE;if(r=!!r,h=Math.pow(10,t),g=parseInt(n*h),c=".",f=n.toFixed(t),o=f.indexOf(c),!(o>-1))return f;if(l=parseInt(f.substring(0,o)),e=f.substring(o+1,f.length),s="",a=GROUPINGSIZE(),u=Math.pow(10,a),r||u>l)s=l.toString();else{for(i=GROUPINGSEPARATOR(),p=[];l>=u;)N=Math.floor(l%u),m=new Array(a+1).join("0"),p.push(RIGHT(m+N.toString(),a)),l=Math.floor(l/u);l>0&&p.push(l.toString()),s=p.reverse().join(i)}return 1>t?s:s+DECIMALSEPARATOR()+e.toString()},r.GROUPINGSIZE=function(){return u.groupingSize||3},r.DECIMALSEPARATOR=function(){return u.decimalSeparator||"."},r.GROUPINGSEPARATOR=function(){return u.groupingSeparator||","},r.GCD=function(){var n,t,r,e,u,i,o;if(e=a(arguments).map(NUM),n=e.length,0===e.length)return 0/0;if(e[0]<0)return 0/0;for(u=e[0],t=i=1,o=n-1;o>=i;t=i+=1){if(e[t]<0)return 0/0;for(r=e[t];u&&r;)u>r?u%=r:r%=u;u+=r}return u},r.IF=function(n,t,r){return n?t:r},r.IFERROR=function(n,t){return ISERR(n)?t:n},r.INT=r.FLOOR,r.ISBLANK=function(n){var t,r,e,u,i;return null===n?!0:void 0===n?!0:o.isNaN(n)?!0:o.isBoolean(n)?!1:o.isNumber(n)?!1:o.isDate(n)?!1:o.isString(n)?o.isBlank(n):o.isArray(n)?0===n.length:n&&(n.choice_values||null===n.choice_values||n.other_values||null===n.other_values)?(t=n.choice_values,i=n.other_values,r=o.isArray(t)&&t.length>0,u=o.isArray(i)&&i.length>0,e=r||u,!e):0===Object.keys(n).length},r.ISERR=function(n){return n===NO_VALUE?!0:void 0===n?!0:null===n?!0:isNaN(n)?!0:n instanceof Error?!0:!1},r.ISERROR=function(n){return ISERR(n)},r.ISLOGICAL=function(n){return o.isBoolean(n)},r.ISNONTEXT=function(n){return!o.isString(n)},r.ISNUMBER=function(n){return o.isNumber(n)},r.ISODD=function(n){return n=NUM(n),o.isNumber(n)?isNaN(n)?!1:1===(1&Math.floor(Math.abs(n))):!1},r.ISEVEN=function(n){return n=NUM(n),o.isNumber(n)?isNaN(n)?!1:0===(1&Math.floor(Math.abs(n))):!1},r.ISTEXT=function(n){return o.isString(n)},r.LCM=function(){var n,t,r,e,u,i,o,l;for(i=a(arguments).map(function(n){return INT(n)}),e=i.length,n=Math.abs(i[0]),u=o=1,l=e-1;l>=o;u=o+=1){if(t=Math.abs(i[u]),r=n,isNaN(t))return 0/0;for(;n&&t;)n>t?n%=t:t%=n;n=Math.abs(r*i[u])/(n+t)}return n},r.LEFT=function(n,t){return null==t&&(t=1),t||(t=1),t=FLOOR(t),void 0===n?NO_VALUE:null===n?NO_VALUE:o.isObject(n)?NO_VALUE:0>t?NO_VALUE:isNaN(t)?NO_VALUE:(n=n.toString(),n.substring(0,t))},r.LEN=function(n){return void 0===n?NO_VALUE:null===n?NO_VALUE:o.isObject(n)?NO_VALUE:n.toString().length},r.LN=e(Math.log),r.LOG=function(n,t){return n=NUM(n),t=NUM(t||10),void 0===t?0/0:null===t?0/0:isNaN(t)?0/0:Math.log(n)/Math.log(t)},r.LOG10=function(n){return LOG(n,10)},r.LOWER=function(n){return void 0===n?NO_VALUE:null===n?NO_VALUE:o.isArray(n)?NO_VALUE:o.isObject(n)?NO_VALUE:n.toString().toLowerCase()},r.MATCH=function(){return NOT_IMPLEMENTED()},r.MAX=function(){var n,t;return t=o.flatten(a(arguments)),t=o.map(t,NUM),0===t.length?NO_VALUE:(n=o.some(t,isNaN),n?NO_VALUE:Math.max.apply(Math,t))},r.MAXA=function(){return arguments.length<1?NO_VALUE:o.isArray(arguments[0])?MAX.apply(null,arguments[0]):NO_VALUE},r.MEDIAN=function(){return NOT_IMPLEMENTED()},r.MIN=function(){var n,t;return t=o.flatten(a(arguments)),t=o.map(t,NUM),0===t.length?NO_VALUE:(n=o.some(t,isNaN),n?NO_VALUE:Math.min.apply(Math,t))},r.MINA=function(){return arguments.length<1?NO_VALUE:o.isArray(arguments[0])?MIN.apply(null,arguments[0]):NO_VALUE},r.MID=function(n,t,r){return t=FLOOR(t),r=FLOOR(r),void 0===n?NO_VALUE:null===n?NO_VALUE:o.isObject(n)?NO_VALUE:1>t?NO_VALUE:isNaN(t)?NO_VALUE:0>r?NO_VALUE:isNaN(r)?NO_VALUE:(n=n.toString(),n.substr(t-1,r))},r.MOD=function(n,t){var r;return n=NUM(n),t=NUM(t),isNaN(n)?0/0:isNaN(t)?0/0:0===t?0/0:(r=Math.abs(n%t),t>0?r:-r)},r.NOT=function(n){return!n},r.ODD=function(n){var t;return n=NUM(n),o.isNumber(n)?(t=Math.ceil(Math.abs(n)),t=1&t?t:t+1,n>=0?t:-t):0/0},r.OR=function(){return void 0!==o.find(a(arguments),function(n){return n})},r.PI=function(){return Math.PI},r.POWER=function(n,t){return n=NUM(n),t=NUM(t),isNaN(n)?0/0:isNaN(t)?0/0:Math.pow(n,t)},r.PRODUCT=function(){var n,t;return t=a(arguments).map(NUM),0===t.length?0/0:(n=o.some(t,isNaN),n?0/0:o.inject(t,function(n,t){return n*=t},1))},r.PROPER=function(n){return void 0===n?NO_VALUE:null===n?NO_VALUE:o.isArray(n)?NO_VALUE:o.isObject(n)?NO_VALUE:o.titleize(n.toString())},r.QUOTIENT=function(n,t){return n=NUM(n),t=NUM(t),isNaN(n)?0/0:isNaN(t)?0/0:0===t?0/0:parseInt(n/t,10)},r.RADIANS=function(n){return n=NUM(n),n/180*Math.PI},r.RAND=function(){return Math.random()},r.RANDBETWEEN=function(n,t){return n=NUM(n),t=NUM(t),isNaN(n)?0/0:isNaN(t)?0/0:n+Math.ceil((t-n+1)*Math.random())-1},r.REPLACE=function(n,t,r,e){var u,i;return t=FLOOR(t),r=FLOOR(r),arguments.length<4?NO_VALUE:void 0===n?NO_VALUE:null===n?NO_VALUE:o.isObject(n)?NO_VALUE:1>t?NO_VALUE:isNaN(t)?NO_VALUE:0>r?NO_VALUE:isNaN(r)?NO_VALUE:(n=n.toString(),u=n.substr(0,t-1),i=n.substr(t-1+r),u+e+i)},r.RIGHT=function(n,t){return t||(t=1),t=FLOOR(t),void 0===n?NO_VALUE:null===n?NO_VALUE:o.isObject(n)?NO_VALUE:0>t?NO_VALUE:isNaN(t)?NO_VALUE:(n=n.toString(),n.substring(n.length-t))},r.ROUNDDOWN=function(n,t){var r;return null==t&&(t=0),n=NUM(n),t=NUM(t),r=n>0?1:-1,r*Math.floor(Math.abs(n)*Math.pow(10,t))/Math.pow(10,t)},r.ROUNDUP=function(n,t){var r;return null==t&&(t=0),n=NUM(n),t=NUM(t),r=n>0?1:-1,r*Math.ceil(Math.abs(n)*Math.pow(10,t))/Math.pow(10,t)},r.SEARCH=function(n,t,r){var e;return r||(r=1),r=NUM(r),isNaN(r)&&(r=1),o.isNumber(t)&&(t=t.toString()),o.isNumber(n)&&(n=n.toString()),o.isString(n)&&o.isString(t)?""===n?1:(e=t.toLowerCase().indexOf(n.toLowerCase(),r-1),0>e?NO_VALUE:e+1):NO_VALUE},r.SIGN=function(n){if(n=NUM(n),isNaN(n))return 0/0;switch(!0){case n>0:return 1;case 0>n:return-1;case 0===n:return 0}},r.SIN=e(Math.sin),r.SINH=e(Math.sinh),r.SQRT=e(Math.sqrt),r.SQRTPI=function(n){return SQRT(NUM(n)*Math.PI)},r.SUBSTITUTE=function(n,t,r,e){var u,i,a,l,s;if(e=FLOOR(e),arguments.length<3)return NO_VALUE;if(0>e)return NO_VALUE;if(a=!n||!o.isString(t)||!o.isString(r))return NO_VALUE;if(o.isArray(n))return n;if(n.indexOf(t)<0)return n;if(n=n.toString(),t=t.toString(),r=r.toString(),isNaN(e))return n.replace(new RegExp(t,"g"),r);for(i=n.indexOf(t,i),u=1;i>=0;){if(u===e)return l=n.substring(0,i),s=n.substring(i+t.length),l+r+s;i=n.indexOf(t,i+1),u++}return n},r.SUM=function(){var n,t;return t=a(arguments).map(NUM),0===t.length?0/0:(n=o.some(t,isNaN),n?0/0:o.inject(t,function(n,t){return n+=t},0))},r.SUMSQ=function(){var n,t;return t=a(arguments).map(NUM),0===t.length?0/0:(n=o.some(t,isNaN),n?0/0:o.inject(t,function(n,t){return n+=t*t},0))},r.T=function(n){return o.isUndefined(n)?"":o.isNull(n)?"":n.toString()},r.TRIM=function(n){return o.trim(n)},r.TRUE=function(){return!0},r.UPPER=function(n){return void 0===n?NO_VALUE:null===n?NO_VALUE:o.isArray(n)?NO_VALUE:o.isObject(n)?NO_VALUE:n.toString().toUpperCase()},r.VALUE=function(){return NOT_IMPLEMENTED()},r.ISNEW=function(){return NOT_IMPLEMENTED()},r.ISUPDATE=function(){return NOT_IMPLEMENTED()},r.GETSTATE=function(){return u},r.HASOTHER=function(n){return!!(n&&n.other_values&&o.isArray(n.other_values)&&n.other_values.length>0)},r.OTHER=function(n){return r.HASOTHER(n)?n.other_values[0]:NO_VALUE},r.SELECTED=function(n,t){return ISBLANK(n)?!1:t?o.isArray(t)?0===t.filter(function(t){return!SELECTED(n,t)}).length:n&&n.choice_values&&o.contains(n.choice_values,t)?!0:n&&n.other_values&&o.contains(n.other_values,t)?!0:!1:!1},t.exports=r},{"./utils":5,underscore:3,"underscore.string":2}],2:[function(n,t,r){!function(n,e){"use strict";function u(n,t){var r,e,u=n.toLowerCase();for(t=[].concat(t),r=0;r<t.length;r+=1)if(e=t[r]){if(e.test&&e.test(n))return!0;if(e.toLowerCase()===u)return!0}}var i=e.prototype.trim,a=e.prototype.trimRight,o=e.prototype.trimLeft,l=function(n){return 1*n||0},s=function(n,t){if(1>t)return"";for(var r="";t>0;)1&t&&(r+=n),t>>=1,n+=n;return r},c=[].slice,f=function(n){return null==n?"\\s":n.source?n.source:"["+m.escapeRegExp(n)+"]"},p={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},h={};for(var g in p)h[p[g]]=g;h["'"]="#39";var N=function(){function n(n){return Object.prototype.toString.call(n).slice(8,-1).toLowerCase()}var t=s,r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.format=function(r,u){var i,a,o,l,s,c,f,p=1,h=r.length,g="",m=[];for(a=0;h>a;a++)if(g=n(r[a]),"string"===g)m.push(r[a]);else if("array"===g){if(l=r[a],l[2])for(i=u[p],o=0;o<l[2].length;o++){if(!i.hasOwnProperty(l[2][o]))throw new Error(N('[_.sprintf] property "%s" does not exist',l[2][o]));i=i[l[2][o]]}else i=l[1]?u[l[1]]:u[p++];if(/[^s]/.test(l[8])&&"number"!=n(i))throw new Error(N("[_.sprintf] expecting number but found %s",n(i)));switch(l[8]){case"b":i=i.toString(2);break;case"c":i=e.fromCharCode(i);break;case"d":i=parseInt(i,10);break;case"e":i=l[7]?i.toExponential(l[7]):i.toExponential();break;case"f":i=l[7]?parseFloat(i).toFixed(l[7]):parseFloat(i);break;case"o":i=i.toString(8);break;case"s":i=(i=e(i))&&l[7]?i.substring(0,l[7]):i;break;case"u":i=Math.abs(i);break;case"x":i=i.toString(16);break;case"X":i=i.toString(16).toUpperCase()}i=/[def]/.test(l[8])&&l[3]&&i>=0?"+"+i:i,c=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",f=l[6]-e(i).length,s=l[6]?t(c,f):"",m.push(l[5]?i+s:s+i)}return m.join("")},r.cache={},r.parse=function(n){for(var t=n,r=[],e=[],u=0;t;){if(null!==(r=/^[^\x25]+/.exec(t)))e.push(r[0]);else if(null!==(r=/^\x25{2}/.exec(t)))e.push("%");else{if(null===(r=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw new Error("[_.sprintf] huh?");if(r[2]){u|=1;var i=[],a=r[2],o=[];if(null===(o=/^([a-z_][a-z_\d]*)/i.exec(a)))throw new Error("[_.sprintf] huh?");for(i.push(o[1]);""!==(a=a.substring(o[0].length));)if(null!==(o=/^\.([a-z_][a-z_\d]*)/i.exec(a)))i.push(o[1]);else{if(null===(o=/^\[(\d+)\]/.exec(a)))throw new Error("[_.sprintf] huh?");i.push(o[1])}r[2]=i}else u|=2;if(3===u)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");e.push(r)}t=t.substring(r[0].length)}return e},r}(),m={VERSION:"2.4.0",isBlank:function(n){return null==n&&(n=""),/^\s*$/.test(n)},stripTags:function(n){return null==n?"":e(n).replace(/<\/?[^>]+>/g,"")},capitalize:function(n){return n=null==n?"":e(n),n.charAt(0).toUpperCase()+n.slice(1)},chop:function(n,t){return null==n?[]:(n=e(n),t=~~t,t>0?n.match(new RegExp(".{1,"+t+"}","g")):[n])},clean:function(n){return m.strip(n).replace(/\s+/g," ")},count:function(n,t){if(null==n||null==t)return 0;n=e(n),t=e(t);for(var r=0,u=0,i=t.length;;){if(u=n.indexOf(t,u),-1===u)break;r++,u+=i}return r},chars:function(n){return null==n?[]:e(n).split("")},swapCase:function(n){return null==n?"":e(n).replace(/\S/g,function(n){return n===n.toUpperCase()?n.toLowerCase():n.toUpperCase()})},escapeHTML:function(n){return null==n?"":e(n).replace(/[&<>"']/g,function(n){return"&"+h[n]+";"})},unescapeHTML:function(n){return null==n?"":e(n).replace(/\&([^;]+);/g,function(n,t){var r;return t in p?p[t]:(r=t.match(/^#x([\da-fA-F]+)$/))?e.fromCharCode(parseInt(r[1],16)):(r=t.match(/^#(\d+)$/))?e.fromCharCode(~~r[1]):n})},escapeRegExp:function(n){return null==n?"":e(n).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(n,t,r,e){var u=m.chars(n);return u.splice(~~t,~~r,e),u.join("")},insert:function(n,t,r){return m.splice(n,t,0,r)},include:function(n,t){return""===t?!0:null==n?!1:-1!==e(n).indexOf(t)},join:function(){var n=c.call(arguments),t=n.shift();return null==t&&(t=""),n.join(t)},lines:function(n){return null==n?[]:e(n).split("\n")},reverse:function(n){return m.chars(n).reverse().join("")},startsWith:function(n,t){return""===t?!0:null==n||null==t?!1:(n=e(n),t=e(t),n.length>=t.length&&n.slice(0,t.length)===t)},endsWith:function(n,t){return""===t?!0:null==n||null==t?!1:(n=e(n),t=e(t),n.length>=t.length&&n.slice(n.length-t.length)===t)},succ:function(n){return null==n?"":(n=e(n),n.slice(0,-1)+e.fromCharCode(n.charCodeAt(n.length-1)+1))},titleize:function(n){return null==n?"":(n=e(n).toLowerCase(),n.replace(/(?:^|\s|-)\S/g,function(n){return n.toUpperCase()}))},camelize:function(n){return m.trim(n).replace(/[-_\s]+(.)?/g,function(n,t){return t?t.toUpperCase():""})},underscored:function(n){return m.trim(n).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(n){return m.trim(n).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(n){return m.capitalize(m.camelize(e(n).replace(/[\W_]/g," ")).replace(/\s/g,""))},humanize:function(n){return m.capitalize(m.underscored(n).replace(/_id$/,"").replace(/_/g," "))},trim:function(n,t){return null==n?"":!t&&i?i.call(n):(t=f(t),e(n).replace(new RegExp("^"+t+"+|"+t+"+$","g"),""))},ltrim:function(n,t){return null==n?"":!t&&o?o.call(n):(t=f(t),e(n).replace(new RegExp("^"+t+"+"),""))},rtrim:function(n,t){return null==n?"":!t&&a?a.call(n):(t=f(t),e(n).replace(new RegExp(t+"+$"),""))},truncate:function(n,t,r){return null==n?"":(n=e(n),r=r||"...",t=~~t,n.length>t?n.slice(0,t)+r:n)},prune:function(n,t,r){if(null==n)return"";if(n=e(n),t=~~t,r=null!=r?e(r):"...",n.length<=t)return n;var u=function(n){return n.toUpperCase()!==n.toLowerCase()?"A":" "},i=n.slice(0,t+1).replace(/.(?=\W*\w*$)/g,u);return i=i.slice(i.length-2).match(/\w\w/)?i.replace(/\s*\S+$/,""):m.rtrim(i.slice(0,i.length-1)),(i+r).length>n.length?n:n.slice(0,i.length)+r},words:function(n,t){return m.isBlank(n)?[]:m.trim(n,t).split(t||/\s+/)},pad:function(n,t,r,u){n=null==n?"":e(n),t=~~t;var i=0;switch(r?r.length>1&&(r=r.charAt(0)):r=" ",u){case"right":return i=t-n.length,n+s(r,i);case"both":return i=t-n.length,s(r,Math.ceil(i/2))+n+s(r,Math.floor(i/2));default:return i=t-n.length,s(r,i)+n}},lpad:function(n,t,r){return m.pad(n,t,r)},rpad:function(n,t,r){return m.pad(n,t,r,"right")},lrpad:function(n,t,r){return m.pad(n,t,r,"both")},sprintf:N,vsprintf:function(n,t){return t.unshift(n),N.apply(null,t)},toNumber:function(n,t){return n?(n=m.trim(n),n.match(/^-?\d+(?:\.\d+)?$/)?l(l(n).toFixed(~~t)):0/0):0},numberFormat:function(n,t,r,e){if(isNaN(n)||null==n)return"";n=n.toFixed(~~t),e="string"==typeof e?e:",";var u=n.split("."),i=u[0],a=u[1]?(r||".")+u[1]:"";return i.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+e)+a},strRight:function(n,t){if(null==n)return"";n=e(n),t=null!=t?e(t):t;var r=t?n.indexOf(t):-1;return~r?n.slice(r+t.length,n.length):n},strRightBack:function(n,t){if(null==n)return"";n=e(n),t=null!=t?e(t):t;var r=t?n.lastIndexOf(t):-1;return~r?n.slice(r+t.length,n.length):n},strLeft:function(n,t){if(null==n)return"";n=e(n),t=null!=t?e(t):t;var r=t?n.indexOf(t):-1;return~r?n.slice(0,r):n},strLeftBack:function(n,t){if(null==n)return"";n+="",t=null!=t?""+t:t;var r=n.lastIndexOf(t);return~r?n.slice(0,r):n},toSentence:function(n,t,r,e){t=t||", ",r=r||" and ";var u=n.slice(),i=u.pop();return n.length>2&&e&&(r=m.rtrim(t)+r),u.length?u.join(t)+r+i:i},toSentenceSerial:function(){var n=c.call(arguments);return n[3]=!0,m.toSentence.apply(m,n)},slugify:function(n){if(null==n)return"";var t="ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",r="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",u=new RegExp(f(t),"g");return n=e(n).toLowerCase().replace(u,function(n){var e=t.indexOf(n);return r.charAt(e)||"-"}),m.dasherize(n.replace(/[^\w\s-]/g,""))},surround:function(n,t){return[t,n,t].join("")},quote:function(n,t){return m.surround(n,t||'"')},unquote:function(n,t){return t=t||'"',n[0]===t&&n[n.length-1]===t?n.slice(1,n.length-1):n},exports:function(){var n={};for(var t in this)this.hasOwnProperty(t)&&!t.match(/^(?:include|contains|reverse)$/)&&(n[t]=this[t]);return n},repeat:function(n,t,r){if(null==n)return"";if(t=~~t,null==r)return s(e(n),t);for(var u=[];t>0;u[--t]=n);return u.join(r)},naturalCmp:function(n,t){if(n==t)return 0;if(!n)return-1;if(!t)return 1;for(var r=/(\.\d+)|(\d+)|(\D+)/g,u=e(n).toLowerCase().match(r),i=e(t).toLowerCase().match(r),a=Math.min(u.length,i.length),o=0;a>o;o++){var l=u[o],s=i[o];if(l!==s){var c=parseInt(l,10);if(!isNaN(c)){var f=parseInt(s,10);if(!isNaN(f)&&c-f)return c-f}return s>l?-1:1}}return u.length===i.length?u.length-i.length:t>n?-1:1},levenshtein:function(n,t){if(null==n&&null==t)return 0;if(null==n)return e(t).length;if(null==t)return e(n).length;n=e(n),t=e(t);for(var r,u,i=[],a=0;a<=t.length;a++)for(var o=0;o<=n.length;o++)u=a&&o?n.charAt(o-1)===t.charAt(a-1)?r:Math.min(i[o],i[o-1],r)+1:a+o,r=i[o],i[o]=u;return i.pop()},toBoolean:function(n,t,r){return"number"==typeof n&&(n=""+n),"string"!=typeof n?!!n:(n=m.trim(n),u(n,t||["true","1"])?!0:u(n,r||["false","0"])?!1:void 0)}};m.strip=m.trim,m.lstrip=m.ltrim,m.rstrip=m.rtrim,m.center=m.lrpad,m.rjust=m.lpad,m.ljust=m.rpad,m.contains=m.include,m.q=m.quote,m.toBool=m.toBoolean,"undefined"!=typeof r&&("undefined"!=typeof t&&t.exports&&(t.exports=m),r._s=m),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return m}),n._=n._||{},n._.string=n._.str=m}(this,String)},{}],3:[function(n,t,r){(function(){var n=this,e=n._,u=Array.prototype,i=Object.prototype,a=Function.prototype,o=u.push,l=u.slice,s=u.concat,c=i.toString,f=i.hasOwnProperty,p=Array.isArray,h=Object.keys,g=a.bind,N=function(n){return n instanceof N?n:this instanceof N?void(this._wrapped=n):new N(n)};"undefined"!=typeof r?("undefined"!=typeof t&&t.exports&&(r=t.exports=N),r._=N):n._=N,N.VERSION="1.7.0";var m=function(n,t,r){if(void 0===t)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}};N.iteratee=function(n,t,r){return null==n?N.identity:N.isFunction(n)?m(n,t,r):N.isObject(n)?N.matches(n):N.property(n)},N.each=N.forEach=function(n,t,r){if(null==n)return n;t=m(t,r);var e,u=n.length;if(u===+u)for(e=0;u>e;e++)t(n[e],e,n);else{var i=N.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},N.map=N.collect=function(n,t,r){if(null==n)return[];t=N.iteratee(t,r);for(var e,u=n.length!==+n.length&&N.keys(n),i=(u||n).length,a=Array(i),o=0;i>o;o++)e=u?u[o]:o,a[o]=t(n[e],e,n);return a};var v="Reduce of empty array with no initial value";N.reduce=N.foldl=N.inject=function(n,t,r,e){null==n&&(n=[]),t=m(t,e,4);var u,i=n.length!==+n.length&&N.keys(n),a=(i||n).length,o=0;if(arguments.length<3){if(!a)throw new TypeError(v);r=n[i?i[o++]:o++]}for(;a>o;o++)u=i?i[o]:o,r=t(r,n[u],u,n);return r},N.reduceRight=N.foldr=function(n,t,r,e){null==n&&(n=[]),t=m(t,e,4);var u,i=n.length!==+n.length&&N.keys(n),a=(i||n).length;if(arguments.length<3){if(!a)throw new TypeError(v);r=n[i?i[--a]:--a]}for(;a--;)u=i?i[a]:a,r=t(r,n[u],u,n);return r},N.find=N.detect=function(n,t,r){var e;return t=N.iteratee(t,r),N.some(n,function(n,r,u){return t(n,r,u)?(e=n,!0):void 0}),e},N.filter=N.select=function(n,t,r){var e=[];return null==n?e:(t=N.iteratee(t,r),N.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e)},N.reject=function(n,t,r){return N.filter(n,N.negate(N.iteratee(t)),r)},N.every=N.all=function(n,t,r){if(null==n)return!0;t=N.iteratee(t,r);var e,u,i=n.length!==+n.length&&N.keys(n),a=(i||n).length;for(e=0;a>e;e++)if(u=i?i[e]:e,!t(n[u],u,n))return!1;return!0},N.some=N.any=function(n,t,r){if(null==n)return!1;t=N.iteratee(t,r);var e,u,i=n.length!==+n.length&&N.keys(n),a=(i||n).length;for(e=0;a>e;e++)if(u=i?i[e]:e,t(n[u],u,n))return!0;return!1},N.contains=N.include=function(n,t){return null==n?!1:(n.length!==+n.length&&(n=N.values(n)),N.indexOf(n,t)>=0)},N.invoke=function(n,t){var r=l.call(arguments,2),e=N.isFunction(t);return N.map(n,function(n){return(e?t:n[t]).apply(n,r)})},N.pluck=function(n,t){return N.map(n,N.property(t))},N.where=function(n,t){return N.filter(n,N.matches(t))},N.findWhere=function(n,t){return N.find(n,N.matches(t))},N.max=function(n,t,r){var e,u,i=-1/0,a=-1/0;if(null==t&&null!=n){n=n.length===+n.length?n:N.values(n);for(var o=0,l=n.length;l>o;o++)e=n[o],e>i&&(i=e)}else t=N.iteratee(t,r),N.each(n,function(n,r,e){u=t(n,r,e),(u>a||u===-1/0&&i===-1/0)&&(i=n,a=u)});return i},N.min=function(n,t,r){var e,u,i=1/0,a=1/0;if(null==t&&null!=n){n=n.length===+n.length?n:N.values(n);for(var o=0,l=n.length;l>o;o++)e=n[o],i>e&&(i=e)}else t=N.iteratee(t,r),N.each(n,function(n,r,e){u=t(n,r,e),(a>u||1/0===u&&1/0===i)&&(i=n,a=u)});return i},N.shuffle=function(n){for(var t,r=n&&n.length===+n.length?n:N.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=N.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},N.sample=function(n,t,r){return null==t||r?(n.length!==+n.length&&(n=N.values(n)),n[N.random(n.length-1)]):N.shuffle(n).slice(0,Math.max(0,t))},N.sortBy=function(n,t,r){return t=N.iteratee(t,r),N.pluck(N.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),"value")};var d=function(n){return function(t,r,e){var u={};return r=N.iteratee(r,e),N.each(t,function(e,i){var a=r(e,i,t);n(u,e,a)}),u}};N.groupBy=d(function(n,t,r){N.has(n,r)?n[r].push(t):n[r]=[t]}),N.indexBy=d(function(n,t,r){n[r]=t}),N.countBy=d(function(n,t,r){N.has(n,r)?n[r]++:n[r]=1}),N.sortedIndex=function(n,t,r,e){r=N.iteratee(r,e,1);for(var u=r(t),i=0,a=n.length;a>i;){var o=i+a>>>1;r(n[o])<u?i=o+1:a=o}return i},N.toArray=function(n){return n?N.isArray(n)?l.call(n):n.length===+n.length?N.map(n,N.identity):N.values(n):[]},N.size=function(n){return null==n?0:n.length===+n.length?n.length:N.keys(n).length},N.partition=function(n,t,r){t=N.iteratee(t,r);var e=[],u=[];return N.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},N.first=N.head=N.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:0>t?[]:l.call(n,0,t)},N.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},N.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:l.call(n,Math.max(n.length-t,0))},N.rest=N.tail=N.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},N.compact=function(n){return N.filter(n,N.identity)};var E=function(n,t,r,e){if(t&&N.every(n,N.isArray))return s.apply(e,n);for(var u=0,i=n.length;i>u;u++){var a=n[u];N.isArray(a)||N.isArguments(a)?t?o.apply(e,a):E(a,t,r,e):r||e.push(a)}return e};N.flatten=function(n,t){return E(n,t,!1,[])},N.without=function(n){return N.difference(n,l.call(arguments,1))},N.uniq=N.unique=function(n,t,r,e){if(null==n)return[];N.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=N.iteratee(r,e));for(var u=[],i=[],a=0,o=n.length;o>a;a++){var l=n[a];if(t)a&&i===l||u.push(l),i=l;else if(r){var s=r(l,a,n);N.indexOf(i,s)<0&&(i.push(s),u.push(l))}else N.indexOf(u,l)<0&&u.push(l)}return u},N.union=function(){return N.uniq(E(arguments,!0,!0,[]))},N.intersection=function(n){if(null==n)return[];for(var t=[],r=arguments.length,e=0,u=n.length;u>e;e++){var i=n[e];if(!N.contains(t,i)){for(var a=1;r>a&&N.contains(arguments[a],i);a++);a===r&&t.push(i)}}return t},N.difference=function(n){var t=E(l.call(arguments,1),!0,!0,[]);return N.filter(n,function(n){return!N.contains(t,n)})},N.zip=function(n){if(null==n)return[];for(var t=N.max(arguments,"length").length,r=Array(t),e=0;t>e;e++)r[e]=N.pluck(arguments,e);return r},N.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},N.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=N.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}for(;u>e;e++)if(n[e]===t)return e;return-1},N.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=n.length;for("number"==typeof r&&(e=0>r?e+r+1:Math.min(e,r+1));--e>=0;)if(n[e]===t)return e;return-1},N.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var y=function(){};N.bind=function(n,t){var r,e;if(g&&n.bind===g)return g.apply(n,l.call(arguments,1));if(!N.isFunction(n))throw new TypeError("Bind must be called on a function");return r=l.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(l.call(arguments)));y.prototype=n.prototype;var u=new y;y.prototype=null;var i=n.apply(u,r.concat(l.call(arguments)));return N.isObject(i)?i:u}},N.partial=function(n){var t=l.call(arguments,1);return function(){for(var r=0,e=t.slice(),u=0,i=e.length;i>u;u++)e[u]===N&&(e[u]=arguments[r++]);for(;r<arguments.length;)e.push(arguments[r++]);return n.apply(this,e)}},N.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=N.bind(n[r],n);return n},N.memoize=function(n,t){var r=function(e){var u=r.cache,i=t?t.apply(this,arguments):e;return N.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},N.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},N.defer=function(n){return N.delay.apply(N,[n,1].concat(l.call(arguments,1)))},N.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var l=function(){o=r.leading===!1?0:N.now(),a=null,i=n.apply(e,u),a||(e=u=null)};return function(){var s=N.now();o||r.leading!==!1||(o=s);var c=t-(s-o);return e=this,u=arguments,0>=c||c>t?(clearTimeout(a),a=null,o=s,i=n.apply(e,u),a||(e=u=null)):a||r.trailing===!1||(a=setTimeout(l,c)),i}},N.debounce=function(n,t,r){var e,u,i,a,o,l=function(){var s=N.now()-a;t>s&&s>0?e=setTimeout(l,t-s):(e=null,r||(o=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,a=N.now();var s=r&&!e;return e||(e=setTimeout(l,t)),s&&(o=n.apply(i,u),i=u=null),o}},N.wrap=function(n,t){return N.partial(t,n)},N.negate=function(n){return function(){return!n.apply(this,arguments)}},N.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},N.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},N.before=function(n,t){var r;return function(){return--n>0?r=t.apply(this,arguments):t=null,r}},N.once=N.partial(N.before,2),N.keys=function(n){if(!N.isObject(n))return[];if(h)return h(n);var t=[];for(var r in n)N.has(n,r)&&t.push(r);return t},N.values=function(n){for(var t=N.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},N.pairs=function(n){for(var t=N.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},N.invert=function(n){for(var t={},r=N.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},N.functions=N.methods=function(n){var t=[];for(var r in n)N.isFunction(n[r])&&t.push(r);return t.sort()},N.extend=function(n){if(!N.isObject(n))return n;for(var t,r,e=1,u=arguments.length;u>e;e++){t=arguments[e];for(r in t)f.call(t,r)&&(n[r]=t[r])}return n},N.pick=function(n,t,r){var e,u={};if(null==n)return u;if(N.isFunction(t)){t=m(t,r);for(e in n){var i=n[e];t(i,e,n)&&(u[e]=i)}}else{var a=s.apply([],l.call(arguments,1));n=new Object(n);for(var o=0,c=a.length;c>o;o++)e=a[o],e in n&&(u[e]=n[e])}return u},N.omit=function(n,t,r){if(N.isFunction(t))t=N.negate(t);else{var e=N.map(s.apply([],l.call(arguments,1)),String);t=function(n,t){return!N.contains(e,t)}}return N.pick(n,t,r)},N.defaults=function(n){if(!N.isObject(n))return n;for(var t=1,r=arguments.length;r>t;t++){var e=arguments[t];for(var u in e)void 0===n[u]&&(n[u]=e[u])}return n},N.clone=function(n){return N.isObject(n)?N.isArray(n)?n.slice():N.extend({},n):n},N.tap=function(n,t){return t(n),n};var O=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof N&&(n=n._wrapped),t instanceof N&&(t=t._wrapped);var u=c.call(n);if(u!==c.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}if("object"!=typeof n||"object"!=typeof t)return!1;
for(var i=r.length;i--;)if(r[i]===n)return e[i]===t;var a=n.constructor,o=t.constructor;if(a!==o&&"constructor"in n&&"constructor"in t&&!(N.isFunction(a)&&a instanceof a&&N.isFunction(o)&&o instanceof o))return!1;r.push(n),e.push(t);var l,s;if("[object Array]"===u){if(l=n.length,s=l===t.length)for(;l--&&(s=O(n[l],t[l],r,e)););}else{var f,p=N.keys(n);if(l=p.length,s=N.keys(t).length===l)for(;l--&&(f=p[l],s=N.has(t,f)&&O(n[f],t[f],r,e)););}return r.pop(),e.pop(),s};N.isEqual=function(n,t){return O(n,t,[],[])},N.isEmpty=function(n){if(null==n)return!0;if(N.isArray(n)||N.isString(n)||N.isArguments(n))return 0===n.length;for(var t in n)if(N.has(n,t))return!1;return!0},N.isElement=function(n){return!(!n||1!==n.nodeType)},N.isArray=p||function(n){return"[object Array]"===c.call(n)},N.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},N.each(["Arguments","Function","String","Number","Date","RegExp"],function(n){N["is"+n]=function(t){return c.call(t)==="[object "+n+"]"}}),N.isArguments(arguments)||(N.isArguments=function(n){return N.has(n,"callee")}),"function"!=typeof/./&&(N.isFunction=function(n){return"function"==typeof n||!1}),N.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},N.isNaN=function(n){return N.isNumber(n)&&n!==+n},N.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===c.call(n)},N.isNull=function(n){return null===n},N.isUndefined=function(n){return void 0===n},N.has=function(n,t){return null!=n&&f.call(n,t)},N.noConflict=function(){return n._=e,this},N.identity=function(n){return n},N.constant=function(n){return function(){return n}},N.noop=function(){},N.property=function(n){return function(t){return t[n]}},N.matches=function(n){var t=N.pairs(n),r=t.length;return function(n){if(null==n)return!r;n=new Object(n);for(var e=0;r>e;e++){var u=t[e],i=u[0];if(u[1]!==n[i]||!(i in n))return!1}return!0}},N.times=function(n,t,r){var e=Array(Math.max(0,n));t=m(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},N.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},N.now=Date.now||function(){return(new Date).getTime()};var A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},M=N.invert(A),_=function(n){var t=function(t){return n[t]},r="(?:"+N.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};N.escape=_(A),N.unescape=_(M),N.result=function(n,t){if(null==n)return void 0;var r=n[t];return N.isFunction(r)?n[t]():r};var U=0;N.uniqueId=function(n){var t=++U+"";return n?n+t:t},N.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var b=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\u2028|\u2029/g,S=function(n){return"\\"+R[n]};N.template=function(n,t,r){!t&&r&&(t=r),t=N.defaults({},t,N.templateSettings);var e=RegExp([(t.escape||b).source,(t.interpolate||b).source,(t.evaluate||b).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,a,o){return i+=n.slice(u,o).replace(L,S),u=o+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":a&&(i+="';\n"+a+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var a=new Function(t.variable||"obj","_",i)}catch(o){throw o.source=i,o}var l=function(n){return a.call(this,n,N)},s=t.variable||"obj";return l.source="function("+s+"){\n"+i+"}",l},N.chain=function(n){var t=N(n);return t._chain=!0,t};var x=function(n){return this._chain?N(n).chain():n};N.mixin=function(n){N.each(N.functions(n),function(t){var r=N[t]=n[t];N.prototype[t]=function(){var n=[this._wrapped];return o.apply(n,arguments),x.call(this,r.apply(N,n))}})},N.mixin(N),N.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=u[n];N.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],x.call(this,r)}}),N.each(["concat","join","slice"],function(n){var t=u[n];N.prototype[n]=function(){return x.call(this,t.apply(this._wrapped,arguments))}}),N.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return N})}).call(this)},{}],4:[function(require,module,exports){var Runtime,Utils,functions,_;_=require("underscore"),functions=require("./functions"),Utils=require("./utils"),Runtime=function(){function Runtime(){this.setupGlobal(),this.setupFunctions()}return Runtime.defaultLocale="en-US",Runtime.defaultCurrencyCode="USD",Runtime.defaultCurrencySymbol="$",Runtime.prototype.global=null,Runtime.prototype.expressions=[],Runtime.prototype.form={},Runtime.prototype.values={},Runtime.prototype.customVariables={},Runtime.prototype.locale=Runtime.defaultLocale,Runtime.prototype.currencyCode=Runtime.defaultCurrencyCode,Runtime.prototype.currencySymbol=Runtime.defaultCurrencySymbol,Runtime.prototype.variables={},Runtime.prototype.results=[],Runtime.prototype.dataNames={},Runtime.prototype.elements=[],Runtime.prototype.elementsByKey={},Runtime.prototype.elementsByDataName={},Runtime.prototype.extraVariableNames=["locale","decimalSeparator","groupingSeparator","currencySymbol","currencyCode","country","deviceIdentifier","deviceModel","deviceManufacturer","platform","platformVersion","application","applicationVersion","applicationBuild","recordStatus","recordSystemCreatedAt","recordSystemUpdatedAt","recordClientCreatedAt","recordClientUpdatedAt","recordProject","recordProjectName","recordGeometry","recordAltitude","recordVerticalAccuracy","recordHorizontalAccuracy","createdAt","updatedAt","geometry"],Runtime.prototype.setupValues=function(){var n,t,r,e,u,i,a,o;e=this.variables={},r=this.dataNames;for(n in r)e["$"+r[n]]=null;for(n in this.values)u=this.values[n],e["$"+this.dataNames[n]]=this.elementsByKey[n].numeric?Number(u):u;for(o=this.extraVariableNames,i=0,a=o.length;a>i;i++)t=o[i],e["$$"+t]=this[t];for(t in this.customVariables)e[""+t]=this.customVariables[t];return functions.CONFIGURE(e)},Runtime.prototype.prepare=function(){return this.elements=Utils.flattenElements(this.form.elements),_.each(this.elements,function(n){return function(t){return n.elementsByKey[t.key]=t,n.elementsByDataName[t.data_name]=t,n.dataNames[t.key]=t.data_name}}(this))},Runtime.prototype.evaluate=function(){return this.setupValues(),this.results=_.map(this.expressions,function(n){return function(t){return n.evaluateExpression(t)}}(this))},Runtime.prototype.evaluateExpression=function(context){var evalResult,ex,rawValue,stringValue,thisVariableName,variables;variables=this.variables,thisVariableName="$"+context.dataName;try{if(stringValue=rawValue=variables[thisVariableName]=variables.$$result=void 0,context.expression&&context.expression.length>0){with(evalResult=void 0,variables)evalResult=eval(context.expression);rawValue=this.coalesce(variables[thisVariableName],variables.$$result,evalResult),stringValue=variables[thisVariableName]=this.formatValue(rawValue)}return this.createResult(context.key,rawValue,stringValue,null)}catch(_error){return ex=_error,console.log("JS ERROR : "+context.dataName+" : "+ex.toString()),variables[thisVariableName]=void 0,this.createResult(context.key,null,null,ex.toString())}},Runtime.prototype.coalesce=function(){return _.find(Utils.toArray(arguments),function(n){return!_.isUndefined(n)})},Runtime.prototype.createResult=function(n,t,r,e){return e?e=e.toString():_.isUndefined(t)?e="[Undefined]":_.isNaN(t)?e="[Not a Number]":_.isFunction(t)?e="[Function]":_.isArray(t)?e="[Array]":_.isObject(t)&&(e="[Object]"),{key:n,value:r,error:e}},Runtime.prototype.formatValue=function(n){return _.isUndefined(n)?n=null:_.isNull(n)?n=null:_.isNumber(n)?n=n:_.isDate(n)?n=n.toString():_.isArray(n)?n=n.map(this.formatValue).join(", "):_.isRegExp(n)?n=n.toString():_.isFunction(n)?n=null:_.isNaN(n)&&(n=null),n},Runtime.prototype.setupGlobal=function(){var n;this.global=void 0;try{this.global=Function("return this")()}catch(t){n=t,this.global=window}return this.global.$$runtime=this,this.global.$$prepare=this.prepare.bind(this),this.global.$$evaluate=this.evaluate.bind(this)},Runtime.prototype.setupFunctions=function(){var n,t;this.functions||(this.functions={}),t=[];for(n in functions)t.push(this.global[n]=this.functions[n]=functions[n]);return t},Runtime}(),module.exports=new Runtime},{"./functions":1,"./utils":5,underscore:3}],5:[function(n,t){var r,e;e=n("underscore"),r=function(){function n(){}return n.toArray=function(n){return Array.prototype.slice.call(n,0)},n.flattenElements=function(t){return e.tap([],function(r){return e.each(t,function(t){var e;return r.push(t),t.elements?(e=n.flattenElements(t.elements),Array.prototype.push.apply(r,e)):void 0})})},n}(),t.exports=r},{underscore:3}]},{},[4]);