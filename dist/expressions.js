(function e(t,r,n){function i(a,o){if(!r[a]){if(!t[a]){var l=typeof require=="function"&&require;if(!o&&l)return l(a,!0);if(u)return u(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var f=r[a]={exports:{}};t[a][0].call(f.exports,function(e){var r=t[a][1][e];return i(r?r:e)},f,f.exports,e,t,r,n)}return r[a].exports}var u=typeof require=="function"&&require;for(var a=0;a<n.length;a++)i(n[a]);return i})({1:[function(e,t,r){var n,i,u,a,o,l,s,f,c,r,p,g,m,h,v,N,y,d,E,O,A=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++){if(t in this&&this[t]===e)return t}return-1};c=e("underscore");c.str=e("underscore.string");c.mixin(c.str.exports());d=e("object-inspect");E=e("query-string");f=e("./utils");p=e("util").format;O=f.toArray;a={locale:"en_US",language:"en-US",country:"US",currencyCode:"USD",currencySymbol:"$",timeZone:"UTC",decimalSeparator:".",groupingSeparator:",",groupingSize:3};u=c.extend({},a);r={};r.NO_VALUE=void 0;r.ERROR=function(e){throw new Error(e)};r.MATH_FUNC=s=function(e){return function(){return e.apply(Math,O(arguments).map(NUM))}};r.ABS=s(Math.abs);r.ACOS=s(Math.acos);r.ACOSH=function(e){e=NUM(e);return Math.log(e+Math.sqrt(e*e-1))};r.ALERT=function(){var e,t,r;r=null;e=arguments[0];if(arguments.length>1){r=arguments[0];e=arguments[1]}t={type:"message",title:r!=null?r.toString():null,message:e!=null?e.toString():null};return $$runtime.results.push(t)};r.AND=function(){return c.find(O(arguments),function(e){return!e})===void 0};r.APPLICATION=function(){var e;return(e=u.application)!=null?e:""};r.APPLICATIONBUILD=function(){var e;return(e=u.applicationBuild)!=null?e:""};r.APPLICATIONINFO=function(e){if(e==null){e=", "}return c.compact([APPLICATION(),APPLICATIONVERSION(),APPLICATIONBUILD()]).join(e)};r.APPLICATIONVERSION=function(){var e;return(e=u.applicationVersion)!=null?e:""};r.AVERAGE=function(){var e;e=O(arguments);if(e.length===0){return NaN}return c.inject(e,function(e,t){return e+ +t},0)/e.length};r.CEILING=function(e,t){var r;if(t==null){t=1}if(t==null){t=1}t=ABS(t);e=NUM(e);if(isNaN(e)||isNaN(t)){return NaN}if(t===0){return 0}r=PRECISION(t);if(e>=0){return ROUND(Math.ceil(e/t)*t,r)}else{return-ROUND(Math.floor(Math.abs(e)/t)*t,r)}};r.CHAR=function(e){e=NUM(e);return String.fromCharCode(e)};r.CHOICEVALUE=function(e){var t;t=CHOICEVALUES(e);if(!c.isArray(t)){return NO_VALUE}if(t.length===0){return NO_VALUE}return t[0]};r.CHOICEVALUES=function(e){var t;if(!((e!=null?e.choice_values:void 0)!=null||(e!=null?e.other_values:void 0)!=null)){return NO_VALUE}if(ISBLANK(e)){return[]}t=[].concat(e.choice_values).concat(e.other_values);return c.compact(t)};n=/[\x00\x08\x0B\x0C\x0E-\x1F]/g;r.CLEAN=function(e){if(e==null){e=""}return e.replace(n,"")};r.COALESCE=function(){var e;if(arguments.length===1&&c.isArray(arguments[0])){return COALESCE.apply(null,arguments[0])}else{return(e=c.find(O(arguments),function(e){return e!=null}))!=null?e:NO_VALUE}};r.CODE=function(e){if(c.isNumber(e)){e=e.toString()}if(!c.isString(e)){return NaN}return(e!=null?e:"").charCodeAt(0)};r.COMPACT=function(e){if(!c.isArray(e)){return NO_VALUE}return c.filter(e,function(e){return e!=null})};r.CONCATENATE=function(){var e;e=c.map(O(arguments),function(e){switch(true){case c.isString(e):return e;case c.isNumber(e):return""+e;default:return""}});return e.join("")};r.CONCAT=r.CONCATENATE;r.CONFIG=function(){return u};r.CONFIGURE=function(e,t){if(t==null){t=true}if(t){c.extend(u,e)}else{u=e}return u};r.COS=s(Math.cos);r.COSH=function(e){var t;e=NUM(e);t=Math.exp(e);return(t+1/t)/2};r.COUNT=function(e){var t;if(!c.isArray(e)){return NO_VALUE}t=c.select(COMPACT(e).map(NUM),function(e){return!isNaN(e)});return t.length};r.COUNTA=function(e){if(!c.isArray(e)){return NO_VALUE}return e.length};r.COUNTBLANK=function(e){var t;if(!c.isArray(e)){return NaN}t=c.filter(e,function(e){switch(true){case e==null:return true;case c.isArray(e):return e.length===0;case c.isString(e):return c.isBlank(e);default:return false}});return t.length};r.COUNTRY=function(){return u.country||a.country};r.CURRENCYCODE=function(){return u.currencyCode||a.currencyCode};r.CURRENCYSYMBOL=function(){return u.currencySymbol||a.currencySymbol};r.DATE=function(e,t,r){e=INT(e);t=INT(t);r=INT(r);if(isNaN(e)||isNaN(t)||isNaN(r)){return NO_VALUE}return new Date(e+"/"+t+"/"+r+" 00:00:00")};r.DATEADD=function(e,t,r){var n;if(r==null){r="day"}e=DATEVALUE(e);t=INT(t);if(e==null){return NO_VALUE}if(isNaN(t)){return NO_VALUE}if(r!=="day"){return NO_VALUE}n=e.getTime();n+=t*(1e3*60*60*24);return new Date(n)};r.DATEVALUE=function(e){var t;if(c.isDate(e)){return e}if(c.isString(e)&&e.length<=10){e=e.replace(/-/g,"/")}t=new Date(e);if(isNaN(t.getTime())){return NO_VALUE}return t};r.DAY=function(e){e=DATEVALUE(e);if(e==null){return NO_VALUE}return e.getDate()};r.DECIMALSEPARATOR=function(){return u.decimalSeparator||a.decimalSeparator};r.DEGREES=function(e){e=NUM(e);if(!c.isNumber(e)){return NaN}return 180*e/Math.PI};r.DEVICEINFO=function(e){if(e==null){e=", "}return c.compact([DEVICEMANUFACTURER(),DEVICEMODEL()]).join(e)};r.DEVICEMODEL=function(){var e;return(e=u.deviceModel)!=null?e:""};r.DEVICEMANUFACTURER=function(){var e;return(e=u.deviceManufacturer)!=null?e:""};r.DOLLAR=function(e,t,r,n){var i;if(t==null){t=2}if(r==null){r=null}if(n==null){n=null}t=NUM(t);if(t==null){t=2}if(isNaN(t)){t=2}e=NUM(e);if(!c.isNumber(e)){return NO_VALUE}if(r==null){r=CURRENCYCODE()}if(n==null){n=LANGUAGE()}i={style:"currency",currency:r,minimumFractionDigits:t,maximumFractionDigits:t};return FORMATNUMBER(e,n,i)};r.EMAIL=function(){var e;return(e=CONFIG().userEmail)!=null?e:NO_VALUE};r.EVEN=function(e){e=NUM(e);if(!c.isNumber(e)){return NaN}return CEILING(e,-2,-1)};r.EXACT=function(e,t){return c.isEqual(e,t)};r.EXISTS=function(e){return c.select(O(arguments).map(ISBLANK)).length===0};r.EXP=s(Math.exp);r.FIELD=function(e){var t;t=$$runtime.elementsByDataName[e];if(!t){return NO_VALUE}return t};r.FIRST=function(e,t){return c.first(e,t)};r.MEMOIZED_FACT=[];r.FACT=function(e){var t;e=NUM(e);if(isNaN(e)){return NaN}if(e<0){return NaN}t=Math.floor(e);if(t===0||t===1){return 1}else if(MEMOIZED_FACT[t]>0){return MEMOIZED_FACT[t]}else{MEMOIZED_FACT[t]=FACT(t-1)*t;return MEMOIZED_FACT[t]}};r.MEMOIZED_FACTDOUBLE=[];r.FACTDOUBLE=function(e){var t;e=NUM(e);if(isNaN(e)){return NaN}if(e<0){return NaN}t=Math.floor(e);if(t<=1){return 1}else if(MEMOIZED_FACTDOUBLE[t]>0){return MEMOIZED_FACTDOUBLE[t]}else{MEMOIZED_FACTDOUBLE[t]=FACTDOUBLE(t-2)*t;return MEMOIZED_FACTDOUBLE[t]}};r.FALSE=function(){return false};r.FIND=function(e,t,r){var n;r=NUM(r);if(isNaN(r)){r=0}if(!(t&&t.indexOf)){return NO_VALUE}if(c.isArray(e)){return NO_VALUE}n=t.indexOf(e,r-1);if(n<0){return NO_VALUE}return n+1};r.FIXED=function(e,t,r){var n,i,u,a,o,l,s,f,c,p,g,m,h,v;if(t==null){t=2}if(r==null){r=false}e=NUM(e);t=NUM(t);if(isNaN(t)){t=2}t=MAX(t,0);t=MIN(t,20);if(isNaN(e)){return NO_VALUE}if(isNaN(t)){return NO_VALUE}r=!!r;g=Math.pow(10,t);m=parseInt(e*g);f=".";c=e.toFixed(t);o=c.indexOf(f);if(!(o>-1)){return c}l=parseInt(c.substring(0,o));n=c.substring(o+1,c.length);s="";a=GROUPINGSIZE();i=Math.pow(10,a);if(r||l<i){s=l.toString()}else{u=GROUPINGSEPARATOR();p=[];while(l>=i){h=Math.floor(l%i);v=new Array(a+1).join("0");p.push(RIGHT(v+h.toString(),a));l=Math.floor(l/i)}if(l>0){p.push(l.toString())}s=p.reverse().join(u)}if(t<1){return s}else{return s+DECIMALSEPARATOR()+n.toString()}};r.FLOOR=function(e,t){var r;if(t==null){t=1}t=ABS(t);e=NUM(e);if(isNaN(e)||isNaN(t)){return NaN}if(t===0){return 0}r=PRECISION(t);if(e>=0){return ROUND(Math.floor(e/t)*t,r)}else{return-ROUND(Math.ceil(Math.abs(e)/t)*t,r)}};r.FORMAT=function(){return p.apply(null,arguments)};r.FORMATNUMBER=function(e,t,r){var n,i;if(e==null){e=NUM(e)}if(t==null){t=LANGUAGE()}if(r==null){r={}}i="decimal";if(r.style==="currency"){i="currency"}if(r.style==="percent"){i="percent"}r.style=i;if(r.style==="currency"){if(r.currency==null){r.currency=CURRENCYCODE()}}n=c.isNumber(r.minimumSignificantDigits)||c.isNumber(r.maximumSignificantDigits);if(n){if(r.minimumSignificantDigits==null){r.minimumSignificantDigits=1}r.minimumSignificantDigits=NUM(r.minimumSignificantDigits);r.minimumSignificantDigits=MIN(MAX(r.minimumSignificantDigits,1),21);if(r.maximumSignificantDigits==null){r.maximumSignificantDigits=r.minimumSignificantDigits}r.maximumSignificantDigits=NUM(r.maximumSignificantDigits);r.maximumSignificantDigits=MIN(MAX(r.maximumSignificantDigits,1),21)}else{if(r.minimumIntegerDigits==null){r.minimumIntegerDigits=1}r.minimumIntegerDigits=NUM(r.minimumIntegerDigits);r.minimumIntegerDigits=MIN(MAX(r.minimumIntegerDigits,1),21);if(r.minimumFractionDigits==null){r.minimumFractionDigits=r.style==="currency"?2:0}r.minimumFractionDigits=NUM(r.minimumFractionDigits);r.minimumFractionDigits=MIN(MAX(r.minimumFractionDigits,0),20);if(r.style==="currency"){if(r.maximumFractionDigits==null){r.maximumFractionDigits=2}}else if(r.style==="percent"){if(r.maximumFractionDigits==null){r.maximumFractionDigits=MAX(r.minimumFractionDigits,0)}}else{if(r.maximumFractionDigits==null){r.maximumFractionDigits=MAX(r.minimumFractionDigits,3)}}r.maximumFractionDigits=NUM(r.maximumFractionDigits);r.maximumFractionDigits=MIN(MAX(r.maximumFractionDigits,0),20)}if(!c.isBoolean(r.useGrouping)){r.useGrouping=true}return l.formatNumber(e,t,r)};r.GCD=function(){var e,t,r,n,i,u,a;i=O(arguments).map(NUM);e=i.length;if(i.length===0){return NaN}if(i[0]<0){return NaN}a=i[0];for(t=r=1,u=e-1;1<=u?r<=u:r>=u;t=1<=u?++r:--r){if(i[t]<0){return NaN}n=i[t];while(a&&n){if(a>n){a%=n}else{n%=a}}a+=n}return a};r.GETRESULT=function(){return $$runtime.$$result};r.REQUEST=function(e,t){var r;if(!c.isFunction(t)){return ERROR("A callback must be provided to REQUEST")}if(c.isString(e)){e={url:e}}if(e.method==null){e.method="GET"}if(e.headers==null){e.headers={}}if(e.followRedirect==null){e.followRedirect=true}if(!c.isString(e.url)){return ERROR("A url must be provided to REQUEST")}if(c.isObject(e.qs)){r=E.stringify(e.qs);if(e.url.indexOf("?")<0){r="?"+r}e.url+=r}if(e.json!=null){e.headers["Content-Type"]="application/json";if(!c.isString(e.json)){e.body=JSON.stringify(e.json)}}if(!c.isString(e.method)){e.method="GET"}if(!c.isObject(e.headers)){e.headers={}}if(!c.isString(e.body)){e.body=null}e.followRedirect=!!e.followRedirect;return l.httpRequest(JSON.stringify(e),t)};r.GROUPINGSEPARATOR=function(){return u.groupingSeparator||a.groupingSeparator};r.GROUPINGSIZE=function(){return u.groupingSize||a.groupingSize};r.HASOTHER=function(e){return!!(e&&e.other_values&&c.isArray(e.other_values)&&e.other_values.length>0)};r.IF=function(e,t,r){if(e){return t}else{return r}};r.IFERROR=function(e,t){if(ISERR(e)){return t}else{return e}};r.INSPECT=function(e){return d(e)};r.INT=r.FLOOR;r.INVALID=function(){var e,t,r,n;t=null;r=null;if(arguments.length>1){e=FIELD(arguments[0]);t=(e!=null?e.key:void 0)||arguments[0].toString();r=arguments[1].toString()}else if(arguments.length===1){r=arguments[0].toString()}n={type:"validation",key:t,message:r};return $$runtime.results.push(n)};r.ISBLANK=function(e){var t,r,n,i,u;if(e==null){return true}if(c.isNaN(e)){return true}if(c.isBoolean(e)){return false}if(c.isNumber(e)){return false}if(c.isDate(e)){return false}if(c.isRegExp(e)){return false}if(c.isString(e)){return c.isBlank(e)}if(c.isArray(e)){return e.length===0}if(e&&(e.choice_values||e.choice_values===null||e.other_values||e.other_values===null)){t=e.choice_values;u=e.other_values;r=c.isArray(t)&&t.length>0;i=c.isArray(u)&&u.length>0;n=r||i;return!n}return Object.keys(e).length===0};r.ISERR=function(e){if(e==null){return true}if(isNaN(e)){return true}if(e instanceof Error){return true}return false};r.ISERROR=function(e){return ISERR(e)};r.ISLOGICAL=function(e){return c.isBoolean(e)};r.ISNAN=function(e){return c.isNaN(NUM(e))};r.ISEVEN=function(e){e=NUM(e);if(!c.isNumber(e)){return false}if(isNaN(e)){return false}return(Math.floor(Math.abs(e))&1)===0};r.ISNONTEXT=function(e){return!c.isString(e)};r.ISNUMBER=function(e){return c.isNumber(e)};r.ISODD=function(e){e=NUM(e);if(!c.isNumber(e)){return false}if(isNaN(e)){return false}return(Math.floor(Math.abs(e))&1)===1};r.ISSELECTED=function(e,t){if(ISBLANK(e)){return false}if(t==null){return false}if(c.isArray(t)){return t.filter(function(t){return!ISSELECTED(e,t)}).length===0}if(e&&e.choice_values){if(c.contains(e.choice_values,t)){return true}}if(e&&e.other_values){if(c.contains(e.other_values,t)){return true}}return false};r.ISTEXT=function(e){return c.isString(e)};r.LANGUAGE=function(){return u.language||a.language};r.LAST=function(e,t){return c.last(e,t)};r.LATITUDE=function(){var e;return NUM((e=CONFIG().featureGeometry)!=null?e.coordinates[1]:void 0)};r.LCM=function(){var e,t,r,n,i,u,a,o;a=O(arguments).map(function(e){return INT(e)});n=a.length;e=Math.abs(a[0]);for(i=u=1,o=n-1;u<=o;i=u+=1){t=Math.abs(a[i]);r=e;if(isNaN(t)){return NaN}while(e&&t){if(e>t){e%=t}else{t%=e}}e=Math.abs(r*a[i])/(e+t)}return e};r.LEFT=function(e,t){if(t==null){t=1}if(t==null){t=1}t=FLOOR(t);if(e==null){return NO_VALUE}if(c.isObject(e)){return NO_VALUE}if(t<0){return NO_VALUE}if(isNaN(t)){return NO_VALUE}e=e.toString();return e.substring(0,t)};r.LEN=function(e){var t;if(e==null){return 0}if(c.isNaN(e)){return 0}t=function(){switch(true){case c.isArray(e):return e.length;case c.isDate(e):return e.toString().length;case c.isString(e):return e.length;case c.isRegExp(e):return e.toString().length;case c.isObject(e):return Object.keys(e).length;default:return e.toString().length}}();return t!=null?t:0};r.LN=s(Math.log);r.LOCALE=function(){return u.locale||a.locale};r.LOG=function(e,t){e=NUM(e);t=NUM(t!=null?t:10);if(t==null){return NaN}if(isNaN(t)){return NaN}return Math.log(e)/Math.log(t)};r.LOG10=function(e){return LOG(e,10)};r.LONGITUDE=function(){var e;return NUM((e=CONFIG().featureGeometry)!=null?e.coordinates[0]:void 0)};r.LOWER=function(e){if(e==null){return NO_VALUE}if(c.isArray(e)){return NO_VALUE}if(c.isObject(e)){return NO_VALUE}return e.toString().toLowerCase()};r.LPAD=function(e,t,r){if(r==null){r=" "}t=FLOOR(t);if(e==null){e=""}e=e.toString();if(!c.isNumber(t)){return NO_VALUE}if(!c.isString(r)){return NO_VALUE}return RIGHT(Array(t).join(r)+e,t)};r.MAX=function(){var e,t;t=c.flatten(O(arguments));t=c.map(t,NUM);if(t.length===0){return NO_VALUE}e=c.some(t,isNaN);if(e){return NO_VALUE}return Math.max.apply(Math,t)};r.MAXA=function(){if(arguments.length<1){return NO_VALUE}if(!c.isArray(arguments[0])){return NO_VALUE}return MAX.apply(null,arguments[0])};r.MEDIAN=function(){var e,t,r;r=c.flatten(O(arguments));r=c.map(r,NUM);if(!c.isArray(r)){return NO_VALUE}if(r.length===0){return NO_VALUE}t=c.some(r,isNaN);if(t){return NO_VALUE}r.sort(function(e,t){return e-t});e=Math.floor(r.length/2);if(r.length%2){return r[e]}else{return(r[e-1]+r[e])/2}};r.MID=function(e,t,r){t=FLOOR(t);r=FLOOR(r);if(e==null){return NO_VALUE}if(c.isObject(e)){return NO_VALUE}if(t<1){return NO_VALUE}if(isNaN(t)){return NO_VALUE}if(r<0){return NO_VALUE}if(isNaN(r)){return NO_VALUE}e=e.toString();return e.substr(t-1,r)};r.MIN=function(){var e,t;t=c.flatten(O(arguments));t=c.map(t,NUM);if(t.length===0){return NO_VALUE}e=c.some(t,isNaN);if(e){return NO_VALUE}return Math.min.apply(Math,t)};r.MINA=function(){if(arguments.length<1){return NO_VALUE}if(!c.isArray(arguments[0])){return NO_VALUE}return MIN.apply(null,arguments[0])};r.MOD=function(e,t){var r;e=NUM(e);t=NUM(t);if(isNaN(e)){return NaN}if(isNaN(t)){return NaN}if(t===0){return NaN}r=Math.abs(e%t);if(t>0){return r}else{return-r}};r.MONTH=function(e){e=DATEVALUE(e);if(e==null){return NO_VALUE}return e.getMonth()+1};r.N=function(e){if(c.isNumber(e)){return e}if(e===true){return 1}if(e===false){return 0}return 0};r.NOT=function(e){return!(e!=null?e:false)};r.NUM=function(e){if(isNaN(e)){return NaN}return parseFloat(e)};r.NUMS=function(){return O(arguments).map(NUM)};r.ODD=function(e){var t;e=NUM(e);if(!c.isNumber(e)){return NaN}t=Math.ceil(Math.abs(e));t=t&1?t:t+1;if(e>=0){return t}else{return-t}};r.OFF=function(){var e,t,r,n;e=arguments;if(arguments.length===3){r=arguments[0],n=arguments[1],t=arguments[2]}if(arguments.length===2){n=arguments[0],t=arguments[1]}if(r==null){r="on"}if(!c.isString(r)){ERROR("name must be a string")}if(!c.isString(n)){ERROR("param must be a string")}if(t!=null&&!c.isFunction(t)){ERROR("callback must be a function")}return $$runtime.removeHook(r,n,t)};r.ON=function(){var e,t,r,n;e=arguments;if(arguments.length===3){r=arguments[0],n=arguments[1],t=arguments[2]}if(arguments.length===2){n=arguments[0],t=arguments[1]}if(r==null){r="on"}if(!c.isString(r)){ERROR("name must be a string")}if(!c.isString(n)){ERROR("param must be a string")}if(!c.isFunction(t)){ERROR("callback must be a function")}return $$runtime.addHook(r,n,t)};r.ONCE=function(e){var t;return(t=$$runtime.$$currentValue)!=null?t:e};r.OPENURL=function(e){if(!c.isString(e)){return NO_VALUE}return $$runtime.results.push({type:"open",value:JSON.stringify(e)})};r.OR=function(){return c.find(O(arguments),function(e){return e})!==void 0};r.OTHER=function(e){if(!HASOTHER(e)){return NO_VALUE}if(ISBLANK(e.other_values)){return NO_VALUE}return e.other_values[0]};r.PI=function(){return Math.PI};r.PLATFORM=function(){var e;return(e=u.platform)!=null?e:""};r.PLATFORMINFO=function(e){if(e==null){e=", "}return c.compact([PLATFORM(),PLATFORMVERSION()]).join(e)};r.PLATFORMVERSION=function(){var e;return(e=u.platformVersion)!=null?e:""};r.POWER=function(e,t){e=NUM(e);t=NUM(t);if(isNaN(e)){return NaN}if(isNaN(t)){return NaN}return Math.pow(e,t)};r.PRECISION=function(e){var t;e=NUM(e);if(ISNAN(e)){return NaN}t=(e+"").split(".");if(t.length<2){return 0}return t[1].length};r.PRODUCT=function(){var e,t;t=O(arguments).map(NUM);if(t.length===0){return NaN}e=c.some(t,isNaN);if(e){return NaN}return c.inject(t,function(e,t){return e*=t},1)};r.PROGRESS=function(){var e,t,r;r=null;e=arguments[0];if(arguments.length>1){r=arguments[0];e=arguments[1]}t={type:"progress",title:r!=null?r.toString():null,message:e!=null?e.toString():null};return $$runtime.results.push(t)};r.PROJECTID=function(){var e;return(e=CONFIG().recordProject)!=null?e:NO_VALUE};r.PROJECTNAME=function(){var e;return(e=CONFIG().recordProjectName)!=null?e:NO_VALUE};r.PROPER=function(e){if(e==null){return NO_VALUE}if(c.isArray(e)){return NO_VALUE}if(c.isObject(e)){return NO_VALUE}return c.titleize(e.toString())};r.QUOTIENT=function(e,t){e=NUM(e);t=NUM(t);if(isNaN(e)){return NaN}if(isNaN(t)){return NaN}if(t===0){return NaN}return parseInt(e/t,10)};r.RADIANS=function(e){e=NUM(e);return e/180*Math.PI};r.RAND=function(){return Math.random()};r.RANDBETWEEN=function(e,t){e=NUM(e);t=NUM(t);if(isNaN(e)){return NaN}if(isNaN(t)){return NaN}return e+Math.ceil((t-e+1)*Math.random())-1};r.RECORDID=function(){var e;return(e=CONFIG().recordID)!=null?e:NO_VALUE};r.REPEATABLEID=function(){var e;return(e=CONFIG().featureID)!=null?e:NO_VALUE};r.REPEATABLENUMBER=function(){if(CONFIG().featureIndex==null){return NO_VALUE}return CONFIG().featureIndex+1};r.REPEATABLEVALUES=function(e,t){var r,n;r=$$runtime.elementsByDataName[t];if(!r){return NO_VALUE}n=f.nearestRepeatable(r);if(!n){return NO_VALUE}return f.repeatableValues(n,e,t)};r.REPEATABLESUM=function(e,t){return SUM.apply(null,c.reject(REPEATABLEVALUES(e,t),isNaN))};r.REPLACE=function(e,t,r,n){var i,u;t=FLOOR(t);r=FLOOR(r);if(e==null){return NO_VALUE}if(arguments.length<4){return NO_VALUE}if(c.isObject(e)){return NO_VALUE}if(t<1){return NO_VALUE}if(isNaN(t)){return NO_VALUE}if(r<0){return NO_VALUE}if(isNaN(r)){return NO_VALUE}e=e.toString();i=e.substr(0,t-1);u=e.substr(t-1+r);return i+n+u};r.RESETCONFIG=function(){return u=c.extend({},a)};r.RIGHT=function(e,t){if(t==null){t=1}t=FLOOR(t);if(e==null){return NO_VALUE}if(c.isObject(e)){return NO_VALUE}if(t<0){return NO_VALUE}if(isNaN(t)){return NO_VALUE}e=e.toString();return e.substring(e.length-t)};r.ROLE=function(){var e;return(e=CONFIG().userRoleName)!=null?e:NO_VALUE};r.ROUND=function(e,t){if(t==null){t=0}e=NUM(e);t=NUM(t);return Math.round(e*Math.pow(10,t))/Math.pow(10,t)};r.ROUNDDOWN=function(e,t){var r;if(t==null){t=0}e=NUM(e);t=NUM(t);r=e>0?1:-1;return r*Math.floor(Math.abs(e)*Math.pow(10,t))/Math.pow(10,t)};r.ROUNDUP=function(e,t){var r;if(t==null){t=0}e=NUM(e);t=NUM(t);r=e>0?1:-1;return r*Math.ceil(Math.abs(e)*Math.pow(10,t))/Math.pow(10,t)};r.RPAD=function(e,t,r){if(r==null){r=" "}t=FLOOR(t);if(e==null){e=""}e=e.toString();if(!c.isNumber(t)){return NO_VALUE}if(!c.isString(r)){return NO_VALUE}return LEFT(e+Array(t).join(r),t)};r.SEARCH=function(e,t,r){var n;if(r==null){r=1}r=NUM(r);if(isNaN(r)){r=1}if(c.isNumber(t)){t=t.toString()}if(c.isNumber(e)){e=e.toString()}if(!c.isString(e)){return NO_VALUE}if(!c.isString(t)){return NO_VALUE}if(e===""){return 1}n=t.toLowerCase().indexOf(e.toLowerCase(),r-1);if(n<0){return NO_VALUE}return n+1};r.SETCHOICEFILTER=function(e,t){var r;r=t!=null?!c.isArray(t)?[t]:t:null;return SETFORMATTRIBUTES(e,{choice_filter:r})};r.SETCHOICES=function(e,t){var r,n,i,u;if(!(t===null||c.isArray(t))){return NO_VALUE}n=null;if(t){n=[];for(i=0,u=t.length;i<u;i++){r=t[i];switch(true){case c.isString(r):n.push({label:r,value:r});break;case c.isNumber(r):n.push({label:r.toString(),value:r.toString()});break;case c.isArray(r):if(r.length>1){n.push({label:r[0],value:r[1]})}else if(r.length===1){n.push({label:r[0],value:r[0]})}break;case c.isObject(r):n.push({label:r.label,value:r.value||r.label})}}}return SETFORMATTRIBUTES(e,{choices:n})};i=["auto_populate_location","auto_populate_minimum_accuracy","photo_quality","video_quality","allow_photo_gallery","allow_video_gallery","allow_draft_records","allow_manual_location","warn_on_location_accuracy","title"];r.SETCONFIGURATION=function(e){var t,r,n,u;n=[];for(t in e){u=e[t];if(!c.contains(i,t)){continue}u=u!=null?JSON.stringify(u):null;r={type:"configure",attribute:t.toString(),value:u};n.push($$runtime.results.push(r))}return n};r.SETDESCRIPTION=function(e,t){return SETFORMATTRIBUTES(e,{description:t!=null?t.toString():null})};r.SETDISABLED=function(e,t){return SETFORMATTRIBUTES(e,{disabled:t!=null?!!t:null})};r.SETHIDDEN=function(e,t){return SETFORMATTRIBUTES(e,{hidden:t!=null?!!t:null})};r.SETLABEL=function(e,t){return SETFORMATTRIBUTES(e,{label:t!=null?t.toString():null})};r.SETMAXLENGTH=function(e,t){return SETFORMATTRIBUTES(e,{max_length:t!=null?+t:null})};r.SETMINLENGTH=function(e,t){return SETFORMATTRIBUTES(e,{min_length:t!=null?+t:null})};r.SETREQUIRED=function(e,t){return SETFORMATTRIBUTES(e,{required:t!=null?!!t:null})};r.SETRESULT=function(e){return $$runtime.$$result=e};r.SETTIMEOUT=function(e,t){return l.setTimeout(e,t)};r.CLEARTIMEOUT=function(e){return l.clearTimeout(e)};r.SETINTERVAL=function(e,t){return l.setInterval(e,t)};r.CLEARINTERVAL=function(e){return l.clearInterval(e)};r.SETVALUE=function(e,t){var r,n;r=FIELD(e);if(r!=null&&t!=null){if(!f.isSetValueSupported(r.type)){return}t=f.makeValue(r,t)}n={type:"set-value",key:(r!=null?r.key:void 0)||e,value:JSON.stringify(t)};return $$runtime.results.push(n)};o=["label","description","required","hidden","disabled","min_length","max_length","choices","choice_filter"];r.SETFORMATTRIBUTES=function(e,t){var r,n,i,u,a;n=FIELD(e);if(!n){return NO_VALUE}u=[];for(r in t){a=t[r];if(!c.contains(o,r)){continue}a=a!=null?JSON.stringify(a):null;i={type:"update-element",key:n.key,attribute:r.toString(),value:a};u.push($$runtime.results.push(i))}return u};r.SHOWERRORS=function(e){if(e==null){e=true}return $$runtime.showErrors=e};r.SHUFFLE=function(e){return c.shuffle(O(e))};r.SIGN=function(e){e=NUM(e);if(isNaN(e)){return NaN}switch(true){case e>0:return 1;case e<0:return-1;case e===0:return 0}};r.SIN=s(Math.sin);r.SINH=function(e){var t;e=NUM(e);t=Math.exp(e);return(t-1/t)/2};r.SQRT=s(Math.sqrt);r.SQRTPI=function(e){return SQRT(NUM(e)*Math.PI)};r.STATUS=function(){var e;return(e=CONFIG().recordStatus)!=null?e:NO_VALUE};r.STATUSLABEL=function(){var e,t,r;r=(e=CONFIG().recordStatus)!=null?e:NO_VALUE;if(r){return(t=$$runtime.statusesByValue[r])!=null?t:NO_VALUE}else{return NO_VALUE}};N={};y="default";Object.defineProperty(N,"length",{get:function(){return g.storageLength(y)},configurable:false,enumerable:false});N.key=function(e){if(!c.isNumber(+e)){return null}return g.storageKey(y,+e)};N.getItem=function(e){if(e==null){return null}return g.storageGetItem(y,e.toString())};N.setItem=function(e,t){if(e==null){return null}return g.storageSetItem(y,e.toString(),t!=null?t.toString():null)};N.removeItem=function(e){if(e==null){return null}return g.storageRemoveItem(y,e.toString())};N.clear=function(){return g.storageClear(y)};r.STORAGE=function(e){return typeof localStorage!=="undefined"&&localStorage!==null?localStorage:N};r.SUBSTITUTE=function(e,t,r,n){var i,u,a,o,l;n=FLOOR(n);if(arguments.length<3){return NO_VALUE}if(n<0){return NO_VALUE}a=!e||!c.isString(t)||!c.isString(r);if(a){return NO_VALUE}if(c.isArray(e)){return e}if(e.indexOf(t)<0){return e}e=e.toString();t=t.toString();r=r.toString();if(isNaN(n)){return e.replace(new RegExp(t,"g"),r)}else{u=e.indexOf(t,u);i=1;while(u>=0){if(i===n){o=e.substring(0,u);l=e.substring(u+t.length);return o+r+l}u=e.indexOf(t,u+1);i++}return e}};r.SUM=function(){var e,t;t=O(arguments).map(NUM);if(t.length===0){return NaN}e=c.some(t,isNaN);if(e){return NaN}return c.inject(t,function(e,t){return e+=t},0)};r.SUMSQ=function(){var e,t;t=O(arguments).map(NUM);if(t.length===0){return NaN}e=c.some(t,isNaN);if(e){return NaN}return c.inject(t,function(e,t){return e+=t*t},0)};r.T=function(e){if(e==null){return""}return e.toString()};r.TIMEADD=function(e,t,r){var n,i,u,a,o,l;if(r==null){r="hours"}if(!c.isString(e)){return NO_VALUE}if(!c.contains(["hours","minutes"],r)){return NO_VALUE}if(e.length!==5){return NO_VALUE}if(e[2]!==":"){return NO_VALUE}l=e.split(":");n=NUM(l[0]);i=NUM(l[1]);t=NUM(t);if(n>23||n<0){return NO_VALUE}if(i>59||i<0){return NO_VALUE}if(!c.isNumber(t)){return NO_VALUE}a=r==="hours"?t*60:t;u=new Date(0);u.setHours(n);u.setMinutes(i);o=u.getTime();o+=a*60*1e3;u=new Date(o);return FORMAT("%s:%s",LPAD(u.getHours(),2,"0"),LPAD(u.getMinutes(),2,"0"))};r.TIMEDIFF=function(e,t,r){var n,i,u,a,o,l,s,f,p;if(r==null){r="hours"}if(!(c.isString(e)&&c.isString(t))){return NO_VALUE}if(!c.contains(["hours","minutes"],r)){return NO_VALUE}if(e.length!==5){return NO_VALUE}if(e[2]!==":"){return NO_VALUE}if(t.length!==5){return NO_VALUE}if(t[2]!==":"){return NO_VALUE}s=e.split(":");f=t.split(":");n=NUM(s[0]);i=NUM(s[1]);a=NUM(f[0]);o=NUM(f[1]);if(n>23||n<0){return NO_VALUE}if(a>23||a<0){return NO_VALUE}if(i>59||i<0){return NO_VALUE}if(o>59||o<0){return NO_VALUE}u=n*60+i;l=a*60+o;p=l-u;p=p===0?1440:p>0?p:1440+p;if(r==="hours"){return p/60}else{return p}};r.TIMESTAMP=function(e){if(e==null){e=new Date}return FORMAT("%s-%s-%s %s:%s:%s",e.getFullYear(),LPAD(e.getMonth()+1,2,"0"),LPAD(e.getDate(),2,"0"),LPAD(e.getHours(),2,"0"),LPAD(e.getMinutes(),2,"0"),LPAD(e.getSeconds(),2,"0"))};r.TIMEZONE=function(){return u.timeZone||a.timeZone};r.TRIM=function(e){return c.trim(e)};r.TRUE=function(e){return true};r.TYPEOF=function(e){switch(true){case c.isUndefined(e):return"undefined";case c.isNull(e):return"null";case c.isNaN(e):return"nan";case c.isNumber(e):return"number";case c.isString(e):return"string";case c.isBoolean(e):return"boolean";case c.isDate(e):return"date";case c.isArray(e):return"array";case c.isRegExp(e):return"regexp";case c.isFunction(e):return"function";case c.isObject(e):return"object";default:return"unknown"}};r.UPPER=function(e){if(e==null){return NO_VALUE}if(c.isArray(e)){return NO_VALUE}if(c.isObject(e)){return NO_VALUE}return e.toString().toUpperCase()};r.USERFULLNAME=function(){var e;return(e=CONFIG().userFullName)!=null?e:NO_VALUE};r.VERSIONINFO=function(e){if(e==null){e=", "}return c.compact([DEVICEINFO(" "),PLATFORMINFO(" "),APPLICATIONINFO(" ")]).join(e)};r.YEAR=function(e){e=DATEVALUE(e);if(e==null){return NO_VALUE}return e.getFullYear()};r.X_ISNEW=function(){return CONFIG().featureIsNew===true};r.X_ISUPDATE=function(){return!X_ISNEW()};v=function(e){return c.isFunction($$runtime["$$"+e])};h=function(e,t){return $$runtime["$$"+e].apply($$runtime,t)};m=function(e,t,r){return $$runtime.invokeAsync($$runtime["$$"+e],t,r)};l=g={};g.formatNumber=function(e,t,r){var n;if(v("formatNumber")){return h("formatNumber",arguments)}else if(typeof Intl!=="undefined"){n=new Intl.NumberFormat(t,r);return n.format(e)}else{return""+e}};g.httpRequest=function(e,t){var r;r=[e];if(v("httpRequest")){return m("httpRequest",r,t)}else{return t(new Error("Not Supported"),null,null)}};g.timeouts={};g.intervals={};g.nextTimeoutID=0;g.nextIntervalID=0;g.clearTimeout=function(e){return delete g.timeouts[e]};g.setTimeout=function(e,t){var r,n,i;r=[t];if(typeof setTimeout!=="undefined"&&setTimeout!==null){return setTimeout(e,t)}else if(v("setTimeout")){n=++g.nextTimeoutID;i=g.timeouts[n]=function(){if(g.timeouts[n]!=null){delete g.timeouts[n];return e()}};m("setTimeout",r,g.timeouts[n]);return n}};g.clearInterval=function(e){if(g.intervals[e]!=null){g.clearTimeout(g.intervals[e]);return delete g.intervals[e]}};g.setInterval=function(e,t){var r,n;if(typeof setInterval!=="undefined"&&setInterval!==null){return setInterval(e,t)}else if(v("setTimeout")){r=++g.nextIntervalID;n=function(){if(g.intervals[r]!=null){g.intervals[r]=g.setTimeout(n,t);return e()}};g.intervals[r]=g.setTimeout(n,t);return r}};g.storageLength=function(e){if(A.call(e,"length")>=0){return e.length}if(v("storageLength")){return h("storageLength",arguments)}};g.storageKey=function(e,t){if(A.call(e,"key")>=0){return e.key(t)}if(v("storageKey")){return h("storageKey",arguments)}};g.storageGetItem=function(e,t){if(A.call(e,"getItem")>=0){return e.getItem(t)}if(v("storageGetItem")){return h("storageGetItem",arguments)}};g.storageSetItem=function(e,t,r){if(A.call(e,"setItem")>=0){return e.setItem(t,r)}if(v("storageSetItem")){return h("storageSetItem",arguments)}};g.storageRemoveItem=function(e,t){if(A.call(e,"removeItem")>=0){return e.removeItem(t)}if(v("storageRemoveItem")){return h("storageRemoveItem",arguments)}};g.storageClear=function(e){if(A.call(e,"clear")>=0){return e.clear()}if(v("storageClear")){return h("storageClear",arguments)}};t.exports=r},{"./utils":12,"object-inspect":3,"query-string":5,underscore:8,"underscore.string":7,util:10}],2:[function(e,t,r){if(typeof Object.create==="function"){t.exports=function n(e,t){e.super_=t;e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}})}}else{t.exports=function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e}}},{}],3:[function(e,t,r){var n=typeof Map==="function"&&Map.prototype;var i=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null;var u=n&&i&&typeof i.get==="function"?i.get:null;var a=n&&Map.prototype.forEach;var o=typeof Set==="function"&&Set.prototype;var l=Object.getOwnPropertyDescriptor&&o?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null;var s=o&&l&&typeof l.get==="function"?l.get:null;var f=o&&Set.prototype.forEach;t.exports=function R(e,t,r,n){if(!t)t={};var i=t.depth===undefined?5:t.depth;if(r===undefined)r=0;if(r>=i&&i>0&&e&&typeof e==="object"){return"[Object]"}if(n===undefined)n=[];else if(O(n,e)>=0){return"[Circular]"}function o(e,i){if(i){n=n.slice();n.push(i)}return R(e,t,r+1,n)}if(typeof e==="string"){return U(e)}else if(typeof e==="function"){var l=E(e);return"[Function"+(l?": "+l:"")+"]"}else if(e===null){return"null"}else if(v(e)){var N=Symbol.prototype.toString.call(e);return typeof e==="object"?"Object("+N+")":N}else if(b(e)){var d="<"+String(e.nodeName).toLowerCase();var _=e.attributes||[];for(var I=0;I<_.length;I++){d+=" "+_[I].name+'="'+c(_[I].value)+'"'}d+=">";if(e.childNodes&&e.childNodes.length)d+="...";d+="</"+String(e.nodeName).toLowerCase()+">";return d}else if(p(e)){if(e.length===0)return"[]";var L=Array(e.length);for(var I=0;I<e.length;I++){
L[I]=y(e,I)?o(e[I],e):""}return"[ "+L.join(", ")+" ]"}else if(h(e)){var M=[];for(var T in e){if(!y(e,T))continue;if(/[^\w$]/.test(T)){M.push(o(T)+": "+o(e[T]))}else{M.push(T+": "+o(e[T]))}}if(M.length===0)return"["+e+"]";return"{ ["+e+"] "+M.join(", ")+" }"}else if(typeof e==="object"&&typeof e.inspect==="function"){return e.inspect()}else if(A(e)){var M=[];a.call(e,function(t,r){M.push(o(r,e)+" => "+o(t,e))});return"Map ("+u.call(e)+") {"+M.join(", ")+"}"}else if(S(e)){var M=[];f.call(e,function(t){M.push(o(t,e))});return"Set ("+s.call(e)+") {"+M.join(", ")+"}"}else if(typeof e==="object"&&!g(e)&&!m(e)){var L=[],D=[];for(var T in e){if(y(e,T))D.push(T)}D.sort();for(var I=0;I<D.length;I++){var T=D[I];if(/[^\w$]/.test(T)){L.push(o(T)+": "+o(e[T],e))}else L.push(T+": "+o(e[T],e))}if(L.length===0)return"{}";return"{ "+L.join(", ")+" }"}else return String(e)};function c(e){return String(e).replace(/"/g,"&quot;")}function p(e){return d(e)==="[object Array]"}function g(e){return d(e)==="[object Date]"}function m(e){return d(e)==="[object RegExp]"}function h(e){return d(e)==="[object Error]"}function v(e){return d(e)==="[object Symbol]"}var N=Object.prototype.hasOwnProperty||function(e){return e in this};function y(e,t){return N.call(e,t)}function d(e){return Object.prototype.toString.call(e)}function E(e){if(e.name)return e.name;var t=e.toString().match(/^function\s*([\w$]+)/);if(t)return t[1]}function O(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++){if(e[r]===t)return r}return-1}function A(e){if(!u){return false}try{u.call(e);return true}catch(t){}return false}function S(e){if(!s){return false}try{s.call(e);return true}catch(t){}return false}function b(e){if(!e||typeof e!=="object")return false;if(typeof HTMLElement!=="undefined"&&e instanceof HTMLElement){return true}return typeof e.nodeName==="string"&&typeof e.getAttribute==="function"}function U(e){var t=e.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,r);return"'"+t+"'";function r(e){var t=e.charCodeAt(0);var r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];if(r)return"\\"+r;return"\\x"+(t<16?"0":"")+t.toString(16)}}},{}],4:[function(e,t,r){var n=t.exports={};var i=[];var u=false;var a;var o=-1;function l(){u=false;if(a.length){i=a.concat(i)}else{o=-1}if(i.length){s()}}function s(){if(u){return}var e=setTimeout(l);u=true;var t=i.length;while(t){a=i;i=[];while(++o<t){if(a){a[o].run()}}o=-1;t=i.length}a=null;u=false;clearTimeout(e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}i.push(new f(e,t));if(i.length===1&&!u){setTimeout(s,0)}};function f(e,t){this.fun=e;this.array=t}f.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function c(){}n.on=c;n.addListener=c;n.once=c;n.off=c;n.removeListener=c;n.removeAllListeners=c;n.emit=c;n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},{}],5:[function(e,t,r){"use strict";var n=e("strict-uri-encode");r.extract=function(e){return e.split("?")[1]||""};r.parse=function(e){if(typeof e!=="string"){return{}}e=e.trim().replace(/^(\?|#|&)/,"");if(!e){return{}}return e.split("&").reduce(function(e,t){var r=t.replace(/\+/g," ").split("=");var n=r.shift();var i=r.length>0?r.join("="):undefined;n=decodeURIComponent(n);i=i===undefined?null:decodeURIComponent(i);if(!e.hasOwnProperty(n)){e[n]=i}else if(Array.isArray(e[n])){e[n].push(i)}else{e[n]=[e[n],i]}return e},{})};r.stringify=function(e){return e?Object.keys(e).sort().map(function(t){var r=e[t];if(r===undefined){return""}if(r===null){return t}if(Array.isArray(r)){return r.sort().map(function(e){return n(t)+"="+n(e)}).join("&")}return n(t)+"="+n(r)}).filter(function(e){return e.length>0}).join("&"):""}},{"strict-uri-encode":6}],6:[function(e,t,r){"use strict";t.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},{}],7:[function(e,t,r){!function(e,n){"use strict";var i=n.prototype.trim;var u=n.prototype.trimRight;var a=n.prototype.trimLeft;var o=function(e){return e*1||0};var l=function(e,t){if(t<1)return"";var r="";while(t>0){if(t&1)r+=e;t>>=1,e+=e}return r};var s=[].slice;var f=function(e){if(e==null)return"\\s";else if(e.source)return e.source;else return"["+v.escapeRegExp(e)+"]"};function c(e,t){var r,n,i=e.toLowerCase();t=[].concat(t);for(r=0;r<t.length;r+=1){n=t[r];if(!n)continue;if(n.test&&n.test(e))return true;if(n.toLowerCase()===i)return true}}var p={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"};var g={};for(var m in p)g[p[m]]=m;g["'"]="#39";var h=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var t=l;var r=function(){if(!r.cache.hasOwnProperty(arguments[0])){r.cache[arguments[0]]=r.parse(arguments[0])}return r.format.call(null,r.cache[arguments[0]],arguments)};r.format=function(r,i){var u=1,a=r.length,o="",l,s=[],f,c,p,g,m,v;for(f=0;f<a;f++){o=e(r[f]);if(o==="string"){s.push(r[f])}else if(o==="array"){p=r[f];if(p[2]){l=i[u];for(c=0;c<p[2].length;c++){if(!l.hasOwnProperty(p[2][c])){throw new Error(h('[_.sprintf] property "%s" does not exist',p[2][c]))}l=l[p[2][c]]}}else if(p[1]){l=i[p[1]]}else{l=i[u++]}if(/[^s]/.test(p[8])&&e(l)!="number"){throw new Error(h("[_.sprintf] expecting number but found %s",e(l)))}switch(p[8]){case"b":l=l.toString(2);break;case"c":l=n.fromCharCode(l);break;case"d":l=parseInt(l,10);break;case"e":l=p[7]?l.toExponential(p[7]):l.toExponential();break;case"f":l=p[7]?parseFloat(l).toFixed(p[7]):parseFloat(l);break;case"o":l=l.toString(8);break;case"s":l=(l=n(l))&&p[7]?l.substring(0,p[7]):l;break;case"u":l=Math.abs(l);break;case"x":l=l.toString(16);break;case"X":l=l.toString(16).toUpperCase();break}l=/[def]/.test(p[8])&&p[3]&&l>=0?"+"+l:l;m=p[4]?p[4]=="0"?"0":p[4].charAt(1):" ";v=p[6]-n(l).length;g=p[6]?t(m,v):"";s.push(p[5]?l+g:g+l)}}return s.join("")};r.cache={};r.parse=function(e){var t=e,r=[],n=[],i=0;while(t){if((r=/^[^\x25]+/.exec(t))!==null){n.push(r[0])}else if((r=/^\x25{2}/.exec(t))!==null){n.push("%")}else if((r=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))!==null){if(r[2]){i|=1;var u=[],a=r[2],o=[];if((o=/^([a-z_][a-z_\d]*)/i.exec(a))!==null){u.push(o[1]);while((a=a.substring(o[0].length))!==""){if((o=/^\.([a-z_][a-z_\d]*)/i.exec(a))!==null){u.push(o[1])}else if((o=/^\[(\d+)\]/.exec(a))!==null){u.push(o[1])}else{throw new Error("[_.sprintf] huh?")}}}else{throw new Error("[_.sprintf] huh?")}r[2]=u}else{i|=2}if(i===3){throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported")}n.push(r)}else{throw new Error("[_.sprintf] huh?")}t=t.substring(r[0].length)}return n};return r}();var v={VERSION:"2.4.0",isBlank:function(e){if(e==null)e="";return/^\s*$/.test(e)},stripTags:function(e){if(e==null)return"";return n(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){e=e==null?"":n(e);return e.charAt(0).toUpperCase()+e.slice(1)},chop:function(e,t){if(e==null)return[];e=n(e);t=~~t;return t>0?e.match(new RegExp(".{1,"+t+"}","g")):[e]},clean:function(e){return v.strip(e).replace(/\s+/g," ")},count:function(e,t){if(e==null||t==null)return 0;e=n(e);t=n(t);var r=0,i=0,u=t.length;while(true){i=e.indexOf(t,i);if(i===-1)break;r++;i+=u}return r},chars:function(e){if(e==null)return[];return n(e).split("")},swapCase:function(e){if(e==null)return"";return n(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){if(e==null)return"";return n(e).replace(/[&<>"']/g,function(e){return"&"+g[e]+";"})},unescapeHTML:function(e){if(e==null)return"";return n(e).replace(/\&([^;]+);/g,function(e,t){var r;if(t in p){return p[t]}else if(r=t.match(/^#x([\da-fA-F]+)$/)){return n.fromCharCode(parseInt(r[1],16))}else if(r=t.match(/^#(\d+)$/)){return n.fromCharCode(~~r[1])}else{return e}})},escapeRegExp:function(e){if(e==null)return"";return n(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,t,r,n){var i=v.chars(e);i.splice(~~t,~~r,n);return i.join("")},insert:function(e,t,r){return v.splice(e,t,0,r)},include:function(e,t){if(t==="")return true;if(e==null)return false;return n(e).indexOf(t)!==-1},join:function(){var e=s.call(arguments),t=e.shift();if(t==null)t="";return e.join(t)},lines:function(e){if(e==null)return[];return n(e).split("\n")},reverse:function(e){return v.chars(e).reverse().join("")},startsWith:function(e,t){if(t==="")return true;if(e==null||t==null)return false;e=n(e);t=n(t);return e.length>=t.length&&e.slice(0,t.length)===t},endsWith:function(e,t){if(t==="")return true;if(e==null||t==null)return false;e=n(e);t=n(t);return e.length>=t.length&&e.slice(e.length-t.length)===t},succ:function(e){if(e==null)return"";e=n(e);return e.slice(0,-1)+n.fromCharCode(e.charCodeAt(e.length-1)+1)},titleize:function(e){if(e==null)return"";e=n(e).toLowerCase();return e.replace(/(?:^|\s|-)\S/g,function(e){return e.toUpperCase()})},camelize:function(e){return v.trim(e).replace(/[-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""})},underscored:function(e){return v.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return v.trim(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return v.capitalize(v.camelize(n(e).replace(/[\W_]/g," ")).replace(/\s/g,""))},humanize:function(e){return v.capitalize(v.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,t){if(e==null)return"";if(!t&&i)return i.call(e);t=f(t);return n(e).replace(new RegExp("^"+t+"+|"+t+"+$","g"),"")},ltrim:function(e,t){if(e==null)return"";if(!t&&a)return a.call(e);t=f(t);return n(e).replace(new RegExp("^"+t+"+"),"")},rtrim:function(e,t){if(e==null)return"";if(!t&&u)return u.call(e);t=f(t);return n(e).replace(new RegExp(t+"+$"),"")},truncate:function(e,t,r){if(e==null)return"";e=n(e);r=r||"...";t=~~t;return e.length>t?e.slice(0,t)+r:e},prune:function(e,t,r){if(e==null)return"";e=n(e);t=~~t;r=r!=null?n(r):"...";if(e.length<=t)return e;var i=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},u=e.slice(0,t+1).replace(/.(?=\W*\w*$)/g,i);if(u.slice(u.length-2).match(/\w\w/))u=u.replace(/\s*\S+$/,"");else u=v.rtrim(u.slice(0,u.length-1));return(u+r).length>e.length?e:e.slice(0,u.length)+r},words:function(e,t){if(v.isBlank(e))return[];return v.trim(e,t).split(t||/\s+/)},pad:function(e,t,r,i){e=e==null?"":n(e);t=~~t;var u=0;if(!r)r=" ";else if(r.length>1)r=r.charAt(0);switch(i){case"right":u=t-e.length;return e+l(r,u);case"both":u=t-e.length;return l(r,Math.ceil(u/2))+e+l(r,Math.floor(u/2));default:u=t-e.length;return l(r,u)+e}},lpad:function(e,t,r){return v.pad(e,t,r)},rpad:function(e,t,r){return v.pad(e,t,r,"right")},lrpad:function(e,t,r){return v.pad(e,t,r,"both")},sprintf:h,vsprintf:function(e,t){t.unshift(e);return h.apply(null,t)},toNumber:function(e,t){if(!e)return 0;e=v.trim(e);if(!e.match(/^-?\d+(?:\.\d+)?$/))return NaN;return o(o(e).toFixed(~~t))},numberFormat:function(e,t,r,n){if(isNaN(e)||e==null)return"";e=e.toFixed(~~t);n=typeof n=="string"?n:",";var i=e.split("."),u=i[0],a=i[1]?(r||".")+i[1]:"";return u.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+n)+a},strRight:function(e,t){if(e==null)return"";e=n(e);t=t!=null?n(t):t;var r=!t?-1:e.indexOf(t);return~r?e.slice(r+t.length,e.length):e},strRightBack:function(e,t){if(e==null)return"";e=n(e);t=t!=null?n(t):t;var r=!t?-1:e.lastIndexOf(t);return~r?e.slice(r+t.length,e.length):e},strLeft:function(e,t){if(e==null)return"";e=n(e);t=t!=null?n(t):t;var r=!t?-1:e.indexOf(t);return~r?e.slice(0,r):e},strLeftBack:function(e,t){if(e==null)return"";e+="";t=t!=null?""+t:t;var r=e.lastIndexOf(t);return~r?e.slice(0,r):e},toSentence:function(e,t,r,n){t=t||", ";r=r||" and ";var i=e.slice(),u=i.pop();if(e.length>2&&n)r=v.rtrim(t)+r;return i.length?i.join(t)+r+u:u},toSentenceSerial:function(){var e=s.call(arguments);e[3]=true;return v.toSentence.apply(v,e)},slugify:function(e){if(e==null)return"";var t="ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",r="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",i=new RegExp(f(t),"g");e=n(e).toLowerCase().replace(i,function(e){var n=t.indexOf(e);return r.charAt(n)||"-"});return v.dasherize(e.replace(/[^\w\s-]/g,""))},surround:function(e,t){return[t,e,t].join("")},quote:function(e,t){return v.surround(e,t||'"')},unquote:function(e,t){t=t||'"';if(e[0]===t&&e[e.length-1]===t)return e.slice(1,e.length-1);else return e},exports:function(){var e={};for(var t in this){if(!this.hasOwnProperty(t)||t.match(/^(?:include|contains|reverse)$/))continue;e[t]=this[t]}return e},repeat:function(e,t,r){if(e==null)return"";t=~~t;if(r==null)return l(n(e),t);for(var i=[];t>0;i[--t]=e){}return i.join(r)},naturalCmp:function(e,t){if(e==t)return 0;if(!e)return-1;if(!t)return 1;var r=/(\.\d+)|(\d+)|(\D+)/g,i=n(e).toLowerCase().match(r),u=n(t).toLowerCase().match(r),a=Math.min(i.length,u.length);for(var o=0;o<a;o++){var l=i[o],s=u[o];if(l!==s){var f=parseInt(l,10);if(!isNaN(f)){var c=parseInt(s,10);if(!isNaN(c)&&f-c)return f-c}return l<s?-1:1}}if(i.length===u.length)return i.length-u.length;return e<t?-1:1},levenshtein:function(e,t){if(e==null&&t==null)return 0;if(e==null)return n(t).length;if(t==null)return n(e).length;e=n(e);t=n(t);var r=[],i,u;for(var a=0;a<=t.length;a++)for(var o=0;o<=e.length;o++){if(a&&o)if(e.charAt(o-1)===t.charAt(a-1))u=i;else u=Math.min(r[o],r[o-1],i)+1;else u=a+o;i=r[o];r[o]=u}return r.pop()},toBoolean:function(e,t,r){if(typeof e==="number")e=""+e;if(typeof e!=="string")return!!e;e=v.trim(e);if(c(e,t||["true","1"]))return true;if(c(e,r||["false","0"]))return false}};v.strip=v.trim;v.lstrip=v.ltrim;v.rstrip=v.rtrim;v.center=v.lrpad;v.rjust=v.lpad;v.ljust=v.rpad;v.contains=v.include;v.q=v.quote;v.toBool=v.toBoolean;if(typeof r!=="undefined"){if(typeof t!=="undefined"&&t.exports)t.exports=v;r._s=v}if(typeof define==="function"&&define.amd)define("underscore.string",[],function(){return v});e._=e._||{};e._.string=e._.str=v}(this,String)},{}],8:[function(e,t,r){(function(){var e=this;var n=e._;var i=Array.prototype,u=Object.prototype,a=Function.prototype;var o=i.push,l=i.slice,s=u.toString,f=u.hasOwnProperty;var c=Array.isArray,p=Object.keys,g=a.bind,m=Object.create;var h=function(){};var v=function(e){if(e instanceof v)return e;if(!(this instanceof v))return new v(e);this._wrapped=e};if(typeof r!=="undefined"){if(typeof t!=="undefined"&&t.exports){r=t.exports=v}r._=v}else{e._=v}v.VERSION="1.8.3";var N=function(e,t,r){if(t===void 0)return e;switch(r==null?3:r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,u){return e.call(t,r,n,i,u)}}return function(){return e.apply(t,arguments)}};var y=function(e,t,r){if(e==null)return v.identity;if(v.isFunction(e))return N(e,t,r);if(v.isObject(e))return v.matcher(e);return v.property(e)};v.iteratee=function(e,t){return y(e,t,Infinity)};var d=function(e,t){return function(r){var n=arguments.length;if(n<2||r==null)return r;for(var i=1;i<n;i++){var u=arguments[i],a=e(u),o=a.length;for(var l=0;l<o;l++){var s=a[l];if(!t||r[s]===void 0)r[s]=u[s]}}return r}};var E=function(e){if(!v.isObject(e))return{};if(m)return m(e);h.prototype=e;var t=new h;h.prototype=null;return t};var O=function(e){return function(t){return t==null?void 0:t[e]}};var A=Math.pow(2,53)-1;var S=O("length");var b=function(e){var t=S(e);return typeof t=="number"&&t>=0&&t<=A};v.each=v.forEach=function(e,t,r){t=N(t,r);var n,i;if(b(e)){for(n=0,i=e.length;n<i;n++){t(e[n],n,e)}}else{var u=v.keys(e);for(n=0,i=u.length;n<i;n++){t(e[u[n]],u[n],e)}}return e};v.map=v.collect=function(e,t,r){t=y(t,r);var n=!b(e)&&v.keys(e),i=(n||e).length,u=Array(i);for(var a=0;a<i;a++){var o=n?n[a]:a;u[a]=t(e[o],o,e)}return u};function U(e){function t(t,r,n,i,u,a){for(;u>=0&&u<a;u+=e){var o=i?i[u]:u;n=r(n,t[o],o,t)}return n}return function(r,n,i,u){n=N(n,u,4);var a=!b(r)&&v.keys(r),o=(a||r).length,l=e>0?0:o-1;if(arguments.length<3){i=r[a?a[l]:l];l+=e}return t(r,n,i,a,l,o)}}v.reduce=v.foldl=v.inject=U(1);v.reduceRight=v.foldr=U(-1);v.find=v.detect=function(e,t,r){var n;if(b(e)){n=v.findIndex(e,t,r)}else{n=v.findKey(e,t,r)}if(n!==void 0&&n!==-1)return e[n]};v.filter=v.select=function(e,t,r){var n=[];t=y(t,r);v.each(e,function(e,r,i){if(t(e,r,i))n.push(e)});return n};v.reject=function(e,t,r){return v.filter(e,v.negate(y(t)),r)};v.every=v.all=function(e,t,r){t=y(t,r);var n=!b(e)&&v.keys(e),i=(n||e).length;for(var u=0;u<i;u++){var a=n?n[u]:u;if(!t(e[a],a,e))return false}return true};v.some=v.any=function(e,t,r){t=y(t,r);var n=!b(e)&&v.keys(e),i=(n||e).length;for(var u=0;u<i;u++){var a=n?n[u]:u;if(t(e[a],a,e))return true}return false};v.contains=v.includes=v.include=function(e,t,r,n){if(!b(e))e=v.values(e);if(typeof r!="number"||n)r=0;return v.indexOf(e,t,r)>=0};v.invoke=function(e,t){var r=l.call(arguments,2);var n=v.isFunction(t);return v.map(e,function(e){var i=n?t:e[t];return i==null?i:i.apply(e,r)})};v.pluck=function(e,t){return v.map(e,v.property(t))};v.where=function(e,t){return v.filter(e,v.matcher(t))};v.findWhere=function(e,t){return v.find(e,v.matcher(t))};v.max=function(e,t,r){var n=-Infinity,i=-Infinity,u,a;if(t==null&&e!=null){e=b(e)?e:v.values(e);for(var o=0,l=e.length;o<l;o++){u=e[o];if(u>n){n=u}}}else{t=y(t,r);v.each(e,function(e,r,u){a=t(e,r,u);if(a>i||a===-Infinity&&n===-Infinity){n=e;i=a}})}return n};v.min=function(e,t,r){var n=Infinity,i=Infinity,u,a;if(t==null&&e!=null){e=b(e)?e:v.values(e);for(var o=0,l=e.length;o<l;o++){u=e[o];if(u<n){n=u}}}else{t=y(t,r);v.each(e,function(e,r,u){a=t(e,r,u);if(a<i||a===Infinity&&n===Infinity){n=e;i=a}})}return n};v.shuffle=function(e){var t=b(e)?e:v.values(e);var r=t.length;var n=Array(r);for(var i=0,u;i<r;i++){u=v.random(0,i);if(u!==i)n[i]=n[u];n[u]=t[i]}return n};v.sample=function(e,t,r){if(t==null||r){if(!b(e))e=v.values(e);return e[v.random(e.length-1)]}return v.shuffle(e).slice(0,Math.max(0,t))};v.sortBy=function(e,t,r){t=y(t,r);return v.pluck(v.map(e,function(e,r,n){return{value:e,index:r,criteria:t(e,r,n)}}).sort(function(e,t){var r=e.criteria;var n=t.criteria;if(r!==n){if(r>n||r===void 0)return 1;if(r<n||n===void 0)return-1}return e.index-t.index}),"value")};var R=function(e){return function(t,r,n){var i={};r=y(r,n);v.each(t,function(n,u){var a=r(n,u,t);e(i,n,a)});return i}};v.groupBy=R(function(e,t,r){if(v.has(e,r))e[r].push(t);else e[r]=[t]});v.indexBy=R(function(e,t,r){e[r]=t});v.countBy=R(function(e,t,r){if(v.has(e,r))e[r]++;else e[r]=1});v.toArray=function(e){if(!e)return[];if(v.isArray(e))return l.call(e);if(b(e))return v.map(e,v.identity);return v.values(e)};v.size=function(e){if(e==null)return 0;return b(e)?e.length:v.keys(e).length};v.partition=function(e,t,r){t=y(t,r);var n=[],i=[];v.each(e,function(e,r,u){(t(e,r,u)?n:i).push(e)});return[n,i]};v.first=v.head=v.take=function(e,t,r){if(e==null)return void 0;if(t==null||r)return e[0];return v.initial(e,e.length-t)};v.initial=function(e,t,r){return l.call(e,0,Math.max(0,e.length-(t==null||r?1:t)))};v.last=function(e,t,r){if(e==null)return void 0;if(t==null||r)return e[e.length-1];return v.rest(e,Math.max(0,e.length-t))};v.rest=v.tail=v.drop=function(e,t,r){return l.call(e,t==null||r?1:t)};v.compact=function(e){return v.filter(e,v.identity)};var _=function(e,t,r,n){var i=[],u=0;for(var a=n||0,o=S(e);a<o;a++){var l=e[a];if(b(l)&&(v.isArray(l)||v.isArguments(l))){if(!t)l=_(l,t,r);var s=0,f=l.length;i.length+=f;while(s<f){i[u++]=l[s++]}}else if(!r){i[u++]=l}}return i};v.flatten=function(e,t){return _(e,t,false)};v.without=function(e){return v.difference(e,l.call(arguments,1))};v.uniq=v.unique=function(e,t,r,n){if(!v.isBoolean(t)){n=r;r=t;t=false}if(r!=null)r=y(r,n);var i=[];var u=[];for(var a=0,o=S(e);a<o;a++){var l=e[a],s=r?r(l,a,e):l;if(t){if(!a||u!==s)i.push(l);u=s}else if(r){if(!v.contains(u,s)){u.push(s);i.push(l)}}else if(!v.contains(i,l)){i.push(l)}}return i};v.union=function(){return v.uniq(_(arguments,true,true))};v.intersection=function(e){var t=[];var r=arguments.length;for(var n=0,i=S(e);n<i;n++){var u=e[n];if(v.contains(t,u))continue;for(var a=1;a<r;a++){if(!v.contains(arguments[a],u))break}if(a===r)t.push(u)}return t};v.difference=function(e){var t=_(arguments,true,true,1);return v.filter(e,function(e){return!v.contains(t,e)})};v.zip=function(){return v.unzip(arguments)};v.unzip=function(e){var t=e&&v.max(e,S).length||0;var r=Array(t);for(var n=0;n<t;n++){r[n]=v.pluck(e,n)}return r};v.object=function(e,t){var r={};for(var n=0,i=S(e);n<i;n++){if(t){r[e[n]]=t[n]}else{r[e[n][0]]=e[n][1]}}return r};function I(e){return function(t,r,n){r=y(r,n);var i=S(t);var u=e>0?0:i-1;for(;u>=0&&u<i;u+=e){if(r(t[u],u,t))return u}return-1}}v.findIndex=I(1);v.findLastIndex=I(-1);v.sortedIndex=function(e,t,r,n){r=y(r,n,1);var i=r(t);var u=0,a=S(e);while(u<a){var o=Math.floor((u+a)/2);if(r(e[o])<i)u=o+1;else a=o}return u};function L(e,t,r){return function(n,i,u){var a=0,o=S(n);if(typeof u=="number"){if(e>0){a=u>=0?u:Math.max(u+o,a)}else{o=u>=0?Math.min(u+1,o):u+o+1}}else if(r&&u&&o){u=r(n,i);return n[u]===i?u:-1}if(i!==i){u=t(l.call(n,a,o),v.isNaN);return u>=0?u+a:-1}for(u=e>0?a:o-1;u>=0&&u<o;u+=e){if(n[u]===i)return u}return-1}}v.indexOf=L(1,v.findIndex,v.sortedIndex);v.lastIndexOf=L(-1,v.findLastIndex);v.range=function(e,t,r){if(t==null){t=e||0;e=0}r=r||1;var n=Math.max(Math.ceil((t-e)/r),0);var i=Array(n);for(var u=0;u<n;u++,e+=r){i[u]=e}return i};var M=function(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var u=E(e.prototype);var a=e.apply(u,i);if(v.isObject(a))return a;return u};v.bind=function(e,t){if(g&&e.bind===g)return g.apply(e,l.call(arguments,1));if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2);var n=function(){return M(e,n,t,this,r.concat(l.call(arguments)))};return n};v.partial=function(e){var t=l.call(arguments,1);var r=function(){var n=0,i=t.length;var u=Array(i);for(var a=0;a<i;a++){u[a]=t[a]===v?arguments[n++]:t[a]}while(n<arguments.length)u.push(arguments[n++]);return M(e,r,this,this,u)};return r};v.bindAll=function(e){var t,r=arguments.length,n;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++){n=arguments[t];e[n]=v.bind(e[n],e)}return e};v.memoize=function(e,t){var r=function(n){var i=r.cache;var u=""+(t?t.apply(this,arguments):n);if(!v.has(i,u))i[u]=e.apply(this,arguments);return i[u]};r.cache={};return r};v.delay=function(e,t){var r=l.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)};v.defer=v.partial(v.delay,v,1);v.throttle=function(e,t,r){var n,i,u;var a=null;var o=0;if(!r)r={};var l=function(){o=r.leading===false?0:v.now();a=null;u=e.apply(n,i);if(!a)n=i=null};return function(){var s=v.now();if(!o&&r.leading===false)o=s;var f=t-(s-o);n=this;i=arguments;if(f<=0||f>t){if(a){clearTimeout(a);a=null}o=s;u=e.apply(n,i);if(!a)n=i=null}else if(!a&&r.trailing!==false){a=setTimeout(l,f)}return u}};v.debounce=function(e,t,r){var n,i,u,a,o;var l=function(){var s=v.now()-a;if(s<t&&s>=0){n=setTimeout(l,t-s)}else{n=null;if(!r){o=e.apply(u,i);if(!n)u=i=null}}};return function(){u=this;i=arguments;a=v.now();var s=r&&!n;if(!n)n=setTimeout(l,t);if(s){o=e.apply(u,i);u=i=null}return o}};v.wrap=function(e,t){return v.partial(t,e)};v.negate=function(e){return function(){return!e.apply(this,arguments)}};v.compose=function(){var e=arguments;var t=e.length-1;return function(){var r=t;var n=e[t].apply(this,arguments);while(r--)n=e[r].call(this,n);return n}};v.after=function(e,t){return function(){if(--e<1){return t.apply(this,arguments)}}};v.before=function(e,t){var r;return function(){if(--e>0){r=t.apply(this,arguments)}if(e<=1)t=null;return r}};v.once=v.partial(v.before,2);var T=!{toString:null}.propertyIsEnumerable("toString");var D=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function C(e,t){var r=D.length;var n=e.constructor;var i=v.isFunction(n)&&n.prototype||u;var a="constructor";if(v.has(e,a)&&!v.contains(t,a))t.push(a);while(r--){a=D[r];if(a in e&&e[a]!==i[a]&&!v.contains(t,a)){t.push(a)}}}v.keys=function(e){if(!v.isObject(e))return[];if(p)return p(e);var t=[];for(var r in e)if(v.has(e,r))t.push(r);if(T)C(e,t);return t};v.allKeys=function(e){if(!v.isObject(e))return[];var t=[];for(var r in e)t.push(r);if(T)C(e,t);return t};v.values=function(e){var t=v.keys(e);var r=t.length;var n=Array(r);for(var i=0;i<r;i++){n[i]=e[t[i]]}return n};v.mapObject=function(e,t,r){t=y(t,r);var n=v.keys(e),i=n.length,u={},a;for(var o=0;o<i;o++){a=n[o];u[a]=t(e[a],a,e)}return u};v.pairs=function(e){var t=v.keys(e);var r=t.length;var n=Array(r);for(var i=0;i<r;i++){n[i]=[t[i],e[t[i]]]}return n};v.invert=function(e){var t={};var r=v.keys(e);for(var n=0,i=r.length;n<i;n++){t[e[r[n]]]=r[n]}return t};v.functions=v.methods=function(e){var t=[];for(var r in e){if(v.isFunction(e[r]))t.push(r)}return t.sort()};v.extend=d(v.allKeys);v.extendOwn=v.assign=d(v.keys);v.findKey=function(e,t,r){t=y(t,r);var n=v.keys(e),i;for(var u=0,a=n.length;u<a;u++){i=n[u];if(t(e[i],i,e))return i}};v.pick=function(e,t,r){var n={},i=e,u,a;if(i==null)return n;if(v.isFunction(t)){a=v.allKeys(i);u=N(t,r)}else{a=_(arguments,false,false,1);u=function(e,t,r){return t in r};i=Object(i)}for(var o=0,l=a.length;o<l;o++){var s=a[o];var f=i[s];if(u(f,s,i))n[s]=f}return n};v.omit=function(e,t,r){if(v.isFunction(t)){t=v.negate(t)}else{var n=v.map(_(arguments,false,false,1),String);t=function(e,t){return!v.contains(n,t)}}return v.pick(e,t,r)};v.defaults=d(v.allKeys,true);v.create=function(e,t){var r=E(e);if(t)v.extendOwn(r,t);return r};v.clone=function(e){if(!v.isObject(e))return e;return v.isArray(e)?e.slice():v.extend({},e)};v.tap=function(e,t){t(e);return e};v.isMatch=function(e,t){var r=v.keys(t),n=r.length;if(e==null)return!n;var i=Object(e);for(var u=0;u<n;u++){var a=r[u];if(t[a]!==i[a]||!(a in i))return false}return true};var w=function(e,t,r,n){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return e===t;if(e instanceof v)e=e._wrapped;if(t instanceof v)t=t._wrapped;var i=s.call(e);if(i!==s.call(t))return false;switch(i){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":if(+e!==+e)return+t!==+t;return+e===0?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var u=i==="[object Array]";if(!u){if(typeof e!="object"||typeof t!="object")return false;var a=e.constructor,o=t.constructor;if(a!==o&&!(v.isFunction(a)&&a instanceof a&&v.isFunction(o)&&o instanceof o)&&("constructor"in e&&"constructor"in t)){return false}}r=r||[];n=n||[];var l=r.length;while(l--){if(r[l]===e)return n[l]===t}r.push(e);n.push(t);if(u){l=e.length;if(l!==t.length)return false;while(l--){if(!w(e[l],t[l],r,n))return false}}else{var f=v.keys(e),c;l=f.length;if(v.keys(t).length!==l)return false;while(l--){c=f[l];if(!(v.has(t,c)&&w(e[c],t[c],r,n)))return false}}r.pop();n.pop();return true};v.isEqual=function(e,t){return w(e,t)};v.isEmpty=function(e){if(e==null)return true;if(b(e)&&(v.isArray(e)||v.isString(e)||v.isArguments(e)))return e.length===0;return v.keys(e).length===0};v.isElement=function(e){return!!(e&&e.nodeType===1)};v.isArray=c||function(e){return s.call(e)==="[object Array]"};v.isObject=function(e){var t=typeof e;return t==="function"||t==="object"&&!!e};v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){v["is"+e]=function(t){return s.call(t)==="[object "+e+"]"}});if(!v.isArguments(arguments)){v.isArguments=function(e){return v.has(e,"callee")}}if(typeof/./!="function"&&typeof Int8Array!="object"){v.isFunction=function(e){return typeof e=="function"||false}}v.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))};v.isNaN=function(e){return v.isNumber(e)&&e!==+e};v.isBoolean=function(e){return e===true||e===false||s.call(e)==="[object Boolean]"};v.isNull=function(e){return e===null};v.isUndefined=function(e){return e===void 0};v.has=function(e,t){return e!=null&&f.call(e,t)};v.noConflict=function(){e._=n;return this};v.identity=function(e){return e};v.constant=function(e){return function(){return e}};v.noop=function(){};v.property=O;v.propertyOf=function(e){return e==null?function(){}:function(t){return e[t]}};v.matcher=v.matches=function(e){e=v.extendOwn({},e);return function(t){return v.isMatch(t,e)}};v.times=function(e,t,r){var n=Array(Math.max(0,e));t=N(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n};v.random=function(e,t){if(t==null){t=e;e=0}return e+Math.floor(Math.random()*(t-e+1))};v.now=Date.now||function(){return(new Date).getTime()};var V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var x=v.invert(V);var F=function(e){var t=function(t){return e[t]};var r="(?:"+v.keys(e).join("|")+")";var n=RegExp(r);var i=RegExp(r,"g");return function(e){e=e==null?"":""+e;return n.test(e)?e.replace(i,t):e}};v.escape=F(V);v.unescape=F(x);v.result=function(e,t,r){var n=e==null?void 0:e[t];if(n===void 0){n=r}return v.isFunction(n)?n.call(e):n};var j=0;v.uniqueId=function(e){var t=++j+"";return e?e+t:t};v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var $=/(.)^/;var k={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var P=/\\|'|\r|\n|\u2028|\u2029/g;var B=function(e){return"\\"+k[e]};v.template=function(e,t,r){if(!t&&r)t=r;t=v.defaults({},t,v.templateSettings);var n=RegExp([(t.escape||$).source,(t.interpolate||$).source,(t.evaluate||$).source].join("|")+"|$","g");var i=0;var u="__p+='";e.replace(n,function(t,r,n,a,o){u+=e.slice(i,o).replace(P,B);i=o+t.length;if(r){u+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"}else if(n){u+="'+\n((__t=("+n+"))==null?'':__t)+\n'"}else if(a){u+="';\n"+a+"\n__p+='"}return t});u+="';\n";if(!t.variable)u="with(obj||{}){\n"+u+"}\n";u="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{var a=new Function(t.variable||"obj","_",u)}catch(o){o.source=u;throw o}var l=function(e){return a.call(this,e,v)};var s=t.variable||"obj";l.source="function("+s+"){\n"+u+"}";return l};v.chain=function(e){var t=v(e);t._chain=true;return t};var G=function(e,t){return e._chain?v(t).chain():t};v.mixin=function(e){v.each(v.functions(e),function(t){var r=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];o.apply(e,arguments);return G(this,r.apply(v,e))}})};v.mixin(v);v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];v.prototype[e]=function(){var r=this._wrapped;t.apply(r,arguments);if((e==="shift"||e==="splice")&&r.length===0)delete r[0];return G(this,r)}});v.each(["concat","join","slice"],function(e){var t=i[e];v.prototype[e]=function(){return G(this,t.apply(this._wrapped,arguments))}});v.prototype.value=function(){return this._wrapped};v.prototype.valueOf=v.prototype.toJSON=v.prototype.value;v.prototype.toString=function(){return""+this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return v})}}).call(this)},{}],9:[function(e,t,r){t.exports=function n(e){return e&&typeof e==="object"&&typeof e.copy==="function"&&typeof e.fill==="function"&&typeof e.readUInt8==="function"}},{}],10:[function(e,t,r){(function(t,n){var i=/%[sdj%]/g;r.format=function(e){if(!A(e)){var t=[];for(var r=0;r<arguments.length;r++){t.push(o(arguments[r]))}return t.join(" ")}var r=1;var n=arguments;var u=n.length;var a=String(e).replace(i,function(e){if(e==="%%")return"%";if(r>=u)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}});for(var l=n[r];r<u;l=n[++r]){if(d(l)||!R(l)){a+=" "+l}else{a+=" "+o(l)}}return a};r.deprecate=function(e,i){if(b(n.process)){return function(){return r.deprecate(e,i).apply(this,arguments);
}}if(t.noDeprecation===true){return e}var u=false;function a(){if(!u){if(t.throwDeprecation){throw new Error(i)}else if(t.traceDeprecation){console.trace(i)}else{console.error(i)}u=true}return e.apply(this,arguments)}return a};var u={};var a;r.debuglog=function(e){if(b(a))a=t.env.NODE_DEBUG||"";e=e.toUpperCase();if(!u[e]){if(new RegExp("\\b"+e+"\\b","i").test(a)){var n=t.pid;u[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else{u[e]=function(){}}}return u[e]};function o(e,t){var n={seen:[],stylize:s};if(arguments.length>=3)n.depth=arguments[2];if(arguments.length>=4)n.colors=arguments[3];if(y(t)){n.showHidden=t}else if(t){r._extend(n,t)}if(b(n.showHidden))n.showHidden=false;if(b(n.depth))n.depth=2;if(b(n.colors))n.colors=false;if(b(n.customInspect))n.customInspect=true;if(n.colors)n.stylize=l;return c(n,e,n.depth)}r.inspect=o;o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};function l(e,t){var r=o.styles[t];if(r){return"["+o.colors[r][0]+"m"+e+"["+o.colors[r][1]+"m"}else{return e}}function s(e,t){return e}function f(e){var t={};e.forEach(function(e,r){t[e]=true});return t}function c(e,t,n){if(e.customInspect&&t&&L(t.inspect)&&t.inspect!==r.inspect&&!(t.constructor&&t.constructor.prototype===t)){var i=t.inspect(n,e);if(!A(i)){i=c(e,i,n)}return i}var u=p(e,t);if(u){return u}var a=Object.keys(t);var o=f(a);if(e.showHidden){a=Object.getOwnPropertyNames(t)}if(I(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0)){return g(t)}if(a.length===0){if(L(t)){var l=t.name?": "+t.name:"";return e.stylize("[Function"+l+"]","special")}if(U(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}if(_(t)){return e.stylize(Date.prototype.toString.call(t),"date")}if(I(t)){return g(t)}}var s="",y=false,d=["{","}"];if(N(t)){y=true;d=["[","]"]}if(L(t)){var E=t.name?": "+t.name:"";s=" [Function"+E+"]"}if(U(t)){s=" "+RegExp.prototype.toString.call(t)}if(_(t)){s=" "+Date.prototype.toUTCString.call(t)}if(I(t)){s=" "+g(t)}if(a.length===0&&(!y||t.length==0)){return d[0]+s+d[1]}if(n<0){if(U(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}else{return e.stylize("[Object]","special")}}e.seen.push(t);var O;if(y){O=m(e,t,n,o,a)}else{O=a.map(function(r){return h(e,t,n,o,r,y)})}e.seen.pop();return v(O,s,d)}function p(e,t){if(b(t))return e.stylize("undefined","undefined");if(A(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(O(t))return e.stylize(""+t,"number");if(y(t))return e.stylize(""+t,"boolean");if(d(t))return e.stylize("null","null")}function g(e){return"["+Error.prototype.toString.call(e)+"]"}function m(e,t,r,n,i){var u=[];for(var a=0,o=t.length;a<o;++a){if(V(t,String(a))){u.push(h(e,t,r,n,String(a),true))}else{u.push("")}}i.forEach(function(i){if(!i.match(/^\d+$/)){u.push(h(e,t,r,n,i,true))}});return u}function h(e,t,r,n,i,u){var a,o,l;l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]};if(l.get){if(l.set){o=e.stylize("[Getter/Setter]","special")}else{o=e.stylize("[Getter]","special")}}else{if(l.set){o=e.stylize("[Setter]","special")}}if(!V(n,i)){a="["+i+"]"}if(!o){if(e.seen.indexOf(l.value)<0){if(d(r)){o=c(e,l.value,null)}else{o=c(e,l.value,r-1)}if(o.indexOf("\n")>-1){if(u){o=o.split("\n").map(function(e){return"  "+e}).join("\n").substr(2)}else{o="\n"+o.split("\n").map(function(e){return"   "+e}).join("\n")}}}else{o=e.stylize("[Circular]","special")}}if(b(a)){if(u&&i.match(/^\d+$/)){return o}a=JSON.stringify(""+i);if(a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){a=a.substr(1,a.length-2);a=e.stylize(a,"name")}else{a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");a=e.stylize(a,"string")}}return a+": "+o}function v(e,t,r){var n=0;var i=e.reduce(function(e,t){n++;if(t.indexOf("\n")>=0)n++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(i>60){return r[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]}return r[0]+t+" "+e.join(", ")+" "+r[1]}function N(e){return Array.isArray(e)}r.isArray=N;function y(e){return typeof e==="boolean"}r.isBoolean=y;function d(e){return e===null}r.isNull=d;function E(e){return e==null}r.isNullOrUndefined=E;function O(e){return typeof e==="number"}r.isNumber=O;function A(e){return typeof e==="string"}r.isString=A;function S(e){return typeof e==="symbol"}r.isSymbol=S;function b(e){return e===void 0}r.isUndefined=b;function U(e){return R(e)&&T(e)==="[object RegExp]"}r.isRegExp=U;function R(e){return typeof e==="object"&&e!==null}r.isObject=R;function _(e){return R(e)&&T(e)==="[object Date]"}r.isDate=_;function I(e){return R(e)&&(T(e)==="[object Error]"||e instanceof Error)}r.isError=I;function L(e){return typeof e==="function"}r.isFunction=L;function M(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}r.isPrimitive=M;r.isBuffer=e("./support/isBuffer");function T(e){return Object.prototype.toString.call(e)}function D(e){return e<10?"0"+e.toString(10):e.toString(10)}var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function w(){var e=new Date;var t=[D(e.getHours()),D(e.getMinutes()),D(e.getSeconds())].join(":");return[e.getDate(),C[e.getMonth()],t].join(" ")}r.log=function(){console.log("%s - %s",w(),r.format.apply(r,arguments))};r.inherits=e("inherits");r._extend=function(e,t){if(!t||!R(t))return e;var r=Object.keys(t);var n=r.length;while(n--){e[r[n]]=t[r[n]]}return e};function V(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":9,_process:4,inherits:2}],11:[function(require,module,exports){var Runtime,Utils,_,functions;_=require("underscore");functions=require("./functions");Utils=require("./utils");Runtime=function(){function Runtime(){this.setupGlobal();this.setupFunctions()}Runtime.defaultLocale="en_US";Runtime.defaultCurrencyCode="USD";Runtime.defaultCurrencySymbol="$";Runtime.defaultTimeZone="UTC";Runtime.prototype.global=null;Runtime.prototype.expressions=[];Runtime.prototype.form={};Runtime.prototype.values={};Runtime.prototype.hooks={};Runtime.prototype.event={};Runtime.prototype.events={on:{},change:{},click:{}};Runtime.prototype.script=null;Runtime.prototype.customVariables={};Runtime.prototype.locale=Runtime.defaultLocale;Runtime.prototype.currencyCode=Runtime.defaultCurrencyCode;Runtime.prototype.currencySymbol=Runtime.defaultCurrencySymbol;Runtime.prototype.variables={};Runtime.prototype.results=[];Runtime.prototype.dataNames={};Runtime.prototype.elements=[];Runtime.prototype.elementsByKey={};Runtime.prototype.elementsByDataName={};Runtime.prototype.statusesByValue={};Runtime.prototype.featureIsNew=true;Runtime.prototype.showErrors=false;Runtime.prototype.asyncCallbacks={};Runtime.prototype.asyncCount=0;Runtime.prototype.extraVariableNames=["locale","language","timeZone","decimalSeparator","groupingSeparator","currencySymbol","currencyCode","country","deviceIdentifier","deviceModel","deviceManufacturer","platform","platformVersion","application","applicationVersion","applicationBuild","userEmail","userRoleName","recordStatus","recordSystemCreatedAt","recordSystemUpdatedAt","recordClientCreatedAt","recordClientUpdatedAt","recordProject","recordProjectName","recordGeometry","recordAltitude","recordVerticalAccuracy","recordHorizontalAccuracy","featureCreatedAt","featureUpdatedAt","featureGeometry"];Runtime.prototype.clearValues=function(){var e,t;t=[];for(e in this.variables){t.push(delete this.variables[e])}return t};Runtime.prototype.setupValues=function(){var e,t,r,n,i,u,a,o,l;this.clearValues();o=this.variables;u=this.dataNames;for(r in u){o["$"+u[r]]=void 0}for(r in this.values){l=this.values[r];e=this.elementsByKey[r];if(e&&this.dataNames[r]){o["$"+this.dataNames[r]]=Utils.valueForElement(e,l)}}a=this.extraVariableNames;for(t=0,n=a.length;t<n;t++){i=a[t];o["$$"+i]=this[i]}for(i in this.customVariables){o[""+i]=this.customVariables[i]}return functions.CONFIGURE(this,false)};Runtime.prototype.prepare=function(){this.elements=Utils.flattenElements(this.form.elements,true,true);if(this.form.status_field&&this.form.status_field.choices){_.each(this.form.status_field.choices,function(e){return function(t){return e.statusesByValue[t.value]=t.label}}(this))}_.each(this.elements,function(e){return function(t){e.elementsByKey[t.key]=t;e.elementsByDataName[t.data_name]=t;return e.dataNames[t.key]=t.data_name}}(this));return this.initializeScript()};Runtime.prototype.invokeAsync=function(e,t,r){var n;n=++this.asyncCount;this.asyncCallbacks[n]=r;return e.apply(this,t.concat([n]))};Runtime.prototype.finishAsync=function(){var e,t;t=+this.callbackID;e=this.asyncCallbacks[t];delete this.asyncCallbacks[t];$$runtime.results=[];e.apply(this,this.callbackArguments);return $$runtime.results};Runtime.prototype.initializeScript=function(){if(!_.isString(this.script)){return}this.setupValues();with(this.variables){eval(this.script)}};Runtime.prototype.hooksByName=function(e){var t;return(t=this.events)[e]!=null?t[e]:t[e]=[]};Runtime.prototype.hooksByParams=function(e,t){var r;return(r=this.hooksByName(e))[t]!=null?r[t]:r[t]=[]};Runtime.prototype.removeHook=function(e,t,r){if(t!=null&&r!=null){return this.hooksByName(e)[t]=_.without(this.hooksByName(e)[t],r)}else if(t!=null){return delete this.hooksByName(e)[t]}else{return this.events[e]=[]}};Runtime.prototype.addHook=function(e,t,r){return this.hooksByParams(e,t).push(r)};Runtime.prototype.trigger=function(){var e,t,r,n,i,u,a,o;if(this.event.field!=null){a=[this.event.event,this.event.field],i=a[0],u=a[1]}else{o=["on",this.event.event],i=o[0],u=o[1]}t=this.hooksByParams(i,u);if(!(t!=null?t.length:void 0)){return[]}this.setupValues();$$runtime.results=[];for(r=0,n=t.length;r<n;r++){e=t[r];e.call(this,this.event)}return $$runtime.results};Runtime.prototype.evaluate=function(){var e,t,r,n;this.setupValues();$$runtime.results=[];n=this.expressions;for(t=0,r=n.length;t<r;t++){e=n[t];$$runtime.results.push(this.evaluateExpression(e))}return $$runtime.results};Runtime.prototype.evaluateExpression=function(context){var error,evalResult,ex,rawValue,stringValue,thisVariableName,variables;variables=this.variables;thisVariableName="$"+context.dataName;try{$$runtime.showErrors=false;variables.$$current=$$runtime.$$currentValue=variables[thisVariableName];stringValue=rawValue=$$runtime.$$result=void 0;if(context.expression&&context.expression.length>0){evalResult=void 0;with(variables){evalResult=eval(context.expression)}rawValue=this.coalesce($$runtime.$$result,evalResult);stringValue=this.formatValue(rawValue);variables[thisVariableName]=_.isNumber(rawValue)||_.isDate(rawValue)?rawValue:stringValue}return this.createResult(context.key,rawValue,stringValue,null,$$runtime.showErrors)}catch(error){ex=error;console.log("JS ERROR : "+context.dataName+" : "+ex.toString());variables[thisVariableName]=void 0;return this.createResult(context.key,null,null,ex.toString(),$$runtime.showErrors)}};Runtime.prototype.coalesce=function(){return _.find(Utils.toArray(arguments),function(e){return!_.isUndefined(e)})};Runtime.prototype.createResult=function(e,t,r,n,i){if(i){if(n){n=n.toString()}else if(_.isUndefined(t)){n="[Undefined]"}else if(_.isNaN(t)){n="[Not a Number]"}else if(_.isFunction(t)){n="[Function]"}else if(_.isArray(t)){n="[Array]"}else if(_.isDate(t)){n=null}else if(_.isObject(t)){n="[Object]"}}else{n=null}return{type:"calculation",key:e,value:r,error:n}};Runtime.prototype.formatValue=function(e){if(_.isUndefined(e)){e=null}else if(_.isNull(e)){e=null}else if(_.isNaN(e)){e=null}else if(_.isNumber(e)){e=e}else if(_.isDate(e)){e=Utils.formatMachineDate(e)}else if(_.isArray(e)){e=e.map(this.formatValue).join(", ")}else if(_.isRegExp(e)){e=e.toString()}else if(_.isFunction(e)){e=null}return e};Runtime.prototype.setupGlobal=function(){var e,t;this.global=void 0;try{this.global=Function("return this")()}catch(t){e=t;this.global=window}this.global.$$runtime=this;this.global.$$prepare=this.prepare.bind(this);this.global.$$evaluate=this.evaluate.bind(this);this.global.$$trigger=this.trigger.bind(this);return this.global.$$finishAsync=this.finishAsync.bind(this)};Runtime.prototype.setupFunctions=function(){var e,t;this.functions||(this.functions={});t=[];for(e in functions){t.push(this.global[e]=this.functions[e]=functions[e])}return t};return Runtime}();module.exports=new Runtime},{"./functions":1,"./utils":12,underscore:8}],12:[function(e,t,r){var n,i,u,a,o;i=e("underscore");o={};a={};u={};n=function(){function e(){}e.DATE_REGEX=/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/;e.toArray=function(e){return Array.prototype.slice.call(e,0)};e.flattenElements=function(t,r,n,u){if(r==null){r=true}if(n==null){n=false}if(u==null){u=void 0}return i.tap([],function(a){return i.each(t,function(t){var i,o;if(n){t.parent=u}a.push(t);o=true;if(!r&&t.type==="Repeatable"){o=false}if(o&&t.elements){i=e.flattenElements(t.elements,r,n,t);return Array.prototype.push.apply(a,i)}})})};e.nearestRepeatable=function(e){var t;t=e;while(t){if(t.type==="Repeatable"){return t}t=t.parent}return null};e.valueForElement=function(t,r){if(e.isNumericElement(t)){return e.numberValue(r)}else if(e.isDateElement(t)){return e.dateValue(r)}else{return r}};e.isNumericElement=function(e){var t,r;return e.numeric||((t=e.display)!=null?t.style:void 0)==="number"||((r=e.display)!=null?r.style:void 0)==="currency"};e.isDateElement=function(e){return e.type==="DateTimeField"||e.type==="DateField"};e.dateValue=function(e){if(e&&e.length<=10){return new Date(e.replace(/-/g,"/")+" 00:00:00")}else{return e}};e.numberValue=function(e){e||(e=void 0);if(e!=null){return Number(e)}else{return void 0}};e.repeatableValueElements=function(t){var r,n,i,l,s,f,c,p,g;p=t.key;if(o[p]){l={all:o[p],byKey:a[p],byDataName:u[p]};return l}f=e.flattenElements(t.elements,false);o[p]=r=f;a[p]=i={};u[p]=n={};for(c=0,g=f.length;c<g;c++){s=f[c];i[s.key]=s;n[s.data_name]=s}return{all:r,byKey:i,byDataName:n}};e.repeatableValues=function(t,r,n){var u,a,o;if(!i.isArray(r)){return null}u=e.repeatableValueElements(t).byDataName;a=u[n];if(!a){return null}o=i.map(r,function(t){return e.valueForElement(a,t.form_values[a.key])});return o};e.formatMachineDate=function(e){if(!(e!=null&&!isNaN(e.getTime()))){return null}return RIGHT("000"+e.getFullYear(),4)+"-"+RIGHT("0"+(e.getMonth()+1),2)+"-"+RIGHT("0"+e.getDate(),2)};e.makeValue=function(t,r){var n;if(r==null){return null}n=e.converters[t.type];if(n!=null){return n(r)}else{return null}};e.makeChoiceValue=function(e,t){return{choice_values:e!=null?e:[],other_values:t!=null?t:[]}};e.isSetValueSupported=function(t){return e.converters[t]!=null};e.converters={TextField:function(e){if(e==null){return null}return e.toString()},CalculatedField:function(t){return e.converters.TextField(t)},HyperlinkField:function(t){return e.converters.TextField(t)},YesNoField:function(t){return e.converters.TextField(t)},BarcodeField:function(t){return e.converters.TextField(t)},DateTimeField:function(e){var t;if(e==null){return null}t=DATEVALUE(e);if(t==null){return null}return FORMAT("%s-%s-%s",t.getFullYear(),LPAD(t.getMonth()+1,2,"0"),LPAD(t.getDate(),2,"0"))},DateField:function(t){return e.converters.DateTimeField(t)},TimeField:function(e){var t,r,n;if(!i.isString(e)){return null}if(e.length!==5){return null}if(e[2]!==":"){return null}n=e.split(":");t=NUM(n[0]);r=NUM(n[1]);if(t>23||t<0){return null}if(r>59||r<0){return null}return FORMAT("%s:%s",LPAD(t,2,"0"),LPAD(r,2,"0"))},ChoiceField:function(t){var r;r=null;switch(true){case i.isArray(t):r=i.map(i.compact(t),function(e){return e.toString()});break;case i.isString(t)&&t.length!==0:r=[t];break;case i.isNumber(t):r=[t.toString()];break;case i.isObject(t)&&i.isArray(t.choice_values):r=i.map(i.compact(t.choice_values),function(e){return e.toString()})}if(!i.isArray(r)){return null}return e.makeChoiceValue(r,[])},ClassificationField:function(t){return e.converters.ChoiceField(t)},AddressField:function(e){var t,r,n,u,a,o,l,s,f,c,p,g,m,h,v,N,y;if(!i.isObject(e)){return null}t={sub_thoroughfare:(r=(n=e.sub_thoroughfare)!=null?n.toString():void 0)!=null?r:null,thoroughfare:(c=(p=e.thoroughfare)!=null?p.toString():void 0)!=null?c:null,suite:(g=(m=e.suite)!=null?m.toString():void 0)!=null?g:null,locality:(h=(v=e.locality)!=null?v.toString():void 0)!=null?h:null,sub_admin_area:(N=(y=e.sub_admin_area)!=null?y.toString():void 0)!=null?N:null,admin_area:(u=(a=e.admin_area)!=null?a.toString():void 0)!=null?u:null,postal_code:(o=(l=e.postal_code)!=null?l.toString():void 0)!=null?o:null,country:(s=(f=e.country)!=null?f.toString():void 0)!=null?s:null};return t}};return e}();t.exports=n},{underscore:8}]},{},[11]);
